<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <title>Mich Travel Tools ‚ú®</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            coral: { 50:'#FFF1F0',100:'#FFE0DE',200:'#FFC2BD',300:'#FF9D96',400:'#E8716D',500:'#D4605C',600:'#B5423E',700:'#8C302D' },
            navy: { 50:'#E8EDF5',100:'#C5D0E6',400:'#4A6291',500:'#2C4570',600:'#1B2A4A',700:'#111D33' },
            cream: { 50:'#FFFDF9',100:'#FFF8F0',200:'#FFF0E0',300:'#FFE8CC' }
          },
          fontFamily: { poppins:['Poppins','sans-serif'] }
        }
      }
    }
  </script>
  <style>
    *{font-family:'Poppins',sans-serif}

    /* ‚îÄ‚îÄ Refined Inputs ‚îÄ‚îÄ */
    .fi-label{display:block;font-size:12px;font-weight:600;color:#1B2A4A;margin-bottom:4px;letter-spacing:0.02em}
    .fi-input{width:100%;padding:14px 16px;background:#FFF8F0;border:1.5px solid #FFE8CC;border-radius:14px;font-size:14px;color:#1B2A4A;outline:none;transition:all .2s}
    .fi-input:focus{border-color:#E8716D;background:#fff;box-shadow:0 0 0 3px rgba(232,113,109,0.1)}
    .fi-input::placeholder{color:#c4b5a5}
    .fi-select{width:100%;padding:14px 40px 14px 16px;background:#FFF8F0;border:1.5px solid #FFE8CC;border-radius:14px;font-size:14px;color:#1B2A4A;outline:none;transition:all .2s;appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23c4b5a5'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 12px center;background-size:20px}
    .fi-select:focus{border-color:#E8716D;background:#fff;box-shadow:0 0 0 3px rgba(232,113,109,0.1)}
    textarea.fi-input{resize:vertical;min-height:60px}

    /* ‚îÄ‚îÄ Toggle Switch ‚îÄ‚îÄ */
    .toggle-wrap{display:flex;align-items:center;gap:12px;padding:12px 16px;background:#FFF8F0;border-radius:14px;border:1.5px solid #FFE8CC;cursor:pointer;transition:all .2s;user-select:none}
    .toggle-wrap:has(input:checked){background:#FFF1F0;border-color:#FFC2BD}
    .toggle-track{position:relative;width:44px;height:26px;background:#ddd;border-radius:13px;transition:background .2s;flex-shrink:0}
    .toggle-track::after{content:'';position:absolute;top:3px;left:3px;width:20px;height:20px;background:#fff;border-radius:50%;transition:transform .2s;box-shadow:0 1px 3px rgba(0,0,0,.15)}
    .toggle-wrap input:checked+.toggle-track{background:#E8716D}
    .toggle-wrap input:checked+.toggle-track::after{transform:translateX(18px)}
    .toggle-wrap input{position:absolute;opacity:0;pointer-events:none}
    .toggle-text{font-size:13px;color:#1B2A4A;font-weight:500}

    /* ‚îÄ‚îÄ Section Cards ‚îÄ‚îÄ */
    .s-card{background:#fff;border-radius:20px;padding:24px;box-shadow:0 2px 12px rgba(27,42,74,0.04);border:1px solid rgba(255,232,204,0.5);margin-bottom:16px}
    .s-card h2{font-size:14px;font-weight:700;color:#1B2A4A;margin-bottom:16px;display:flex;align-items:center;gap:8px}

    /* ‚îÄ‚îÄ Destination sections ‚îÄ‚îÄ */
    .dest-section{display:none}.dest-section.active{display:block}

    /* ‚îÄ‚îÄ Buttons ‚îÄ‚îÄ */
    .btn-generate{width:100%;padding:18px;border-radius:18px;font-weight:700;color:#fff;font-size:17px;transition:all .2s;background:linear-gradient(135deg,#E8716D 0%,#D4605C 100%);box-shadow:0 4px 15px rgba(232,113,109,0.3);border:none;cursor:pointer}
    .btn-generate:hover{box-shadow:0 8px 30px rgba(232,113,109,0.45);transform:translateY(-1px)}
    .btn-generate:active{transform:scale(0.98)}
    .btn-action{width:100%;padding:14px;border-radius:14px;font-weight:600;font-size:13px;transition:all .15s;border:2px solid #E8716D;color:#E8716D;background:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px}
    .btn-action:hover{background:#FFF1F0}
    .btn-action:active{transform:scale(0.98)}
    .btn-link{font-size:13px;font-weight:600;color:#E8716D;background:none;border:none;cursor:pointer;display:flex;align-items:center;gap:4px;padding:8px 0}
    .btn-link:hover{color:#D4605C}

    /* ‚îÄ‚îÄ Tabs ‚îÄ‚îÄ */
    .tab-bar{display:flex;gap:6px;background:#FFF8F0;border-radius:14px;padding:4px}
    .tab-btn{flex:1;padding:10px;border-radius:11px;font-size:13px;font-weight:600;text-align:center;transition:all .2s;cursor:pointer;border:none;color:#999}
    .tab-btn.active{background:#1B2A4A;color:#fff;box-shadow:0 2px 8px rgba(27,42,74,0.2)}

    /* ‚îÄ‚îÄ WhatsApp Preview ‚îÄ‚îÄ */
    .wa-bubble{background:#fff;border-radius:0 12px 12px 12px;padding:16px;box-shadow:0 1px 4px rgba(0,0,0,0.08);font-size:14px;line-height:1.7;color:#111;white-space:pre-wrap;word-wrap:break-word;outline:none;min-height:200px;max-width:90%}
    .wa-bubble b{font-weight:700}

    /* ‚îÄ‚îÄ Hotel preview ‚îÄ‚îÄ */
    .hotel-preview{margin-top:8px;border-radius:14px;overflow:hidden;transition:all .2s}
    .hotel-preview img{width:100%;height:120px;object-fit:cover;display:block}
    .hotel-cat{display:inline-block;padding:3px 10px;border-radius:20px;color:#fff;font-size:11px;font-weight:600}
    .cat-value{background:#22c55e}.cat-moderate{background:#3b82f6}.cat-deluxe{background:#a855f7}.cat-premier{background:#f59e0b}.cat-preferred{background:#6366f1}.cat-prime{background:#14b8a6}.cat-disney{background:#e11d48}.cat-onsite{background:#0ea5e9}

    /* ‚îÄ‚îÄ Card ‚îÄ‚îÄ */
    #card-render{width:420px;font-family:'Poppins',sans-serif}
    .card-editable{outline:none;border-bottom:1px dashed rgba(255,255,255,0.3);min-width:40px;display:inline-block}
    .card-editable:focus{border-bottom-color:rgba(255,255,255,0.8);background:rgba(255,255,255,0.05)}
    .card-editable-dark{outline:none;border-bottom:1px dashed rgba(0,0,0,0.15);min-width:40px;display:inline-block}
    .card-editable-dark:focus{border-bottom-color:rgba(0,0,0,0.4);background:rgba(0,0,0,0.02)}

    /* ‚îÄ‚îÄ Itinerary rows ‚îÄ‚îÄ */
    .it-row{display:flex;align-items:center;gap:8px;margin-bottom:8px}
    .price-group-card{background:#FFF8F0;border-radius:14px;padding:16px;margin-bottom:12px;border:1.5px solid #FFE8CC}

    /* ‚îÄ‚îÄ Toast ‚îÄ‚îÄ */
    .toast{position:fixed;top:16px;left:50%;transform:translateX(-50%);background:#1B2A4A;color:#fff;padding:12px 24px;border-radius:16px;box-shadow:0 4px 20px rgba(0,0,0,0.15);font-size:13px;font-weight:600;z-index:50;transition:all .3s}

    @media(max-width:640px){
      #card-render{width:340px}
      .s-card{padding:20px;border-radius:16px}
    }

    /* ‚îÄ‚îÄ Main Tab Navigation ‚îÄ‚îÄ */
    .main-tabs{display:flex;gap:4px;margin-top:12px}
    .main-tab{padding:8px 20px;border-radius:12px;font-size:13px;font-weight:600;cursor:pointer;transition:all .2s;border:none;color:rgba(255,255,255,0.6);background:rgba(255,255,255,0.1)}
    .main-tab.active{background:#fff;color:#D4605C;box-shadow:0 2px 8px rgba(0,0,0,0.1)}
    .main-tab:hover:not(.active){background:rgba(255,255,255,0.2);color:#fff}

    /* ‚îÄ‚îÄ Itinerary Form ‚îÄ‚îÄ */
    .it-day-card{background:#fff;border-radius:16px;border:1.5px solid #FFE8CC;margin-bottom:12px;overflow:hidden;transition:all .2s}
    .it-day-header{display:flex;align-items:center;gap:10px;padding:14px 16px;cursor:pointer;user-select:none;transition:background .15s}
    .it-day-header:hover{background:#FFF8F0}
    .it-day-body{padding:0 16px 16px;display:none}
    .it-day-card.open .it-day-body{display:block}
    .it-day-card.open .it-chevron{transform:rotate(180deg)}
    .it-chevron{transition:transform .2s;color:#999;font-size:12px}
    .it-act-row,.it-tip-row,.it-doc-row{display:flex;gap:8px;align-items:start;margin-bottom:8px}
    .it-mini-input{padding:8px 12px!important;font-size:12px!important;border-radius:10px!important}
    .it-remove-btn{width:28px;height:28px;border-radius:8px;border:none;background:#FFF1F0;color:#E8716D;font-weight:700;font-size:14px;cursor:pointer;flex-shrink:0;display:flex;align-items:center;justify-content:center;transition:all .15s}
    .it-remove-btn:hover{background:#E8716D;color:#fff}
    .it-day-num{width:36px;height:36px;border-radius:10px;background:linear-gradient(135deg,#E8716D,#D4605C);color:#fff;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:800;flex-shrink:0}
    .it-day-num.cruise{background:linear-gradient(135deg,#0D9488,#0891B2)}
    .it-day-num.park{background:linear-gradient(135deg,#7C3AED,#6D28D9)}
    .it-day-num.travel{background:linear-gradient(135deg,#F59E0B,#D97706)}
    .it-day-num.free{background:linear-gradient(135deg,#059669,#047857)}

    /* ‚îÄ‚îÄ Itinerary Preview ‚îÄ‚îÄ */
    .itp{max-width:440px;margin:0 auto;background:#fff;border-radius:20px;overflow:hidden;box-shadow:0 8px 40px rgba(27,42,74,0.12);font-family:'Poppins',sans-serif}
    .itp-hero{position:relative;height:220px;background-size:cover;background-position:center}
    .itp-hero-ov{position:absolute;inset:0;background:linear-gradient(to top,rgba(0,0,0,0.75) 0%,rgba(0,0,0,0.05) 60%);display:flex;flex-direction:column;justify-content:flex-end;padding:24px}
    .itp-hero h1{font-size:22px;font-weight:800;color:#fff;text-shadow:0 2px 8px rgba(0,0,0,0.3);line-height:1.2;margin-bottom:2px}
    .itp-hero p{font-size:12px;color:rgba(255,255,255,0.85)}
    .itp-agent{background:#1B2A4A;padding:16px 20px;display:flex;align-items:center;gap:14px}
    .itp-agent-info h3{font-size:14px;font-weight:700;color:#fff;margin-bottom:1px}
    .itp-agent-info p{font-size:11px;color:rgba(255,255,255,0.55)}
    .itp-agent-avatar{width:44px;height:44px;border-radius:50%;background:rgba(255,255,255,0.15);display:flex;align-items:center;justify-content:center;font-size:20px;flex-shrink:0}
    .itp-contact{display:flex;gap:12px;margin-top:6px}
    .itp-contact span{font-size:11px;color:#E8716D;font-weight:600;cursor:pointer}
    .itp-travelers{display:flex;gap:16px;padding:14px 20px;background:#FFF8F0;font-size:12px;font-weight:600;color:#1B2A4A}
    .itp-section{padding:16px 20px}
    .itp-stitle{font-size:13px;font-weight:700;color:#1B2A4A;margin-bottom:12px;display:flex;align-items:center;gap:8px}
    .itp-doc{display:flex;align-items:center;gap:12px;padding:10px 0;border-bottom:1px solid #f5f0eb}
    .itp-doc:last-child{border-bottom:none}
    .itp-doc-icon{width:34px;height:34px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:15px;flex-shrink:0}
    .itp-doc-text{font-size:12px;color:#333;font-weight:500}
    .itp-doc-desc{font-size:10px;color:#999;margin-top:1px}

    /* Day accordion in preview */
    .itp-day{border-bottom:1px solid #f0ebe5}
    .itp-day:last-child{border-bottom:none}
    .itp-day-head{display:flex;align-items:center;gap:12px;padding:14px 20px;cursor:pointer;transition:background .15s;user-select:none}
    .itp-day-head:hover{background:#FFFDF9}
    .itp-day-badge{width:42px;height:42px;border-radius:12px;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#fff;font-weight:700;flex-shrink:0;line-height:1.1}
    .itp-day-badge .db-num{font-size:15px;font-weight:800}
    .itp-day-badge .db-label{font-size:8px;text-transform:uppercase;letter-spacing:.5px;opacity:.8}
    .itp-day-info{flex:1;min-width:0}
    .itp-day-date{font-size:10px;color:#999;font-weight:500}
    .itp-day-name{font-size:14px;font-weight:700;color:#1B2A4A;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .itp-day-icon{font-size:20px;flex-shrink:0}
    .itp-day-chev{font-size:10px;color:#ccc;transition:transform .3s;flex-shrink:0}
    .itp-day.open .itp-day-chev{transform:rotate(180deg)}
    .itp-day-body{max-height:0;overflow:hidden;transition:max-height .4s cubic-bezier(0.4,0,0.2,1)}
    .itp-day.open .itp-day-body{max-height:3000px}

    /* Timeline in preview */
    .itp-timeline{padding:0 20px 12px}
    .itp-act{display:flex;gap:12px;position:relative}
    .itp-act-time{width:52px;font-size:10px;font-weight:600;color:#999;text-align:right;padding-top:4px;flex-shrink:0}
    .itp-act-line{position:relative;width:20px;display:flex;flex-direction:column;align-items:center;flex-shrink:0}
    .itp-act-dot{width:10px;height:10px;border-radius:50%;background:#E8716D;flex-shrink:0;margin-top:5px;z-index:1}
    .itp-act-bar{flex:1;width:2px;background:#f0ebe5;margin-top:4px}
    .itp-act:last-child .itp-act-bar{display:none}
    .itp-act-desc{flex:1;font-size:12px;color:#333;line-height:1.6;padding:2px 0 10px}
    .itp-tips{margin:0 20px 16px;background:linear-gradient(135deg,#FFF8F0,#FFF1F0);border-radius:12px;padding:14px 16px}
    .itp-tips h4{font-size:11px;font-weight:700;color:#1B2A4A;margin-bottom:8px;display:flex;align-items:center;gap:6px}
    .itp-tips li{font-size:11px;color:#555;margin-bottom:5px;padding-left:20px;position:relative;line-height:1.5}
    .itp-tips li::before{content:'üí°';position:absolute;left:0;font-size:9px;top:1px}
    .itp-footer{background:#FFF8F0;padding:16px 20px;text-align:center;border-top:1px solid #f0e8dc}
    .itp-footer div{font-size:11px;color:#1B2A4A;margin-bottom:3px;font-weight:500}
    .itp-footer .sub{font-size:9px;color:#888;font-weight:400}

    /* PDF mode */
    .itp.pdf-mode .itp-day-body{max-height:none!important;overflow:visible!important}
    .itp.pdf-mode .itp-day-head{cursor:default}
    .itp.pdf-mode .itp-day-chev{display:none}
    .itp.pdf-mode{box-shadow:none;border-radius:0;max-width:100%}

    /* Saved itineraries list */
    .saved-item{display:flex;align-items:center;gap:10px;padding:12px 14px;border-radius:14px;background:#fff;border:1px solid #f0ece4;margin-bottom:8px;transition:all .2s}
    .saved-item:hover{border-color:#E8716D;box-shadow:0 2px 8px rgba(232,113,109,.12)}
    .saved-item-info{flex:1;min-width:0}
    .saved-item-title{font-size:13px;font-weight:700;color:#1B2A4A;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .saved-item-meta{font-size:10px;color:#999;margin-top:2px}
    .saved-item-actions{display:flex;gap:6px;flex-shrink:0}
    .saved-item-btn{width:32px;height:32px;border-radius:10px;border:1px solid #e8e0d4;background:#faf8f4;display:flex;align-items:center;justify-content:center;font-size:14px;cursor:pointer;transition:all .15s}
    .saved-item-btn:hover{background:#E8716D;color:#fff;border-color:#E8716D}
    .saved-item-btn.danger:hover{background:#dc2626;border-color:#dc2626}

    /* ‚îÄ‚îÄ Ocultar botones y elementos vacios al capturar imagen ‚îÄ‚îÄ */
    #card-render.capturing button{display:none!important}
    #card-render.capturing .card-note-line:empty{display:none!important}
    #card-render.capturing [data-placeholder]:empty{display:none!important}
    #card-render.capturing #card-details-extras:empty{display:none!important}

    /* ‚îÄ‚îÄ Security overlay (welcome + PIN) ‚îÄ‚îÄ */
    #security-overlay{position:fixed;inset:0;z-index:9999;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:24px;background:linear-gradient(160deg,#1B2A4A 0%,#2C4570 35%,#E8716D 100%);transition:opacity .4s ease,visibility .4s}
    #security-overlay.hidden{opacity:0;visibility:hidden;pointer-events:none}
    .security-title{color:#fff;font-size:clamp(1.1rem,4vw,1.5rem);font-weight:700;text-align:center;max-width:320px;line-height:1.4;text-shadow:0 2px 12px rgba(0,0,0,0.2);margin-bottom:8px}
    .security-sub{color:rgba(255,255,255,0.85);font-size:13px;margin-bottom:24px}
    .security-dots{display:flex;gap:12px;justify-content:center;margin-bottom:28px}
    .security-dot{width:14px;height:14px;border-radius:50%;background:rgba(255,255,255,0.35);border:2px solid rgba(255,255,255,0.5);transition:all .2s}
    .security-dot.filled{background:#fff;border-color:#fff;box-shadow:0 0 12px rgba(255,255,255,0.5)}
    .security-err{color:#ffcccb;font-size:12px;font-weight:600;min-height:18px;margin-bottom:8px;text-align:center}
    .numpad-wrap{display:grid;grid-template-columns:repeat(3,64px);gap:10px;margin-bottom:12px}
    .numpad-btn{width:64px;height:56px;border-radius:16px;border:2px solid rgba(255,255,255,0.4);background:rgba(255,255,255,0.15);backdrop-filter:blur(8px);color:#fff;font-size:22px;font-weight:700;cursor:pointer;transition:all .15s;display:flex;align-items:center;justify-content:center}
    .numpad-btn:hover{background:rgba(255,255,255,0.3);border-color:rgba(255,255,255,0.6);transform:scale(1.03)}
    .numpad-btn:active{transform:scale(0.97)}
    .numpad-btn.del{font-size:14px;font-weight:600}
    @media(max-width:400px){.numpad-wrap{grid-template-columns:repeat(3,56px);gap:8px}.numpad-btn{width:56px;height:50px;font-size:20px}}
  </style>
</head>
<body class="bg-cream-100 min-h-screen">

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SECURITY OVERLAY (welcome + PIN) ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="security-overlay">
  <p class="security-title">Bienvenido al mundo de Mich Murrieta Viajes</p>
  <p class="security-sub">Ingresa el c√≥digo de acceso</p>
  <div class="security-dots" id="security-dots">
    <span class="security-dot" data-i="0"></span>
    <span class="security-dot" data-i="1"></span>
    <span class="security-dot" data-i="2"></span>
    <span class="security-dot" data-i="3"></span>
  </div>
  <p class="security-err" id="security-err" aria-live="polite"></p>
  <div class="numpad-wrap">
    <button type="button" class="numpad-btn" data-n="1">1</button>
    <button type="button" class="numpad-btn" data-n="2">2</button>
    <button type="button" class="numpad-btn" data-n="3">3</button>
    <button type="button" class="numpad-btn" data-n="4">4</button>
    <button type="button" class="numpad-btn" data-n="5">5</button>
    <button type="button" class="numpad-btn" data-n="6">6</button>
    <button type="button" class="numpad-btn" data-n="7">7</button>
    <button type="button" class="numpad-btn" data-n="8">8</button>
    <button type="button" class="numpad-btn" data-n="9">9</button>
    <button type="button" class="numpad-btn del" id="numpad-del">‚å´</button>
    <button type="button" class="numpad-btn" data-n="0">0</button>
    <button type="button" class="numpad-btn" id="numpad-ok">OK</button>
  </div>
</div>
<script>
(function(){
  var PIN = '2004'; // C√≥digo de acceso num√©rico (solo 2004 es v√°lido)
  var SECRET = 'michUnlocked';
  var overlay = document.getElementById('security-overlay');
  var dots = document.getElementById('security-dots');
  var errEl = document.getElementById('security-err');
  var input = '';

  var frasesSatira = [
    'C√≥digo incorrecto. ¬øSeguro que eres del equipo de Mich Murrieta Viajes? Porque este no es.',
    'Nope. Ese no es. Intenta recordar‚Ä¶ o preguntarle a Mich, que ella s√≠ sabe.',
    'Ese c√≥digo no abre nada. Ni la puerta de tu casa. Prueba otro.',
    'Incorrecto. Aqu√≠ no entran c√≥digos de la suegra ni de la loter√≠a.',
    'Error. El sistema detecta que no sabes el c√≥digo. Lo sentimos por ti.',
    'C√≥digo equivocado. La pr√≥xima ser√° la vencida‚Ä¶ o no. Qui√©n sabe.',
    'Nada. Sigue intentando; la paciencia es clave en los viajes. Y en los c√≥digos.',
    'Incorrecto. Este no es el PIN del cajero autom√°tico. Busca otro.',
    'Ese n√∫mero no est√° en la lista de destinos. Ni en la de c√≥digos v√°lidos. Otro.',
    'C√≥digo err√≥neo. Ni con mapa, br√∫jula y GPS lo vas a adivinar as√≠.'
  ];

  function updateDots(){
    var children = dots.querySelectorAll('.security-dot');
    children.forEach(function(dot, i){ dot.classList.toggle('filled', i < input.length); });
  }
  function clearError(){ errEl.textContent = ''; }
  function showError(msg){ errEl.textContent = msg; }

  function fraseAleatoria(){
    return frasesSatira[Math.floor(Math.random() * frasesSatira.length)];
  }

  function unlock(){
    try { sessionStorage.setItem(SECRET, '1'); } catch(e){}
    overlay.classList.add('hidden');
  }

  function checkPin(){
    if (input.length !== 4) return;
    if (input === PIN) {
      clearError();
      unlock();
    } else {
      showError(fraseAleatoria());
      input = '';
      updateDots();
      setTimeout(clearError, 6000);
    }
  }

  if (sessionStorage.getItem(SECRET) === '1') {
    overlay.classList.add('hidden');
    return;
  }

  document.querySelectorAll('.numpad-btn[data-n]').forEach(function(btn){
    btn.addEventListener('click', function(){
      if (input.length >= 4) return;
      input += this.getAttribute('data-n');
      updateDots();
      clearError();
      if (input.length === 4) checkPin();
    });
  });
  document.getElementById('numpad-del').addEventListener('click', function(){
    input = input.slice(0, -1);
    updateDots();
    clearError();
  });
  document.getElementById('numpad-ok').addEventListener('click', checkPin);
})();
</script>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê HEADER ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<header style="background:linear-gradient(135deg,#E8716D 0%,#D4605C 100%)" class="text-white py-4 px-5 shadow-lg sticky top-0 z-40">
  <div class="max-w-2xl mx-auto">
    <div class="flex items-center justify-between">
      <div>
        <h1 class="text-xl font-extrabold tracking-tight leading-tight">Mich Travel Tools ‚ú®</h1>
        <p class="text-[11px] opacity-80 font-light mt-0.5">Cotizaciones e itinerarios personalizados</p>
      </div>
      <div class="w-11 h-11 bg-white/20 rounded-2xl flex items-center justify-center text-xl backdrop-blur-sm">üè∞</div>
    </div>
    <div class="main-tabs">
      <button onclick="switchMainTab('cotizador')" id="mtab-cotizador" class="main-tab active">üè∑ Cotizador</button>
      <button onclick="switchMainTab('itinerario')" id="mtab-itinerario" class="main-tab">üìã Itinerario</button>
    </div>
  </div>
</header>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê TAB: COTIZADOR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="tab-cotizador-content">
<main class="max-w-2xl mx-auto px-4 py-6 pb-32">

  <!-- Destination Selector -->
  <div class="s-card">
    <label class="fi-label">‚úàÔ∏è Destino</label>
    <select id="destino" class="fi-select text-base font-semibold" onchange="onDestinoChange()">
      <option value="">‚Äî Selecciona un destino ‚Äî</option>
      <option value="orlando">üè∞ Disney World ¬∑ Orlando</option>
      <option value="universal">üé¢ Universal Studios ¬∑ Orlando</option>
      <option value="california">üé° Disneyland ¬∑ California</option>
      <option value="hollywood">üé¨ Universal Studios ¬∑ Hollywood</option>
      <option value="paris">üóº Disneyland ¬∑ Paris</option>
      <option value="crucero-disney">üö¢ Crucero Disney</option>
      <option value="crucero-otros">üõ≥ Crucero Otras Navieras</option>
      <option value="nickelodeon">üßΩ Nickelodeon Resort</option>
      <option value="xcaret">üå¥ Xcaret</option>
    </select>
    <div id="dest-image-preview" class="mt-3 rounded-2xl overflow-hidden" style="display:none">
      <img id="dest-image" src="" alt="" style="width:100%;height:150px;object-fit:cover" onerror="this.parentElement.style.display='none'">
    </div>

    <!-- Viaje Combinado Toggle -->
    <div id="combo-toggle-wrap" class="mt-4" style="display:none">
      <label class="toggle-wrap" for="viaje-combinado">
        <input type="checkbox" id="viaje-combinado" onchange="onCombinadoChange()">
        <div class="toggle-track"></div>
        <span class="toggle-text">üîÄ Viaje Combinado (ej. Disney + Universal, Parque + Crucero)</span>
      </label>
    </div>

    <!-- Second destination selector (for combined trips) -->
    <div id="combo-dest2-wrap" class="mt-3" style="display:none">
      <label class="fi-label">‚úàÔ∏è Segundo destino</label>
      <select id="destino-2" class="fi-select text-base font-semibold" onchange="onDestino2Change()">
        <option value="">‚Äî Selecciona segundo destino ‚Äî</option>
      </select>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê FORM ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="form-container" style="display:none">

    <!-- Client -->
    <div class="s-card">
      <h2>üë§ Datos del cliente</h2>
      <input id="nombre" type="text" placeholder="Nombre del cliente" class="fi-input">
    </div>

    <!-- Travelers -->
    <div class="s-card">
      <h2>üë• Viajeros</h2>
      <div class="grid grid-cols-2 gap-3 mb-4">
        <div><label class="fi-label">Adultos</label><input id="adultos" type="number" min="1" value="2" class="fi-input"></div>
        <div><label class="fi-label" id="label-habitaciones">Habitaciones</label><input id="habitaciones" type="number" min="1" value="1" class="fi-input" onchange="updateGroupReservations()" oninput="updateGroupReservations()"></div>
      </div>
      <p class="text-[11px] font-semibold text-gray-400 mb-2 uppercase tracking-wide">Menores de edad</p>
      <div class="grid grid-cols-3 gap-3">
        <div><label class="text-[11px] text-gray-400">0-2 a√±os</label><input id="menores02" type="number" min="0" value="0" class="fi-input"></div>
        <div><label class="text-[11px] text-gray-400">3-9 a√±os</label><input id="menores39" type="number" min="0" value="0" class="fi-input"></div>
        <div><label class="text-[11px] text-gray-400">10-17 a√±os</label><input id="menores1017" type="number" min="0" value="0" class="fi-input"></div>
      </div>
    </div>

    <!-- Dates -->
    <div class="s-card">
      <h2>üìÖ Fechas</h2>
      <div class="grid grid-cols-2 gap-3">
        <div><label class="fi-label" id="label-checkin">Check in</label><input id="checkin" type="date" class="fi-input" onchange="updateNightsDisplay()"></div>
        <div><label class="fi-label" id="label-checkout">Check out</label><input id="checkout" type="date" class="fi-input" onchange="updateNightsDisplay()"></div>
      </div>
      <div id="nights-display" style="display:none;margin-top:8px;text-align:center;font-size:13px;font-weight:600;color:#E8716D;background:#FFF1F0;border-radius:10px;padding:8px 12px"></div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê DISNEY WORLD ORLANDO ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="campos-orlando" class="dest-section">
      <div class="s-card">
        <h2>üè∞ Detalles Disney World</h2>
        <label class="fi-label">Hotel / Hospedaje</label>
        <select id="orl-hotel" class="fi-select mb-2" onchange="showHotelPreview('orl')">
          <option value="">‚Äî Selecciona un hotel ‚Äî</option>
          <optgroup label="‚≠ê Value Resorts">
            <option>Disney's All-Star Movies Resort</option>
            <option>Disney's All-Star Music Resort</option>
            <option>Disney's All-Star Sports Resort</option>
            <option>Disney's Art of Animation Resort</option>
            <option>Disney's Pop Century Resort</option>
          </optgroup>
          <optgroup label="‚≠ê‚≠ê Moderate Resorts">
            <option>Disney's Caribbean Beach Resort</option>
            <option>Disney's Coronado Springs Resort</option>
            <option>Disney's Port Orleans - French Quarter</option>
            <option>Disney's Port Orleans - Riverside</option>
            <option>Disney's Fort Wilderness Cabins</option>
          </optgroup>
          <optgroup label="‚≠ê‚≠ê‚≠ê Deluxe Resorts">
            <option>Disney's Grand Floridian Resort &amp; Spa</option>
            <option>Disney's Contemporary Resort</option>
            <option>Disney's Polynesian Village Resort</option>
            <option>Disney's Animal Kingdom Lodge</option>
            <option>Disney's Wilderness Lodge</option>
            <option>Disney's BoardWalk Inn</option>
            <option>Disney's Beach Club Resort</option>
            <option>Disney's Yacht Club Resort</option>
            <option>Disney's Riviera Resort</option>
            <option>Disney's Old Key West Resort</option>
            <option>Disney's Saratoga Springs Resort &amp; Spa</option>
            <option>Disney's Copper Creek Villas &amp; Cabins</option>
          </optgroup>
          <optgroup label="üè® Otros">
            <option>Walt Disney World Swan</option>
            <option>Walt Disney World Dolphin</option>
            <option>Walt Disney World Swan Reserve</option>
            <option>Four Seasons Resort Orlando</option>
            <option>Signia by Hilton Bonnet Creek</option>
            <option>JW Marriott Orlando Grande Lakes</option>
            <option>Hilton Orlando Bonnet Creek</option>
          </optgroup>
        </select>
        <div id="orl-hotel-preview" class="hotel-preview"></div>

        <div class="grid grid-cols-2 gap-3 my-4">
          <div>
            <label class="fi-label">Tipo de entrada</label>
            <select id="orl-modalidad" class="fi-select">
              <option>Base Ticket (1 parque x d√≠a)</option>
              <option>Park Hopper</option>
              <option>Park Hopper Plus</option>
            </select>
          </div>
          <div><label class="fi-label">D√≠as de entradas</label><input id="orl-dias" type="number" min="1" value="4" class="fi-input"></div>
        </div>

        <!-- Dining Plan - Updated 2026 -->
        <label class="fi-label mb-2">üçΩ Plan de comidas</label>
        <select id="orl-comidas" class="fi-select mb-2" onchange="toggleComidaDetail()">
          <option value="">Sin plan de comidas</option>
          <option value="quick">Quick-Service ($60.50 USD/adulto/noche)</option>
          <option value="standard">Standard - Mesa ($98.50 USD/adulto/noche)</option>
        </select>
        <div id="orl-comidas-detail" style="display:none" class="bg-cream-100 rounded-xl p-3 mb-3 text-xs text-gray-600">
          <div id="orl-comidas-info"></div>
        </div>

        <label class="toggle-wrap mb-3" for="orl-kidsfree">
          <input type="checkbox" id="orl-kidsfree">
          <div class="toggle-track"></div>
          <span class="toggle-text">üéâ Kids Eat Free 2026 (ni√±os 3-9 con plan de adulto)</span>
        </label>

        <label class="toggle-wrap" for="orl-memory">
          <input type="checkbox" id="orl-memory">
          <div class="toggle-track"></div>
          <span class="toggle-text">üì∏ Ofrecer Memory Maker ($185 USD)</span>
        </label>
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê UNIVERSAL STUDIOS ORLANDO - Updated 2026 ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="campos-universal" class="dest-section">
      <div class="s-card">
        <h2>üé¢ Detalles Universal Studios</h2>
        <label class="fi-label">Hotel / Hospedaje</label>
        <select id="uni-hotel" class="fi-select mb-2" onchange="showHotelPreview('uni')">
          <option value="">‚Äî Selecciona un hotel ‚Äî</option>
          <optgroup label="‚≠ê Value">
            <option>Universal's Endless Summer - Surfside Inn</option>
            <option>Universal's Endless Summer - Dockside Inn</option>
          </optgroup>
          <optgroup label="‚≠ê‚≠ê Prime Value">
            <option>Universal's Cabana Bay Beach Resort</option>
            <option>Universal's Aventura Hotel</option>
            <option>Universal Stella Nova Resort</option>
            <option>Universal Terra Luna Resort</option>
          </optgroup>
          <optgroup label="‚≠ê‚≠ê‚≠ê Preferred">
            <option>Loews Sapphire Falls Resort</option>
            <option>Loews Royal Pacific Resort</option>
            <option>Hard Rock Hotel Orlando</option>
            <option>Loews Portofino Bay Hotel</option>
            <option>Universal's Grand Helios Hotel</option>
          </optgroup>
        </select>
        <div id="uni-hotel-preview" class="hotel-preview"></div>

        <div class="grid grid-cols-2 gap-3 my-4">
          <div>
            <label class="fi-label">Tipo de ticket (2026)</label>
            <select id="uni-modalidad" class="fi-select" onchange="updateUniDesc()">
              <option value="3base">3-Day Base (1 parque/d√≠a)</option>
              <option value="3ptp" selected>3-Day Park-to-Park</option>
              <option value="4ptp">4-Day Park-to-Park</option>
              <option value="5ptp">5-Day Park-to-Park</option>
            </select>
          </div>
          <div><label class="fi-label">D√≠as</label><input id="uni-dias" type="number" min="3" value="3" class="fi-input"></div>
        </div>
        <div id="uni-desc" class="bg-cream-100 rounded-xl p-3 mb-3 text-xs text-gray-600"></div>

        <label class="toggle-wrap" for="uni-volcano">
          <input type="checkbox" id="uni-volcano">
          <div class="toggle-track"></div>
          <span class="toggle-text">üåã Agregar Volcano Bay</span>
        </label>
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê DISNEYLAND CALIFORNIA - Updated ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="campos-california" class="dest-section">
      <div class="s-card">
        <h2>üé° Detalles Disneyland California</h2>
        <label class="fi-label">Hotel / Hospedaje</label>
        <select id="cal-hotel" class="fi-select mb-2" onchange="showHotelPreview('cal')">
          <option value="">‚Äî Selecciona un hotel ‚Äî</option>
          <optgroup label="üè∞ Hoteles Disney">
            <option>Disneyland Hotel</option>
            <option>Disney's Grand Californian Hotel &amp; Spa</option>
            <option>Pixar Place Hotel</option>
          </optgroup>
          <optgroup label="üè® Good Neighbor Hotels">
            <option>JW Marriott Anaheim Resort</option>
            <option>Hyatt Regency Orange County</option>
            <option>Courtyard by Marriott Anaheim</option>
            <option>Howard Johnson by Wyndham Anaheim</option>
            <option>Best Western Plus Park Place Inn</option>
            <option>Hilton Anaheim</option>
            <option>Residence Inn Anaheim Resort</option>
            <option>SpringHill Suites Anaheim</option>
            <option>Fairfield Inn Anaheim Resort</option>
            <option>Hampton Inn Anaheim</option>
          </optgroup>
        </select>
        <div id="cal-hotel-preview" class="hotel-preview"></div>

        <div class="grid grid-cols-2 gap-3 my-4">
          <div>
            <label class="fi-label">Tipo de entrada</label>
            <select id="cal-ticket" class="fi-select">
              <option>1 parque por d√≠a</option>
              <option>Park Hopper (ambos parques)</option>
            </select>
          </div>
          <div><label class="fi-label">D√≠as de entradas</label><input id="cal-dias" type="number" min="1" value="2" class="fi-input"></div>
        </div>

        <label class="fi-label mb-2">‚ö° Lightning Lane (opcional)</label>
        <select id="cal-lightning" class="fi-select mb-3">
          <option value="">Sin Lightning Lane</option>
          <option value="multi">Lightning Lane Multi Pass (desde $34/d√≠a)</option>
          <option value="single">Lightning Lane Single Pass (atracciones individuales)</option>
          <option value="premier">Lightning Lane Premier Pass (todas las atracciones)</option>
        </select>

        <label class="toggle-wrap" for="cal-starwars">
          <input type="checkbox" id="cal-starwars">
          <div class="toggle-track"></div>
          <span class="toggle-text">ü™ê Incluir nota Star Wars Nite</span>
        </label>
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê UNIVERSAL STUDIOS HOLLYWOOD ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="campos-hollywood" class="dest-section">
      <div class="s-card">
        <h2>üé¨ Detalles Universal Studios Hollywood</h2>
        <label class="fi-label">Hotel / Hospedaje</label>
        <select id="hwd-hotel" class="fi-select mb-2" onchange="showHotelPreview('hwd')">
          <option value="">‚Äî Selecciona un hotel ‚Äî</option>
          <optgroup label="üè® Hoteles cercanos">
            <option>Hilton Los Angeles/Universal City</option>
            <option>Sheraton Universal Hotel</option>
            <option>Marriott Burbank Airport</option>
            <option>Hotel Amarano Burbank</option>
          </optgroup>
          <optgroup label="‚≠ê Hoteles Premium">
            <option>The Garland</option>
            <option>Kimpton Everly Hotel</option>
            <option>W Hollywood</option>
          </optgroup>
        </select>
        <div id="hwd-hotel-preview" class="hotel-preview"></div>

        <div class="grid grid-cols-2 gap-3 my-4">
          <div>
            <label class="fi-label">Tipo de entrada</label>
            <select id="hwd-ticket" class="fi-select">
              <option value="general">General Admission (1 d√≠a)</option>
              <option value="express">Universal Express (skip-the-line 1x)</option>
              <option value="express-unl">Universal Express Unlimited</option>
            </select>
          </div>
          <div><label class="fi-label">D√≠as de entradas</label><input id="hwd-dias" type="number" min="1" value="1" class="fi-input"></div>
        </div>

        <label class="toggle-wrap mb-3" for="hwd-vip">
          <input type="checkbox" id="hwd-vip">
          <div class="toggle-track"></div>
          <span class="toggle-text">üåü VIP Experience</span>
        </label>

        <label class="toggle-wrap" for="hwd-nintendo">
          <input type="checkbox" id="hwd-nintendo">
          <div class="toggle-track"></div>
          <span class="toggle-text">üéÆ Super Nintendo World (reserva incluida)</span>
        </label>
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê DISNEYLAND PARIS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="campos-paris" class="dest-section">
      <div class="s-card">
        <h2>üóº Detalles Disneyland Paris</h2>
        <label class="fi-label">Hotel / Hospedaje</label>
        <select id="par-hotel" class="fi-select mb-2" onchange="showHotelPreview('par')">
          <option value="">‚Äî Selecciona un hotel ‚Äî</option>
          <optgroup label="‚≠ê‚≠ê‚≠ê Deluxe"><option>Disneyland Hotel</option><option>Disney's Hotel New York ‚Äì The Art of Marvel</option></optgroup>
          <optgroup label="‚≠ê‚≠ê Premium"><option>Disney Newport Bay Club</option><option>Disney Sequoia Lodge</option></optgroup>
          <optgroup label="‚≠ê Est√°ndar"><option>Disney Hotel Cheyenne</option><option>Disney Hotel Santa Fe</option></optgroup>
          <optgroup label="üèï Otros"><option>Disney's Davy Crockett Ranch</option><option>Explorers Hotel</option><option>Disney Hotel l'Etoile</option><option>Villages Nature Paris</option></optgroup>
        </select>
        <div id="par-hotel-preview" class="hotel-preview"></div>
        <p class="text-[11px] text-gray-400 italic mt-3">* Entradas por toda la estancia y desayuno se agregan autom√°ticamente</p>
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê CRUCERO DISNEY ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="campos-crucero-disney" class="dest-section">
      <div class="s-card">
        <h2>üö¢ Detalles Crucero Disney</h2>
        <label class="fi-label">Barco</label>
        <select id="crd-barco" class="fi-select mb-2" onchange="showShipPreview()">
          <option>Disney Magic</option><option>Disney Wonder</option><option>Disney Dream</option>
          <option>Disney Fantasy</option><option>Disney Wish</option><option>Disney Treasure</option>
        </select>
        <div id="crd-ship-preview" class="hotel-preview mb-4"></div>
        <label class="fi-label">Itinerario</label>
        <div id="crd-itinerario-container" class="mb-2"></div>
        <button type="button" onclick="addItineraryDay('crd')" class="btn-link"><span class="text-lg leading-none">+</span> Agregar d√≠a</button>
        <div class="grid grid-cols-2 gap-3 my-4">
          <div><label class="fi-label">Tipo de camarote</label>
            <select id="crd-camarote" class="fi-select"><option>Interior</option><option>Vista al mar</option><option>Balc√≥n</option><option>Suite</option></select>
          </div>
          <div><label class="fi-label">Camarotes</label><input id="crd-camarotes" type="number" min="1" value="1" class="fi-input"></div>
        </div>
        <label class="fi-label">Promoci√≥n (opcional)</label>
        <input id="crd-promo" type="text" placeholder="Ej: 20% DE DESCUENTO + $250 USD DE CR√âDITO" class="fi-input">
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê CRUCERO OTRAS NAVIERAS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="campos-crucero-otros" class="dest-section">
      <div class="s-card">
        <h2>üõ≥ Detalles Crucero</h2>
        <label class="fi-label">Naviera / Barco</label>
        <input id="cro-barco" type="text" placeholder="Ej: Royal Caribbean - Icon of the Seas" class="fi-input mb-3">
        <label class="fi-label">Itinerario</label>
        <div id="cro-itinerario-container" class="mb-2"></div>
        <button type="button" onclick="addItineraryDay('cro')" class="btn-link"><span class="text-lg leading-none">+</span> Agregar d√≠a</button>
        <label class="fi-label mt-4">Grupos de precios</label>
        <div id="cro-precios-container" class="mb-2"></div>
        <button type="button" onclick="addPriceGroup()" class="btn-link"><span class="text-lg leading-none">+</span> Agregar grupo de precios</button>
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê NICKELODEON ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="campos-nickelodeon" class="dest-section">
      <div class="s-card">
        <h2>üßΩ Nickelodeon Resort</h2>
        <div class="bg-cream-100 rounded-xl p-4 text-sm text-gray-600">
          <p class="font-semibold text-navy-600 mb-1">üè® Nickelodeon Resort ¬∑ Riviera Maya</p>
          <p class="text-xs">‚úÖ TODO INCLUIDO ¬∑ Las inclusiones se agregan autom√°ticamente</p>
        </div>
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê XCARET ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="campos-xcaret" class="dest-section">
      <div class="s-card">
        <h2>üå¥ Detalles Xcaret</h2>
        <label class="fi-label">Hotel</label>
        <select id="xca-hotel" class="fi-select mb-2" onchange="showHotelPreview('xca')">
          <option>Hotel Xcaret M√©xico</option><option>Hotel Xcaret Arte</option><option>La Casa de la Playa</option><option>Fiesta Americana Condesa Canc√∫n</option><option>Dreams Playa Mujeres</option>
        </select>
        <div id="xca-hotel-preview" class="hotel-preview"></div>
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê PRICE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="price-section" class="s-card">
      <h2>üí∞ Precio</h2>

      <!-- Combined trip pricing (hidden by default) -->
      <div id="combo-pricing" style="display:none">
        <label class="fi-label" id="combo-price1-label">Precio Tramo 1 USD</label>
        <div class="relative mb-3">
          <span class="absolute left-4 top-1/2 -translate-y-1/2 text-coral-400 font-bold text-lg">$</span>
          <input id="precio-tramo1" type="text" placeholder="1,500.00" class="fi-input pl-10 text-base font-bold" style="letter-spacing:0.02em" oninput="updateComboTotal()">
          <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 text-xs font-semibold">USD</span>
        </div>
        <label class="fi-label" id="combo-price2-label">Precio Tramo 2 USD</label>
        <div class="relative mb-3">
          <span class="absolute left-4 top-1/2 -translate-y-1/2 text-coral-400 font-bold text-lg">$</span>
          <input id="precio-tramo2" type="text" placeholder="1,200.00" class="fi-input pl-10 text-base font-bold" style="letter-spacing:0.02em" oninput="updateComboTotal()">
          <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 text-xs font-semibold">USD</span>
        </div>
      </div>

      <label class="fi-label">Precio total USD</label>
      <div class="relative mb-3">
        <span class="absolute left-4 top-1/2 -translate-y-1/2 text-coral-400 font-bold text-lg">$</span>
        <input id="precio" type="text" placeholder="2,717.38" class="fi-input pl-10 text-lg font-bold" style="letter-spacing:0.02em">
        <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 text-xs font-semibold">USD</span>
      </div>
      <!-- Enhanced Notes Section -->
      <div class="mt-4" style="border-top:1px solid #f0e8dc;padding-top:16px">
        <h2 style="font-size:14px;font-weight:700;color:#1B2A4A;margin-bottom:12px">üìã Notas importantes</h2>
        <div class="grid grid-cols-1 gap-2 mb-3">
          <label class="toggle-wrap" for="nota-visa">
            <input type="checkbox" id="nota-visa" class="nota-check">
            <div class="toggle-track"></div>
            <span class="toggle-text">üõÇ Visa americana vigente requerida</span>
          </label>
          <label class="toggle-wrap" for="nota-pasaporte">
            <input type="checkbox" id="nota-pasaporte" class="nota-check">
            <div class="toggle-track"></div>
            <span class="toggle-text">üìò Se requiere pasaporte vigente</span>
          </label>
          <label class="toggle-wrap" for="nota-seguro">
            <input type="checkbox" id="nota-seguro" class="nota-check">
            <div class="toggle-track"></div>
            <span class="toggle-text">üõ° Seguro de viaje recomendado</span>
          </label>
          <label class="toggle-wrap" for="nota-tipocambio">
            <input type="checkbox" id="nota-tipocambio" class="nota-check">
            <div class="toggle-track"></div>
            <span class="toggle-text">üí± Tipo de cambio sujeto a variaciones</span>
          </label>
          <label class="toggle-wrap" for="nota-disponibilidad">
            <input type="checkbox" id="nota-disponibilidad" class="nota-check">
            <div class="toggle-track"></div>
            <span class="toggle-text">üìå Precios sujetos a disponibilidad</span>
          </label>
          <label class="toggle-wrap" for="nota-transporte">
            <input type="checkbox" id="nota-transporte" class="nota-check">
            <div class="toggle-track"></div>
            <span class="toggle-text">üöó Transportaci√≥n aeropuerto-hotel no incluida</span>
          </label>
          <label class="toggle-wrap" for="nota-vuelos">
            <input type="checkbox" id="nota-vuelos" class="nota-check">
            <div class="toggle-track"></div>
            <span class="toggle-text">‚úàÔ∏è Vuelos no incluidos en la cotizaci√≥n</span>
          </label>
        </div>
      </div>

      <!-- Special Park Options -->
      <div id="special-park-options" style="display:none;border-top:1px solid #f0e8dc;padding-top:16px;margin-top:8px">
        <h2 style="font-size:14px;font-weight:700;color:#1B2A4A;margin-bottom:12px">üé™ Opciones especiales</h2>
        <div id="special-options-orlando" class="special-opts" style="display:none">
          <label class="toggle-wrap mb-2" for="sp-orl-halloween">
            <input type="checkbox" id="sp-orl-halloween" class="special-check">
            <div class="toggle-track"></div>
            <span class="toggle-text">üéÉ Mickey's Not-So-Scary Halloween Party</span>
          </label>
          <label class="toggle-wrap mb-2" for="sp-orl-christmas">
            <input type="checkbox" id="sp-orl-christmas" class="special-check">
            <div class="toggle-track"></div>
            <span class="toggle-text">üéÑ Mickey's Very Merry Christmas Party</span>
          </label>
          <label class="toggle-wrap mb-2" for="sp-orl-epcot">
            <input type="checkbox" id="sp-orl-epcot" class="special-check">
            <div class="toggle-track"></div>
            <span class="toggle-text">üåé EPCOT Festival (Food & Wine / Flower & Garden)</span>
          </label>
          <label class="toggle-wrap mb-2" for="sp-orl-dining">
            <input type="checkbox" id="sp-orl-dining" class="special-check">
            <div class="toggle-track"></div>
            <span class="toggle-text">üçΩ Reservaciones de restaurantes especiales</span>
          </label>
        </div>
        <div id="special-options-universal" class="special-opts" style="display:none">
          <label class="toggle-wrap mb-2" for="sp-uni-hhn">
            <input type="checkbox" id="sp-uni-hhn" class="special-check">
            <div class="toggle-track"></div>
            <span class="toggle-text">üëª Halloween Horror Nights</span>
          </label>
          <label class="toggle-wrap mb-2" for="sp-uni-early">
            <input type="checkbox" id="sp-uni-early" class="special-check">
            <div class="toggle-track"></div>
            <span class="toggle-text">üåÖ Early Park Admission</span>
          </label>
          <label class="toggle-wrap mb-2" for="sp-uni-express">
            <input type="checkbox" id="sp-uni-express" class="special-check">
            <div class="toggle-track"></div>
            <span class="toggle-text">‚ö° Universal Express Pass</span>
          </label>
        </div>
        <div id="special-options-california" class="special-opts" style="display:none">
          <label class="toggle-wrap mb-2" for="sp-cal-oogie">
            <input type="checkbox" id="sp-cal-oogie" class="special-check">
            <div class="toggle-track"></div>
            <span class="toggle-text">üéÉ Oogie Boogie Bash</span>
          </label>
          <label class="toggle-wrap mb-2" for="sp-cal-worldcolor">
            <input type="checkbox" id="sp-cal-worldcolor" class="special-check">
            <div class="toggle-track"></div>
            <span class="toggle-text">üåà World of Color Dining Package</span>
          </label>
          <label class="toggle-wrap mb-2" for="sp-cal-fantasmic">
            <input type="checkbox" id="sp-cal-fantasmic" class="special-check">
            <div class="toggle-track"></div>
            <span class="toggle-text">‚ú® Fantasmic! Dining Package</span>
          </label>
        </div>
        <div id="special-options-hollywood" class="special-opts" style="display:none">
          <label class="toggle-wrap mb-2" for="sp-hwd-hhn">
            <input type="checkbox" id="sp-hwd-hhn" class="special-check">
            <div class="toggle-track"></div>
            <span class="toggle-text">üëª Halloween Horror Nights Hollywood</span>
          </label>
          <label class="toggle-wrap mb-2" for="sp-hwd-studio">
            <input type="checkbox" id="sp-hwd-studio" class="special-check">
            <div class="toggle-track"></div>
            <span class="toggle-text">üé• Studio Tour VIP</span>
          </label>
        </div>
      </div>

      <label class="fi-label mt-4">Notas adicionales personalizadas (opcional)</label>
      <textarea id="notas" rows="2" placeholder="Informaci√≥n extra..." class="fi-input"></textarea>
    </div>

    <!-- Group Reservations (shown when habitaciones > 1) -->
    <div id="group-reservations" class="s-card" style="display:none">
      <h2>üë• Reservaciones del grupo</h2>
      <p class="text-[11px] text-gray-400 mb-3">Detalla cada habitaci√≥n para generar un formato unificado</p>
      <div id="group-res-list"></div>
    </div>

    <!-- Generate -->
    <button onclick="generarMensaje()" class="btn-generate mb-8">‚ú® Generar Cotizaci√≥n</button>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê PREVIEW ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="preview-section" style="display:none">
      <div class="tab-bar mb-4">
        <button onclick="switchTab('texto')" id="tab-texto" class="tab-btn active">üìã Texto</button>
        <button onclick="switchTab('tarjeta')" id="tab-tarjeta" class="tab-btn">üé® Tarjeta</button>
      </div>

      <!-- Text Preview (WhatsApp style, editable) -->
      <div id="panel-texto">
        <div class="s-card !p-0 overflow-hidden">
          <div class="bg-[#ECE5DD] p-2.5">
            <p class="text-[11px] text-center text-gray-500 font-medium">Vista previa ¬∑ Toca para editar</p>
          </div>
          <div class="bg-[#ECE5DD] px-3 pb-4">
            <div id="wa-preview" class="wa-bubble" contenteditable="true"></div>
          </div>
        </div>
        <p class="text-[11px] text-gray-400 text-center mt-2 mb-3">Edita directamente el texto antes de copiar</p>
        <button onclick="copiarTexto()" class="btn-action">üìã Copiar texto para WhatsApp</button>
      </div>

      <!-- Card Preview (editable) -->
      <div id="panel-tarjeta" style="display:none">
        <p class="text-[11px] text-gray-400 text-center mb-3">Toca los campos subrayados para editar antes de descargar</p>
        <div class="flex justify-center mb-4"><div id="card-wrapper" class="inline-block"><div id="card-render"></div></div></div>
        <button onclick="descargarImagen()" class="btn-action">üì∑ Descargar como imagen</button>
      </div>
    </div>

  </div><!-- /form-container -->
</main>

</div><!-- /tab-cotizador-content -->

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê TAB: ITINERARIO ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="tab-itinerario-content" style="display:none">
<main class="max-w-2xl mx-auto px-4 py-6 pb-32">

  <!-- Saved Itineraries -->
  <div class="s-card" id="saved-section">
    <h2>üíæ Mis itinerarios guardados</h2>
    <div id="saved-list"></div>
    <div id="saved-empty" class="text-center py-4">
      <p class="text-gray-400 text-sm">No hay itinerarios guardados a√∫n</p>
      <p class="text-gray-300 text-xs mt-1">Crea uno desde una plantilla y gu√°rdalo</p>
    </div>
    <div class="flex gap-2 mt-3">
      <button onclick="importItJSON()" class="btn-link" style="flex:1;justify-content:center;font-size:12px">üì• Importar JSON</button>
      <button onclick="exportAllJSON()" class="btn-link" style="flex:1;justify-content:center;font-size:12px">üì§ Exportar todos</button>
    </div>
    <input type="file" id="import-file" accept=".json" style="display:none" onchange="handleImport(event)">
  </div>

  <!-- Template Selector -->
  <div class="s-card">
    <h2>üìã Crear desde plantilla</h2>
    <select id="it-template" class="fi-select text-base font-semibold" onchange="loadTemplate()">
      <option value="">‚Äî Selecciona una plantilla ‚Äî</option>
      <optgroup label="üè∞ Disney World ¬∑ Orlando">
        <option value="disney-world-3">3 d√≠as de parques (5 noches)</option>
        <option value="disney-world-5">5 d√≠as de parques (7 noches)</option>
        <option value="disney-world-7">7 d√≠as completos (9 noches)</option>
        <option value="disney-adults">Solo adultos ¬∑ Fine dining (7 noches)</option>
      </optgroup>
      <optgroup label="üé° Disneyland ¬∑ California">
        <option value="disneyland-cal">3 d√≠as en Anaheim (5 noches)</option>
        <option value="california-combo">California completo + Universal Hollywood (7 noches)</option>
      </optgroup>
      <optgroup label="üö¢ Cruceros Disney">
        <option value="crucero-disney-3">3 noches ¬∑ Bahamas express</option>
        <option value="crucero-disney-4">4 noches ¬∑ Bahamas</option>
        <option value="crucero-disney-7">7 noches ¬∑ Caribe</option>
        <option value="crucero-parks">Crucero + Disney World combo (12 noches)</option>
      </optgroup>
      <optgroup label="üé¢ Universal ¬∑ Orlando">
        <option value="universal-3">3 d√≠as ¬∑ Epic Universe (5 noches)</option>
      </optgroup>
      <optgroup label="üè∞+üé¢ Combos">
        <option value="disney-uni-combo">Disney + Universal ¬∑ Orlando completo (10 noches)</option>
      </optgroup>
      <optgroup label="üå¥ M√©xico">
        <option value="nickelodeon">Nickelodeon Resort ¬∑ Riviera Maya (5 noches)</option>
        <option value="xcaret">Xcaret ¬∑ Todo incluido (5 noches)</option>
      </optgroup>
      <optgroup label="üóº Europa">
        <option value="paris">Disneyland Paris (5 noches)</option>
      </optgroup>
      <optgroup label="üìù Otro">
        <option value="blank">Itinerario en blanco</option>
      </optgroup>
    </select>
  </div>

  <!-- Form (hidden until template selected) -->
  <div id="it-form" style="display:none">

    <!-- Trip Info -->
    <div class="s-card">
      <h2>‚úàÔ∏è Informaci√≥n del viaje</h2>
      <label class="fi-label">T√≠tulo del viaje</label>
      <input id="it-title" type="text" placeholder="Ej: Aventura M√°gica en Disney World" class="fi-input mb-3">
      <label class="fi-label">Nombre del cliente / familia</label>
      <input id="it-client" type="text" placeholder="Familia Garc√≠a" class="fi-input mb-3">
      <div class="grid grid-cols-2 gap-3 mb-3">
        <div><label class="fi-label">Fecha de inicio</label><input id="it-start" type="date" class="fi-input" onchange="updateItDates()"></div>
        <div><label class="fi-label">Fecha de fin</label><input id="it-end" type="date" class="fi-input"></div>
      </div>
      <div class="grid grid-cols-2 gap-3 mb-3">
        <div><label class="fi-label">Adultos</label><input id="it-adults" type="number" min="1" value="2" class="fi-input"></div>
        <div><label class="fi-label">Menores (edades)</label><input id="it-kids" type="text" placeholder="Ej: 2 (5 y 8 a√±os)" class="fi-input"></div>
      </div>
      <label class="fi-label">Hotel / Hospedaje</label>
      <input id="it-hotel" type="text" placeholder="Disney's Art of Animation Resort" class="fi-input mb-3">
      <label class="fi-label">Imagen de portada (URL)</label>
      <input id="it-cover" type="text" placeholder="Se carga autom√°ticamente con la plantilla" class="fi-input">
    </div>

    <!-- Documents & Links -->
    <div class="s-card">
      <h2>üìé Documentos y links importantes</h2>
      <div id="it-docs-container"></div>
      <button type="button" onclick="addItDoc()" class="btn-link"><span class="text-lg leading-none">+</span> Agregar documento/link</button>
    </div>

    <!-- Days Builder -->
    <div class="s-card">
      <h2>üìÖ D√≠as del itinerario</h2>
      <p class="text-[11px] text-gray-400 mb-4">Toca cada d√≠a para expandir y editar. Puedes agregar, quitar o reordenar actividades y tips.</p>
      <div id="it-days-container"></div>
      <button type="button" onclick="addItDay()" class="btn-link mt-2"><span class="text-lg leading-none">+</span> Agregar d√≠a</button>
    </div>

    <!-- Actions -->
    <div class="grid grid-cols-2 gap-3 mb-2">
      <button onclick="generateItPreview()" class="btn-generate" style="margin:0">‚ú® Vista Previa</button>
      <button onclick="saveCurrentIt()" class="btn-generate" style="margin:0;background:linear-gradient(135deg,#059669,#047857)">üíæ Guardar</button>
    </div>
    <p class="text-[11px] text-gray-400 text-center mb-8">La vista previa es interactiva ‚Äî perfecta para compartir pantalla en videollamada</p>
  </div>

  <!-- Preview Section -->
  <div id="it-preview-section" style="display:none">
    <div class="grid grid-cols-2 gap-3 mb-4">
      <button onclick="showItForm()" class="btn-action">‚úèÔ∏è Editar itinerario</button>
      <button onclick="downloadItPDF()" class="btn-action" style="background:#1B2A4A;color:#fff;border-color:#1B2A4A">üìÑ Descargar PDF</button>
    </div>
    <div class="flex justify-center">
      <div id="it-preview-render"></div>
    </div>
    <p class="text-[11px] text-gray-400 text-center mt-4">Toca cada d√≠a para expandir/colapsar ‚Äî ideal para videollamada</p>
  </div>

</main>
</div><!-- /tab-itinerario-content -->

<div id="toast" class="toast opacity-0 pointer-events-none">Copiado ‚úÖ</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<!-- JAVASCRIPT -->
<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<script>
// ‚îÄ‚îÄ CONFIG (valores por defecto; se sobrescriben si se cargan data/*.tsv) ‚îÄ‚îÄ
let AGENT_TITLES={orlando:'Agente Disney‚ú®',universal:'Agente Universal‚ú®',california:'Agente Disney‚ú®',hollywood:'Agente Universal‚ú®',paris:'Agente Disney‚ú®','crucero-disney':'Agente Disney‚ú®','crucero-otros':'Agente de viajes',nickelodeon:'Agente de viajes',xcaret:'Agente de viajes'};

let CONDITIONS={
  orlando:'‚úÖ El paquete se aparta con $200 USD y el resto se puede ir pagando poco a poco hasta liquidarlo 1 mes antes de la fecha del check in. Cualquier modificaci√≥n o cancelaci√≥n al paquete se puede realizar antes de la fecha l√≠mite de pago.',
  universal:'‚úÖ El paquete se aparta con $50 USD x persona y el resto se puede ir pagando poco a poco hasta liquidarlo 45 d√≠as antes de la fecha del check in. Cualquier modificaci√≥n o cancelaci√≥n al paquete se puede realizar antes de la fecha l√≠mite de pago.',
  california:'‚úÖ El paquete se aparta con $200 USD y el resto se puede ir pagando poco a poco hasta liquidarlo 1 mes antes de la fecha del check in. Cualquier modificaci√≥n o cancelaci√≥n al paquete se puede realizar antes de la fecha l√≠mite de pago.',
  hollywood:'‚úÖ Los boletos se compran directamente. Precios sujetos a disponibilidad y fecha.',
  paris:'',
  'crucero-disney':'‚úÖ El apartado de cada camarote se hace realizando un pago por el 10% del total y el resto se puede ir pagando poco a poco hasta liquidarlo 3 meses antes de la fecha de embarque.\nüõÇ El cliente se debe de hacer responsable de tener todos sus papeles en tiempo y forma para poder viajar. Favor de verificar que tengan su visa americana vigente y si es el caso, cualquier otro documento necesario para entrar al pa√≠s destino.',
  'crucero-otros':'‚úÖ El apartado de cada camarote se hace realizando un pago por el 20% del total y el resto se puede ir pagando poco a poco hasta liquidarlo 3 meses antes de la fecha de embarque.\nüõÇ El cliente se debe de hacer responsable de tener todos sus papeles en tiempo y forma para poder viajar. Favor de verificar que tengan su visa americana vigente y si es el caso, cualquier otro documento necesario para entrar al pa√≠s destino.',
  nickelodeon:'Se puede apartar con $200 USD e irlo pagando poco a poco.',
  xcaret:'Se puede apartar con $200 USD e irlo pagando poco a poco.'
};
let CONDITIONES_EVENTOS={};

const INCLUSIONS_NICK=`*Tu tarifa incluye*\nüçî Alimentos\nüçπ Bebidas\nüçΩ Restaurantes tem√°ticos\nüì∏ Encuentros con personajes\nüé§ Entretenimiento todas las noches\nüéü Entradas ilimitadas al parque acu√°tico "AquaNick"\nüöó Transporte redondo del aeropuerto de Canc√∫n al hotel`;
const INCLUSIONS_XCARET=`*Tu tarifa incluye*\nüçî Alimentos\nüçπ Bebidas\nüçΩ Restaurantes\nüé§ Entretenimiento\nüéü Entradas a todos los parques de Xcaret\nüèù Actividades\nüöó Transporte redondo del aeropuerto de Canc√∫n al hotel`;
const INCLUSIONS_CRUISE=`*üåä Tu tarifa incluye:*\n\nüçΩÔ∏è Comidas ilimitadas\nRestaurantes tem√°ticos y servicio a la habitaci√≥n\nSnacks, cafeter√≠as y helado 24/7\n\nü•§Bebidas b√°sicas\nSodas, Caf√©, Jugo, T√©\n\nüé≠ Entretenimiento diario\nShows estilo Broadway\nCine a bordo (pel√≠culas Disney, Marvel, Pixar, Star Wars)\nFiestas en cubierta y fuegos artificiales\n\nüë∏ Encuentros con personajes\nPrincesas, Mickey y sus amigos, Marvel y m√°s\n\nüèä Diversi√≥n en el agua\nToboganes, piscinas para ni√±os, familias y adultos\nSplash zones y AquaDuck (en barcos selectos)\n\nüé® Clubes infantiles y juveniles\nActividades guiadas por edades (ni√±os, tweens y teens)\nPersonal capacitado y espacios m√°gicos\n\nü•Ç Zonas solo para adultos\nPiscina, jacuzzis, bares, discoteca, spa y restaurantes exclusivos\n\nüèùÔ∏è Paradas en islas privadas\nCastaway Cay o Lookout Cay at Lighthouse Point\nTodo incluido en la isla: comida, actividades y playa\n\nüí´ Magia y servicio Disney en todo momento\nAtenci√≥n de lujo, limpieza impecable y detalles encantadores`;

const CAT_TO_CSS={'Value':'cat-value','Moderate':'cat-moderate','Deluxe':'cat-deluxe','On-site':'cat-onsite','Premier':'cat-premier','Prime Value':'cat-prime','Preferred':'cat-preferred','Disney':'cat-disney','Premium':'cat-moderate','Est√°ndar':'cat-value','5 Diamantes':'cat-deluxe','Adults Only':'cat-preferred','Good Neighbor':'cat-moderate','Otros':'cat-value'};
let HOTEL_CATS={"Disney's All-Star Movies Resort":{cat:'Value',c:'cat-value'},"Disney's All-Star Music Resort":{cat:'Value',c:'cat-value'},"Disney's All-Star Sports Resort":{cat:'Value',c:'cat-value'},"Disney's Art of Animation Resort":{cat:'Value',c:'cat-value'},"Disney's Pop Century Resort":{cat:'Value',c:'cat-value'},"Disney's Caribbean Beach Resort":{cat:'Moderate',c:'cat-moderate'},"Disney's Coronado Springs Resort":{cat:'Moderate',c:'cat-moderate'},"Disney's Port Orleans - French Quarter":{cat:'Moderate',c:'cat-moderate'},"Disney's Port Orleans - Riverside":{cat:'Moderate',c:'cat-moderate'},"Disney's Fort Wilderness Cabins":{cat:'Moderate',c:'cat-moderate'},"Disney's Grand Floridian Resort & Spa":{cat:'Deluxe',c:'cat-deluxe'},"Disney's Contemporary Resort":{cat:'Deluxe',c:'cat-deluxe'},"Disney's Polynesian Village Resort":{cat:'Deluxe',c:'cat-deluxe'},"Disney's Animal Kingdom Lodge":{cat:'Deluxe',c:'cat-deluxe'},"Disney's Wilderness Lodge":{cat:'Deluxe',c:'cat-deluxe'},"Disney's BoardWalk Inn":{cat:'Deluxe',c:'cat-deluxe'},"Disney's Beach Club Resort":{cat:'Deluxe',c:'cat-deluxe'},"Disney's Yacht Club Resort":{cat:'Deluxe',c:'cat-deluxe'},"Disney's Riviera Resort":{cat:'Deluxe',c:'cat-deluxe'},"Walt Disney World Swan":{cat:'On-site',c:'cat-onsite'},"Walt Disney World Dolphin":{cat:'On-site',c:'cat-onsite'},"Four Seasons Resort Orlando":{cat:'Premier',c:'cat-premier'},"Universal's Endless Summer - Surfside Inn":{cat:'Value',c:'cat-value'},"Universal's Endless Summer - Dockside Inn":{cat:'Value',c:'cat-value'},"Universal's Cabana Bay Beach Resort":{cat:'Prime Value',c:'cat-prime'},"Universal's Aventura Hotel":{cat:'Prime Value',c:'cat-prime'},"Universal Stella Nova Resort":{cat:'Prime Value',c:'cat-prime'},"Universal Terra Luna Resort":{cat:'Prime Value',c:'cat-prime'},"Loews Sapphire Falls Resort":{cat:'Preferred',c:'cat-preferred'},"Loews Royal Pacific Resort":{cat:'Preferred',c:'cat-preferred'},"Hard Rock Hotel Orlando":{cat:'Preferred',c:'cat-preferred'},"Loews Portofino Bay Hotel":{cat:'Preferred',c:'cat-preferred'},"Universal's Grand Helios Hotel":{cat:'Preferred',c:'cat-preferred'},"Disneyland Hotel":{cat:'Disney',c:'cat-disney'},"Disney's Grand Californian Hotel & Spa":{cat:'Disney',c:'cat-disney'},"Pixar Place Hotel":{cat:'Disney',c:'cat-disney'},"Disney's Hotel New York ‚Äì The Art of Marvel":{cat:'Deluxe',c:'cat-deluxe'},"Disney Newport Bay Club":{cat:'Premium',c:'cat-moderate'},"Disney Sequoia Lodge":{cat:'Premium',c:'cat-moderate'},"Disney Hotel Cheyenne":{cat:'Est√°ndar',c:'cat-value'},"Disney Hotel Santa Fe":{cat:'Est√°ndar',c:'cat-value'},"Hotel Xcaret M√©xico":{cat:'5 Diamantes',c:'cat-deluxe'},"Hotel Xcaret Arte":{cat:'5 Diamantes',c:'cat-premier'},"La Casa de la Playa":{cat:'Adults Only',c:'cat-preferred'},"Hilton Los Angeles/Universal City":{cat:'Preferred',c:'cat-preferred'},"Sheraton Universal Hotel":{cat:'Moderate',c:'cat-moderate'},"Marriott Burbank Airport":{cat:'Moderate',c:'cat-moderate'},"Hotel Amarano Burbank":{cat:'Moderate',c:'cat-moderate'},"The Garland":{cat:'Premier',c:'cat-premier'},"Kimpton Everly Hotel":{cat:'Deluxe',c:'cat-deluxe'},"W Hollywood":{cat:'Deluxe',c:'cat-deluxe'}};
let HOTEL_IMAGES={};
let DEST_IMAGES={orlando:'img/orlando.jpg',universal:'img/universal.jpg',california:'img/california.png',hollywood:'https://images.unsplash.com/photo-1568572933382-74d440642117?w=800&h=400&fit=crop&q=80',paris:'img/paris.jpg','crucero-disney':'img/crucero-disney.jpg','crucero-otros':'img/crucero-otros.jpg',nickelodeon:'img/nickelodeon.jpg',xcaret:'img/xcaret.jpg'};
let DEST_GRADIENTS={orlando:'linear-gradient(135deg,#1a1a6e,#4b2583,#c33f91)',universal:'linear-gradient(135deg,#003366,#0066cc,#00ccff)',california:'linear-gradient(135deg,#ff6b35,#ff9a56,#ffd700)',hollywood:'linear-gradient(135deg,#1a1a2e,#16213e,#0f3460)',paris:'linear-gradient(135deg,#2d1b69,#5b3a8c,#e8716d)','crucero-disney':'linear-gradient(135deg,#001a33,#003d66,#0099cc)','crucero-otros':'linear-gradient(135deg,#1a3a4a,#2d6b7a,#4fc3c3)',nickelodeon:'linear-gradient(135deg,#ff6600,#ff9900,#33cc33)',xcaret:'linear-gradient(135deg,#004d40,#00897b,#4dd0e1)'};

const SHIP_DATA={'Disney Magic':{y:'1998',d:'El barco original ¬∑ Rutas cl√°sicas'},'Disney Wonder':{y:'1999',d:'Alaska y Caribe ¬∑ Frozen Musical'},'Disney Dream':{y:'2011',d:'AquaDuck ¬∑ Caribe y Bahamas'},'Disney Fantasy':{y:'2012',d:'AquaDuck ¬∑ Caribe occidental'},'Disney Wish':{y:'2022',d:'AquaMouse ¬∑ Gran Hall ¬∑ Lo m√°s nuevo'},'Disney Treasure':{y:'2024',d:'Aventura y exploraci√≥n ¬∑ √öltimo barco'}};

const UNI_TICKET_DESC={'3base':'Visita 1 parque por d√≠a a elegir entre Universal Studios Florida, Islands of Adventure o Epic Universe.','3ptp':'Acceso ilimitado a Universal Studios, Islands of Adventure y Epic Universe todos los d√≠as. Puedes saltar entre parques.','4ptp':'4 d√≠as de acceso ilimitado park-to-park a los 3 parques. Opci√≥n de agregar Volcano Bay.','5ptp':'5 d√≠as de acceso ilimitado park-to-park a los 3 parques incluyendo Epic Universe.'};

let itCounts={crd:0,cro:0},pgCount=0;
let HOTELES_POR_DESTINO={};

// ‚îÄ‚îÄ GOOGLE SHEET (cotizaciones: destinos, condiciones, hoteles) ‚îÄ‚îÄ
const SHEET_CONFIG={
  id:'1A7lT22FucvTIDOTQB9Xuua0rXwQxIH_MOEcgQx38mIo',
  gids:{ destinos:'0', condiciones:'1889365118', hoteles:'1598531904' }
};
const DESTINO_IDS=['orlando','universal','california','hollywood','paris','crucero-disney','crucero-otros','nickelodeon','xcaret'];

function parseCSV(text){text=(text||'').replace(/^\ufeff/,'');const rows=[];let row=[],field='',i=0,inQuotes=false,len=text.length;while(i<len){const c=text[i];if(inQuotes){if(c==='"'){if(text[i+1]==='"'){field+='"';i++;}else inQuotes=false;}else field+=c;i++;}else{if(c==='"'){inQuotes=true;i++;}else if(c===','){row.push(field.replace(/\\n/g,'\n'));field='';i++;}else if(c==='\n'||c==='\r'){row.push(field.replace(/\\n/g,'\n'));field='';if(row.length||row.some(x=>x.trim()))rows.push(row);row=[];if(c==='\r'&&text[i+1]==='\n')i++;i++;}else{field+=c;i++;}}}if(field||row.length){row.push(field.replace(/\\n/g,'\n'));rows.push(row);}const headers=(rows[0]||[]).map(h=>(h||'').trim());return rows.slice(1).map(r=>{const o={};headers.forEach((h,i)=>{o[h]=(r[i]!==undefined?r[i]:'').replace(/\\n/g,'\n').trim();});return o;});}

function parseTSV(text){const lines=text.trim().split(/\r?\n/);if(!lines.length)return[];const headers=lines[0].split('\t');return lines.slice(1).map(l=>{const vals=l.split('\t');const o={};headers.forEach((h,i)=>{o[h]=vals[i]!==undefined?vals[i].replace(/\\n/g,'\n'):''});return o});}

function normDestinoId(v){const s=(v||'').toString().trim();if(!s)return'';const n=parseInt(s,10);if(!isNaN(n)&&n>=1&&n<=DESTINO_IDS.length)return DESTINO_IDS[n-1];return s.toLowerCase().replace(/\s+/g,'-');}
function applyDestinos(rows){rows.forEach(r=>{const id=normDestinoId(r.id);if(!id)return;if(r.imagen_url)DEST_IMAGES[id]=r.imagen_url;if(r.gradiente)DEST_GRADIENTS[id]=r.gradiente;if(r.agente_titulo)AGENT_TITLES[id]=r.agente_titulo;});}
function applyCondiciones(rows){rows.forEach(r=>{const id=normDestinoId(r.destino_id);if(!id)return;CONDITIONS[id]=r.condiciones!==undefined&&r.condiciones!==''?r.condiciones:CONDITIONS[id];if(r.condiciones_eventos_especiales)CONDITIONES_EVENTOS[id]=r.condiciones_eventos_especiales;});}
function applyHoteles(rows){const byDest={};rows.forEach(r=>{const destId=normDestinoId(r.destino_id),nombre=(r.nombre_hotel||'').trim();if(!destId||!nombre)return;const cat=r.categoria||'Value',c=(r.categoria_css&&r.categoria_css.trim())?r.categoria_css.trim():(CAT_TO_CSS[cat]||'cat-value');HOTEL_CATS[nombre]={cat,c};if(r.imagen_url&&r.imagen_url.trim())HOTEL_IMAGES[nombre]=r.imagen_url.trim();if(!byDest[destId])byDest[destId]=[];byDest[destId].push({nombre,optgroup:(r.optgroup||'').trim()});});HOTELES_POR_DESTINO=byDest;const selMap={orlando:'orl-hotel',universal:'uni-hotel',california:'cal-hotel',paris:'par-hotel',xcaret:'xca-hotel'};Object.keys(selMap).forEach(destId=>{const sel=document.getElementById(selMap[destId]);if(!sel||!HOTELES_POR_DESTINO[destId])return;const list=HOTELES_POR_DESTINO[destId];if(!list.length)return;let html='<option value="">‚Äî Selecciona un hotel ‚Äî</option>',curGrp=null;list.forEach(h=>{const g=h.optgroup||'';if(g!==curGrp){if(curGrp!==null)html+='</optgroup>';curGrp=g;if(g)html+=`<optgroup label="${g.replace(/"/g,'&quot;')}">`;}html+=`<option>${(h.nombre||'').replace(/&/g,'&amp;').replace(/</g,'&lt;')}</option>`;});if(curGrp!==null)html+='</optgroup>';sel.innerHTML=html;});}

async function loadCotizacionData(){try{let destinosTxt='',condicionesTxt='',hotelesTxt='',fromSheet=false;if(SHEET_CONFIG.id){const base=`https://docs.google.com/spreadsheets/d/${SHEET_CONFIG.id}/export?format=csv&gid=`,g=SHEET_CONFIG.gids;[destinosTxt,condicionesTxt,hotelesTxt]=await Promise.all([fetch(base+g.destinos).then(r=>r.ok?r.text():''),fetch(base+g.condiciones).then(r=>r.ok?r.text():''),fetch(base+g.hoteles).then(r=>r.ok?r.text():'')]);if(destinosTxt&&condicionesTxt&&hotelesTxt)fromSheet=true;}if(!fromSheet){[destinosTxt,condicionesTxt,hotelesTxt]=await Promise.all([fetch('data/destinos.tsv').then(r=>r.ok?r.text():''),fetch('data/condiciones.tsv').then(r=>r.ok?r.text():''),fetch('data/hoteles.tsv').then(r=>r.ok?r.text():'')]);}const parse=fromSheet?parseCSV:parseTSV;if(destinosTxt){const rows=parse(destinosTxt);if(rows.length)applyDestinos(rows);}if(condicionesTxt){const rows=parse(condicionesTxt);if(rows.length)applyCondiciones(rows);}if(hotelesTxt){const rows=parse(hotelesTxt);if(rows.length)applyHoteles(rows);}}catch(e){console.warn('No se cargaron datos de cotizaciones:',e);}}

// ‚îÄ‚îÄ UTILS ‚îÄ‚îÄ
function formatDate(s){if(!s)return'';const m=['Enero','Febrero','Marzo','Abril','Mayo','Junio','Julio','Agosto','Septiembre','Octubre','Noviembre','Diciembre'];const[y,mo,d]=s.split('-');return`${+d} de ${m[+mo-1]} ${y}`}
function formatDateShort(s){if(!s)return'';const m=['Ene','Feb','Mar','Abr','May','Jun','Jul','Ago','Sep','Oct','Nov','Dic'];const[y,mo,d]=s.split('-');return`${+d} ${m[+mo-1]} ${y}`}
function calcNights(){const ci=new Date(v('checkin')),co=new Date(v('checkout'));if(isNaN(ci)||isNaN(co))return 0;return Math.round((co-ci)/86400000)}
function updateNightsDisplay(){const n=calcNights();const el=$('#nights-display');if(n>0){el.textContent=`${n} noches ¬∑ ${n+1} d√≠as`;el.style.display=''}else{el.style.display='none'}}

function updateSpecialOptions(){
  const d=v('destino'),d2=v('destino-2');
  const parkDests=['orlando','universal','california','hollywood'];
  const activeDests=[d];if(isCombo()&&d2)activeDests.push(d2);
  const hasPark=activeDests.some(x=>parkDests.includes(x));
  $('#special-park-options').style.display=hasPark?'':'none';
  $$('.special-opts').forEach(el=>el.style.display='none');
  activeDests.forEach(dd=>{
    const el=document.getElementById('special-options-'+dd);
    if(el)el.style.display='';
  });
}

function getNotasText(){
  const lines=[];
  const notaMap={
    'nota-visa':'üõÇ Visa americana vigente requerida',
    'nota-pasaporte':'üìò Se requiere pasaporte vigente',
    'nota-seguro':'üõ° Seguro de viaje recomendado',
    'nota-tipocambio':'üí± Tipo de cambio sujeto a variaciones',
    'nota-disponibilidad':'üìå Precios sujetos a disponibilidad',
    'nota-transporte':'üöó Transportaci√≥n aeropuerto-hotel no incluida',
    'nota-vuelos':'‚úàÔ∏è Vuelos no incluidos en la cotizaci√≥n'
  };
  Object.keys(notaMap).forEach(id=>{if(ck(id))lines.push(notaMap[id])});
  const specialMap={
    'sp-orl-halloween':'üéÉ Mickey\'s Not-So-Scary Halloween Party (evento especial, boleto adicional)',
    'sp-orl-christmas':'üéÑ Mickey\'s Very Merry Christmas Party (evento especial, boleto adicional)',
    'sp-orl-epcot':'üåé EPCOT Festival incluido con entrada regular',
    'sp-orl-dining':'üçΩ Reservaciones de restaurantes especiales recomendadas',
    'sp-uni-hhn':'üëª Halloween Horror Nights (evento especial, boleto adicional)',
    'sp-uni-early':'üåÖ Early Park Admission incluido con hotel Universal',
    'sp-uni-express':'‚ö° Universal Express Pass (acceso r√°pido a atracciones)',
    'sp-cal-oogie':'üéÉ Oogie Boogie Bash (evento especial, boleto adicional)',
    'sp-cal-worldcolor':'üåà World of Color Dining Package disponible',
    'sp-cal-fantasmic':'‚ú® Fantasmic! Dining Package disponible',
    'sp-hwd-hhn':'üëª Halloween Horror Nights Hollywood (evento especial)',
    'sp-hwd-studio':'üé• Studio Tour VIP Experience'
  };
  Object.keys(specialMap).forEach(id=>{const el=document.getElementById(id);if(el&&el.checked)lines.push(specialMap[id])});
  const custom=v('notas');if(custom)lines.push(custom);
  return lines.join('\n');
}
function getMinorsText(){const a=+$('#menores02').value||0,b=+$('#menores39').value||0,c=+$('#menores1017').value||0,t=a+b+c;if(!t)return'';let p=[];if(a)p.push('(0-2 a√±os)');if(b)p.push('(3-9 a√±os)');if(c)p.push('(10-17 a√±os)');return`${t} ${p.join(' ')}`}
function getMinorsCardText(){const a=+$('#menores02').value||0,b=+$('#menores39').value||0,c=+$('#menores1017').value||0,t=a+b+c;if(!t)return'';let d=[];if(a)d.push(`${a} de 0-2`);if(b)d.push(`${b} de 3-9`);if(c)d.push(`${c} de 10-17`);return`${t} Menor${t>1?'es':''} (${d.join(', ')})`}
function getMinorsTotal(){return(+$('#menores02').value||0)+(+$('#menores39').value||0)+(+$('#menores1017').value||0)}
function $(sel){return document.querySelector(sel)}
function $$(sel){return document.querySelectorAll(sel)}
function v(id){return document.getElementById(id)?.value?.trim()||''}
function ck(id){return document.getElementById(id)?.checked||false}
function showToast(t){const el=$('#toast');el.textContent=t;el.classList.remove('opacity-0','pointer-events-none');setTimeout(()=>el.classList.add('opacity-0','pointer-events-none'),2000)}

// ‚îÄ‚îÄ HOTEL/SHIP PREVIEW ‚îÄ‚îÄ
function showHotelPreview(pfx){const sel=document.getElementById(`${pfx}-hotel`),prev=document.getElementById(`${pfx}-hotel-preview`),h=sel.value;if(!h){prev.innerHTML='';return}const d=HOTEL_CATS[h],imgUrl=HOTEL_IMAGES[h];if(!d){prev.innerHTML='';return}if(imgUrl){prev.innerHTML=`<div style="background:#FFF8F0;border:1.5px solid #FFE8CC;border-radius:14px;overflow:hidden"><img src="${imgUrl}" alt="" style="width:100%;height:120px;object-fit:cover;display:block" onerror="this.style.display='none'"><div style="padding:12px;display:flex;align-items:center;gap:10px"><span class="hotel-cat ${d.c}">${d.cat}</span><span style="font-size:13px;font-weight:500;color:#1B2A4A">${h}</span></div></div>`}else{prev.innerHTML=`<div style="background:#FFF8F0;border:1.5px solid #FFE8CC;border-radius:14px;padding:12px;display:flex;align-items:center;gap:10px"><span class="hotel-cat ${d.c}">${d.cat}</span><span style="font-size:13px;font-weight:500;color:#1B2A4A">${h}</span></div>`}}
function showShipPreview(){const b=v('crd-barco'),d=SHIP_DATA[b],prev=$('#crd-ship-preview');if(!d){prev.innerHTML='';return}prev.innerHTML=`<div style="background:linear-gradient(135deg,#1B2A4A,#2C4570);border-radius:14px;padding:16px;color:#fff"><div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px"><span style="font-size:15px;font-weight:700">üö¢ ${b}</span><span style="font-size:11px;opacity:.6">${d.y}</span></div><div style="font-size:12px;opacity:.8">${d.d}</div></div>`}

// ‚îÄ‚îÄ UNIVERSAL TICKET DESC ‚îÄ‚îÄ
function updateUniDesc(){const t=v('uni-modalidad'),desc=UNI_TICKET_DESC[t]||'';$('#uni-desc').innerHTML=desc?`<p>‚ÑπÔ∏è ${desc}</p>`:'';}

// ‚îÄ‚îÄ DINING PLAN ‚îÄ‚îÄ
function toggleComidaDetail(){const plan=v('orl-comidas'),det=$('#orl-comidas-detail'),info=$('#orl-comidas-info');if(!plan){det.style.display='none';return}det.style.display='';if(plan==='quick')info.innerHTML='<b>Quick-Service:</b> 2 comidas r√°pidas + 1 snack + mug recargable por persona por noche ($60.50 USD/adulto)';else info.innerHTML='<b>Standard:</b> 1 comida de mesa + 1 r√°pida + 1 snack + mug recargable por persona por noche ($98.50 USD/adulto)'}

// ‚îÄ‚îÄ FORM MANAGEMENT ‚îÄ‚îÄ
// ‚îÄ‚îÄ COMBINED TRIP LOGIC ‚îÄ‚îÄ
const COMBO_MAP={
  orlando:['universal','crucero-disney','crucero-otros'],
  universal:['orlando','crucero-disney','crucero-otros'],
  california:['hollywood','crucero-disney','crucero-otros'],
  hollywood:['california','crucero-disney','crucero-otros'],
  paris:['crucero-disney','crucero-otros'],
  'crucero-disney':['orlando','universal','california','hollywood','paris'],
  'crucero-otros':['orlando','universal','california','hollywood','paris']
};
const DEST_NAMES={orlando:'üè∞ Disney World ¬∑ Orlando',universal:'üé¢ Universal Studios ¬∑ Orlando',california:'üé° Disneyland ¬∑ California',hollywood:'üé¨ Universal Studios ¬∑ Hollywood',paris:'üóº Disneyland ¬∑ Paris','crucero-disney':'üö¢ Crucero Disney','crucero-otros':'üõ≥ Crucero Otras Navieras',nickelodeon:'üßΩ Nickelodeon Resort',xcaret:'üå¥ Xcaret'};
const DEST_MAP={orlando:'campos-orlando',universal:'campos-universal',california:'campos-california',hollywood:'campos-hollywood',paris:'campos-paris','crucero-disney':'campos-crucero-disney','crucero-otros':'campos-crucero-otros',nickelodeon:'campos-nickelodeon',xcaret:'campos-xcaret'};

function onCombinadoChange(){
  const on=ck('viaje-combinado');
  $('#combo-dest2-wrap').style.display=on?'':'none';
  if(!on){
    $('#destino-2').value='';
    onDestino2Change();
    $('#combo-pricing').style.display='none';
  }else{
    populateDestino2();
    if(!isGroupMode()){$('#combo-pricing').style.display='';updateComboPriceLabels()}
  }
  if(isGroupMode())updateGroupReservations();
}

function populateDestino2(){
  const d1=v('destino'),sel=$('#destino-2');
  const opts=COMBO_MAP[d1]||[];
  sel.innerHTML='<option value="">‚Äî Selecciona segundo destino ‚Äî</option>';
  opts.forEach(id=>{
    const o=document.createElement('option');
    o.value=id;o.textContent=DEST_NAMES[id]||id;
    sel.appendChild(o);
  });
}

function onDestino2Change(){
  const d2=v('destino-2');
  $$('.dest-section').forEach(el=>{
    if(!el.classList.contains('active-combo'))return;
    el.classList.remove('active');el.classList.remove('active-combo');
  });
  if(d2&&DEST_MAP[d2]){
    const el=document.getElementById(DEST_MAP[d2]);
    el.classList.add('active');el.classList.add('active-combo');
  }
  updateComboPriceLabels();
  if(d2==='crucero-disney'&&!itCounts.crd){for(let i=0;i<5;i++)addItineraryDay('crd');showShipPreview()}
  if(d2==='crucero-otros'&&!itCounts.cro){for(let i=0;i<5;i++)addItineraryDay('cro');if(!pgCount)addPriceGroup()}
  if(d2==='universal')updateUniDesc();
  updateSpecialOptions();
  if(isGroupMode())updateGroupReservations();
}

function updateComboPriceLabels(){
  const d1=v('destino'),d2=v('destino-2');
  const n1=(DEST_NAMES[d1]||'Tramo 1').replace(/^[^\s]+\s/,'');
  const n2=(DEST_NAMES[d2]||'Tramo 2').replace(/^[^\s]+\s/,'');
  $('#combo-price1-label').textContent=`Precio ${n1} USD`;
  $('#combo-price2-label').textContent=`Precio ${n2} USD`;
}

function updateComboTotal(){
  const p1=parseFloat((v('precio-tramo1')||'0').replace(/,/g,''))||0;
  const p2=parseFloat((v('precio-tramo2')||'0').replace(/,/g,''))||0;
  if(p1||p2){$('#precio').value=(p1+p2).toLocaleString('en-US',{minimumFractionDigits:2,maximumFractionDigits:2})}
}

function isCombo(){return ck('viaje-combinado')&&v('destino-2')}

function onDestinoChange(){const d=v('destino'),c=$('#form-container');if(!d){c.style.display='none';$('#dest-image-preview').style.display='none';$('#combo-toggle-wrap').style.display='none';return}c.style.display='';const img=$('#dest-image'),imgC=$('#dest-image-preview');if(DEST_IMAGES[d]){img.src=DEST_IMAGES[d];imgC.style.display=''}else{imgC.style.display='none'}$$('.dest-section').forEach(el=>{el.classList.remove('active');el.classList.remove('active-combo')});if(DEST_MAP[d])document.getElementById(DEST_MAP[d]).classList.add('active');const cr=d.startsWith('crucero');$('#label-habitaciones').textContent=cr?'Camarotes':'Habitaciones';$('#label-checkin').textContent=cr?'Embarque':'Check in';$('#label-checkout').textContent=cr?'Desembarque':'Check out';$('#price-section').style.display=d==='crucero-otros'?'none':'';if(d==='crucero-disney'&&!itCounts.crd){for(let i=0;i<5;i++)addItineraryDay('crd');showShipPreview()}if(d==='crucero-otros'&&!itCounts.cro){for(let i=0;i<5;i++)addItineraryDay('cro');if(!pgCount)addPriceGroup()}if(d==='universal')updateUniDesc();$('#preview-section')&&($('#preview-section').style.display='none');const hasCombo=!!COMBO_MAP[d];$('#combo-toggle-wrap').style.display=hasCombo?'':'none';if(!hasCombo){$('#viaje-combinado').checked=false;onCombinadoChange()}else if(ck('viaje-combinado')){populateDestino2();$('#destino-2').value='';onDestino2Change()}updateSpecialOptions()}

// ‚îÄ‚îÄ ITINERARY ‚îÄ‚îÄ
function addItineraryDay(p){itCounts[p]++;const n=itCounts[p],c=document.getElementById(`${p}-itinerario-container`),r=document.createElement('div');r.className='it-row';r.id=`${p}-d-${n}`;r.innerHTML=`<span style="font-size:11px;font-weight:600;color:#999;width:44px;flex-shrink:0">D√≠a ${n}</span><input type="text" placeholder="Puerto Ca√±averal, Florida" class="fi-input" style="flex:1;padding:10px 14px;font-size:13px" id="${p}-d-${n}-v"><button type="button" onclick="document.getElementById('${p}-d-${n}').remove()" style="color:#E8716D;font-size:18px;font-weight:700;width:32px;height:32px;border:none;background:none;cursor:pointer">√ó</button>`;c.appendChild(r)}
function getItinerary(p){const rows=document.getElementById(`${p}-itinerario-container`).querySelectorAll('.it-row');let lines=[],n=1;rows.forEach(r=>{const i=r.querySelector('input');if(i&&i.value.trim()){lines.push(`‚ÅÉ\tD√≠a ${n}: ${i.value.trim()}`);n++}});return lines.join('\n')}

// ‚îÄ‚îÄ PRICE GROUPS ‚îÄ‚îÄ
function addPriceGroup(){pgCount++;const n=pgCount,c=$('#cro-precios-container'),d=document.createElement('div');d.className='price-group-card';d.id=`pg-${n}`;d.innerHTML=`<div style="display:flex;gap:8px;margin-bottom:10px"><input type="text" placeholder="Ej: 2 Adultos 1 Menor (8 a√±os)" class="fi-input" style="flex:1;padding:10px 14px;font-size:13px" id="pg-${n}-d"><button type="button" onclick="document.getElementById('pg-${n}').remove()" style="color:#E8716D;font-size:18px;font-weight:700;border:none;background:none;cursor:pointer">√ó</button></div><div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px"><div><label style="font-size:10px;color:#999">Interior</label><input type="text" placeholder="$" class="fi-input" style="padding:8px 10px;font-size:12px" id="pg-${n}-i"></div><div><label style="font-size:10px;color:#999">Vista al mar</label><input type="text" placeholder="$" class="fi-input" style="padding:8px 10px;font-size:12px" id="pg-${n}-v"></div><div><label style="font-size:10px;color:#999">Balc√≥n</label><input type="text" placeholder="$" class="fi-input" style="padding:8px 10px;font-size:12px" id="pg-${n}-b"></div></div>`;c.appendChild(d)}
function getPriceGroups(){const gs=$('#cro-precios-container').querySelectorAll('.price-group-card');let t='';gs.forEach(g=>{const id=g.id,desc=g.querySelector(`#${id}-d`)?.value?.trim()||'',i=g.querySelector(`#${id}-i`)?.value?.trim()||'',vi=g.querySelector(`#${id}-v`)?.value?.trim()||'',b=g.querySelector(`#${id}-b`)?.value?.trim()||'';if(desc){t+=`\nüí∏Precios para ${desc}\n`;if(i)t+=`- Camarote interior: Desde $${i} USD\n`;if(vi)t+=`- Camarote con vista al mar: Desde $${vi} USD\n`;if(b)t+=`- Camarote con balc√≥n: Desde $${b} USD\n`}});return t.trim()}

// ‚îÄ‚îÄ MESSAGE BUILDERS ‚îÄ‚îÄ
function greet(d){const n=v('nombre'),t=AGENT_TITLES[d]||'Agente de viajes';return`${n?'Hola '+n+'!':'Hola!'} C√≥mo est√°s?\nSoy Mich Murrieta, ${t}\n\nTe comparto tu cotizaci√≥n, av√≠same c√≥mo la ves y si gustas que hagamos alguna modificaci√≥n o tienes alguna duda ‚¨áÔ∏è`}
function travelers(){const a=v('adultos'),m=getMinorsText();let t=`\n*Adultos:* ${a}`;if(m)t+=`\n*Menores:* ${m}`;return t}
function closing(){return'Cualquier duda estoy a tus √≥rdenes ‚ú®'}

function genOrlando(){const h=v('orl-hotel'),mod=v('orl-modalidad'),dias=v('orl-dias'),p=v('precio'),plan=v('orl-comidas'),kf=ck('orl-kidsfree'),mm=ck('orl-memory'),nights=calcNights();let m=greet('orlando')+'\n'+travelers();if(h)m+=`\n*Hospedaje:* ${h}`;m+=`\n\nCheck in: ${formatDate(v('checkin'))}\nCheck out: ${formatDate(v('checkout'))}`;if(nights>0)m+=`\nüìÖ *${nights} noches*`;const modText=mod.includes('Base')?'1 parque x d√≠a':mod;m+=`\n\nüéü Entradas a los parques con modalidad "${modText}" v√°lido por ${dias} d√≠as`;if(plan==='quick')m+=`\nüçî Plan de comidas Quick-Service (2 comidas r√°pidas + 1 snack x persona x noche)`;else if(plan==='standard')m+=`\nüçΩ Plan de comidas Standard (1 mesa + 1 r√°pida + 1 snack x persona x noche)`;if(kf)m+=`\nüéâ *Promoci√≥n Kids Eat Free 2026* - Ni√±os de 3 a 9 a√±os comen gratis con plan de comidas de adulto`;m+=`\n\n*üí∏$${p} USD*`;if(mm)m+=`\n\nüì∏Agrega el paquete de fotos "Memory Maker" por *$185 USD* adicionales`;m+=`\n\n${CONDITIONS.orlando}`;const n=getNotasText();if(n)m+=`\n\n${n}`;m+=`\n\n${closing()}`;return m}

function genUniversal(){const h=v('uni-hotel'),ticket=v('uni-modalidad'),dias=v('uni-dias'),p=v('precio'),vol=ck('uni-volcano'),nights=calcNights();const ticketNames={'3base':'Base (1 parque por d√≠a)','3ptp':'Park-to-Park','4ptp':'Park-to-Park','5ptp':'Park-to-Park'};let m=greet('universal')+'\n'+travelers();if(h)m+=`\n\nHospedaje: ${h}`;m+=`\n\nCheck in: ${formatDate(v('checkin'))}\nCheck out: ${formatDate(v('checkout'))}`;if(nights>0)m+=`\nüìÖ *${nights} noches*`;m+=`\n\nüéü Entradas con modalidad "${ticketNames[ticket]||ticket}" v√°lido por ${dias} d√≠as`;m+=`\n que te permite entrar a:\n‚Ä¢‚Å†  ‚Å†Universal Studios Florida\n‚Ä¢‚Å†  ‚Å†Islands of Adventure\n‚Ä¢‚Å†  ‚Å†Universal Epic Universe`;if(vol)m+=`\n‚Ä¢‚Å†  ‚Å†Volcano Bay`;m+=`\n\nüí∏ *$${p} USD*\n\n${CONDITIONS.universal}`;const n=getNotasText();if(n)m+=`\n\n${n}`;m+=`\n\n${closing()}`;return m}

function genCalifornia(){const h=v('cal-hotel'),ticket=v('cal-ticket'),dias=v('cal-dias'),ll=v('cal-lightning'),p=v('precio'),sw=ck('cal-starwars'),nights=calcNights();let m=greet('california')+'\n'+travelers();if(h)m+=`\n*Hospedaje:* ${h}`;m+=`\n\nCheck in: ${formatDate(v('checkin'))}\nCheck out: ${formatDate(v('checkout'))}`;if(nights>0)m+=`\nüìÖ *${nights} noches*`;m+=`\n\nüéü Entradas a los parques con modalidad "${ticket}" v√°lido por ${dias} d√≠as`;if(ll==='multi')m+=`\n‚ö° Lightning Lane Multi Pass incluido`;else if(ll==='single')m+=`\n‚ö° Lightning Lane Single Pass (atracciones selectas)`;else if(ll==='premier')m+=`\n‚ö° Lightning Lane Premier Pass (todas las atracciones, sin ventana de horario)`;m+=`\n\n*üí∏$${p} USD*\n\n${CONDITIONS.california}`;if(sw){const ev=CONDITIONES_EVENTOS['california'];m+=`\n\n${ev||'*STAR WARS NITEü™ê* La entrada a este evento es adicional y costar√≠a aproximadamente $200 USD x persona. A√∫n no tenemos los precios, pero yo les avisar√≠a en cuanto est√©n disponibles'}`;}const n=getNotasText();if(n)m+=`\n\n${n}`;m+=`\n\n${closing()}`;return m}

function genHollywood(){const h=v('hwd-hotel'),ticket=v('hwd-ticket'),dias=v('hwd-dias'),p=v('precio'),vip=ck('hwd-vip'),nin=ck('hwd-nintendo'),nights=calcNights();const ticketNames={general:'General Admission',express:'Universal Express',['express-unl']:'Universal Express Unlimited'};let m=greet('hollywood')+'\n'+travelers();if(h)m+=`\n*Hospedaje:* ${h}`;m+=`\n\nCheck in: ${formatDate(v('checkin'))}\nCheck out: ${formatDate(v('checkout'))}`;if(nights>0)m+=`\nüìÖ *${nights} noches*`;m+=`\n\nüéü Entradas con modalidad "${ticketNames[ticket]||ticket}" v√°lido por ${dias} d√≠a${+dias!==1?'s':''}`;if(nin)m+=`\nüéÆ Acceso a Super Nintendo World incluido`;if(vip)m+=`\nüåü *VIP Experience* - Tour guiado con acceso prioritario`;m+=`\n\n*üí∏$${p} USD*\n\n${CONDITIONS.hollywood}`;const n=getNotasText();if(n)m+=`\n\n${n}`;m+=`\n\n${closing()}`;return m}

function genParis(){const h=v('par-hotel'),p=v('precio'),nights=calcNights();let m=greet('paris')+'\n'+travelers();if(h)m+=`\n*Hospedaje:* ${h}`;m+=`\n\nCheck in: ${formatDate(v('checkin'))}\nCheck out: ${formatDate(v('checkout'))}`;if(nights>0)m+=`\nüìÖ *${nights} noches*`;m+=`\n\nüéü Entradas v√°lidas por toda su estancia\nüçΩ Desayuno incluido\n\n*üí∏$${p} USD*`;const n=getNotasText();if(n)m+=`\n\n${n}`;m+=`\n\n${closing()}`;return m}

function genCruceroDisney(){const b=v('crd-barco'),cam=v('crd-camarote').toLowerCase(),p=v('precio'),promo=v('crd-promo'),it=getItinerary('crd'),nights=calcNights();let m=greet('crucero-disney')+'\n'+travelers();m+=`\n\nüõ≥Barco: *${b}*`;if(it)m+=`\n\nüìçItinerario\n${it}`;m+=`\n\nüóì*Fechas*\n${formatDate(v('checkin'))} al ${formatDate(v('checkout'))}`;if(nights>0)m+=`\nüìÖ *${nights} noches*`;m+=`\n\nüí∏Precios\n‚Ä¢ Camarote con ${cam}: *Desde $${p} USD*`;if(promo)m+=`\n\n*PROMOCI√ìN: ${promo}‚ú®ü§©*`;m+=`\n\n${CONDITIONS['crucero-disney']}\n\n${INCLUSIONS_CRUISE}`;const n=getNotasText();if(n)m+=`\n\n${n}`;m+=`\n\n${closing()}`;return m}

function genCruceroOtros(){const b=v('cro-barco'),it=getItinerary('cro'),pg=getPriceGroups(),nights=calcNights();let m=greet('crucero-otros')+'\n'+travelers();if(b)m+=`\n\nüõ≥Barco: ${b}`;if(it)m+=`\n\nüìçItinerario\n${it}`;m+=`\n\nüóìFechas\n${formatDate(v('checkin'))} al ${formatDate(v('checkout'))}`;if(nights>0)m+=`\nüìÖ *${nights} noches*`;if(pg)m+=`\n\n${pg}`;m+=`\n\n${CONDITIONS['crucero-otros']}`;const n=getNotasText();if(n)m+=`\n\n${n}`;m+=`\n\n${closing()}`;return m}

function genNickelodeon(){const p=v('precio'),nights=calcNights();let m=greet('nickelodeon')+'\n'+travelers();m+=`\n*Hospedaje:* Nickelodeon Resort - Riviera Maya - TODO INCLUIDO\n\nCheck in: ${formatDate(v('checkin'))}\nCheck out: ${formatDate(v('checkout'))}`;if(nights>0)m+=`\nüìÖ *${nights} noches*`;m+=`\n\n*üí∏$${p} USD*\n${CONDITIONS.nickelodeon}\n\n${INCLUSIONS_NICK}`;const n=getNotasText();if(n)m+=`\n\n${n}`;m+=`\n\n${closing()}`;return m}

function genXcaret(){const h=v('xca-hotel'),p=v('precio'),nights=calcNights();let m=greet('xcaret')+'\n'+travelers();m+=`\n*Hospedaje:* ${h}\n\nCheck in: ${formatDate(v('checkin'))}\nCheck out: ${formatDate(v('checkout'))}`;if(nights>0)m+=`\nüìÖ *${nights} noches*`;m+=`\n\n*üí∏$${p} USD*\n${CONDITIONS.xcaret}\n\n${INCLUSIONS_XCARET}`;const n=getNotasText();if(n)m+=`\n\n${n}`;m+=`\n\n${closing()}`;return m}

// ‚îÄ‚îÄ WHATSAPP PREVIEW (formatted) ‚îÄ‚îÄ
function textToWAHtml(text){return text.replace(/\*(.*?)\*/g,'<b>$1</b>').replace(/\n/g,'<br>')}
function waHtmlToText(el){let t=el.innerHTML;t=t.replace(/<b>(.*?)<\/b>/gi,'*$1*');t=t.replace(/<br\s*\/?>/gi,'\n');t=t.replace(/<div>/gi,'\n');t=t.replace(/<\/div>/gi,'');t=t.replace(/&amp;/g,'&');t=t.replace(/&lt;/g,'<');t=t.replace(/&gt;/g,'>');t=t.replace(/&nbsp;/g,' ');return t}

// ‚îÄ‚îÄ COMBINED TRIP MESSAGE ‚îÄ‚îÄ
function getDestDetails(d){
  if(d==='orlando'){const h=v('orl-hotel'),mod=v('orl-modalidad'),dias=v('orl-dias'),plan=v('orl-comidas'),kf=ck('orl-kidsfree'),mm=ck('orl-memory');let t='';if(h)t+=`*Hospedaje:* ${h}\n`;const modText=mod.includes('Base')?'1 parque x d√≠a':mod;t+=`üéü Entradas "${modText}" por ${dias} d√≠as`;if(plan==='quick')t+=`\nüçî Plan Quick-Service`;else if(plan==='standard')t+=`\nüçΩ Plan Standard`;if(kf)t+=`\nüéâ *Kids Eat Free 2026*`;if(mm)t+=`\nüì∏ Memory Maker ($185 USD)`;return t}
  if(d==='universal'){const h=v('uni-hotel'),ticket=v('uni-modalidad'),dias=v('uni-dias'),vol=ck('uni-volcano');const tn={'3base':'Base','3ptp':'Park-to-Park','4ptp':'Park-to-Park','5ptp':'Park-to-Park'};let t='';if(h)t+=`*Hospedaje:* ${h}\n`;t+=`üéü Entradas "${tn[ticket]||ticket}" por ${dias} d√≠as\n‚Ä¢ Universal Studios Florida\n‚Ä¢ Islands of Adventure\n‚Ä¢ Epic Universe`;if(vol)t+=`\n‚Ä¢ Volcano Bay`;return t}
  if(d==='california'){const h=v('cal-hotel'),ticket=v('cal-ticket'),dias=v('cal-dias'),ll=v('cal-lightning'),sw=ck('cal-starwars');let t='';if(h)t+=`*Hospedaje:* ${h}\n`;t+=`üéü Entradas "${ticket}" por ${dias} d√≠as`;if(ll==='multi')t+=`\n‚ö° Lightning Lane Multi Pass`;else if(ll==='single')t+=`\n‚ö° Lightning Lane Single Pass`;else if(ll==='premier')t+=`\n‚ö° Lightning Lane Premier Pass`;return t}
  if(d==='hollywood'){const h=v('hwd-hotel'),ticket=v('hwd-ticket'),dias=v('hwd-dias'),vip=ck('hwd-vip'),nin=ck('hwd-nintendo');const tn={general:'General Admission',express:'Express',['express-unl']:'Express Unlimited'};let t='';if(h)t+=`*Hospedaje:* ${h}\n`;t+=`üéü Entradas "${tn[ticket]||ticket}" por ${dias} d√≠a${+dias!==1?'s':''}`;if(nin)t+=`\nüéÆ Super Nintendo World`;if(vip)t+=`\nüåü VIP Experience`;return t}
  if(d==='crucero-disney'){const b=v('crd-barco'),cam=v('crd-camarote').toLowerCase(),it=getItinerary('crd');let t=`üõ≥ Barco: *${b}*`;if(it)t+=`\nüìç Itinerario:\n${it}`;t+=`\nüõè Camarote ${cam}`;if(v('crd-promo'))t+=`\nüéâ *${v('crd-promo')}*`;return t}
  if(d==='crucero-otros'){const b=v('cro-barco'),it=getItinerary('cro');let t='';if(b)t+=`üõ≥ ${b}`;if(it)t+=`\nüìç Itinerario:\n${it}`;return t}
  return'';
}

function genCombinado(d1,d2,gens){
  const n1=DEST_NAMES[d1]||d1,n2=DEST_NAMES[d2]||d2;
  const nights=calcNights();
  const group=isGroupMode(),gd=group?getGroupData():null;
  let m=greet(d1);
  if(group){
    m+=`\n*Cotizaci√≥n grupal:* ${gd.length} habitaciones`;
  }else{
    m+='\n'+travelers();
  }
  m+=`\n\nCheck in: ${formatDate(v('checkin'))}\nCheck out: ${formatDate(v('checkout'))}`;
  if(nights>0)m+=`\nüìÖ *${nights} noches*`;

  if(group){
    let sub1=0,sub2=0,grandTotal=0;
    // Park 1
    m+=`\n\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n*${n1}*\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n${getDestDetails(d1)}`;
    gd.forEach((r,i)=>{
      const p=parseFloat((r.price1||'0').replace(/,/g,''))||0;sub1+=p;
      m+=`\n\nüè∑ *Habitaci√≥n ${i+1} ‚Äî ${r.name}*\n${r.adults} Adulto${r.adults!==1?'s':''}${r.minors>0?', '+r.minors+' Menor'+(r.minors!==1?'es':''):''}`;
      m+=`\n*üí∏ $${r.price1} USD*`;
      if(r.notes)m+=`\n_${r.notes}_`;
    });
    if(gd.length>1)m+=`\n\nüí∞ *Subtotal ${(DEST_NAMES[d1]||d1).replace(/^[^\s]+\s/,'')}: $${formatUSD(sub1)} USD*`;
    // Park 2
    m+=`\n\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n*${n2}*\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n${getDestDetails(d2)}`;
    gd.forEach((r,i)=>{
      const p=parseFloat((r.price2||'0').replace(/,/g,''))||0;sub2+=p;
      m+=`\n\nüè∑ *Habitaci√≥n ${i+1} ‚Äî ${r.name}*\n${r.adults} Adulto${r.adults!==1?'s':''}${r.minors>0?', '+r.minors+' Menor'+(r.minors!==1?'es':''):''}`;
      m+=`\n*üí∏ $${r.price2} USD*`;
    });
    if(gd.length>1)m+=`\n\nüí∞ *Subtotal ${(DEST_NAMES[d2]||d2).replace(/^[^\s]+\s/,'')}: $${formatUSD(sub2)} USD*`;
    grandTotal=sub1+sub2;
    m+=`\n\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\nüí∞ *TOTAL: $${formatUSD(grandTotal)} USD* (${gd.length} habitaciones)`;
  }else{
    const p1=v('precio-tramo1'),p2=v('precio-tramo2'),pt=v('precio');
    m+=`\n\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n*${n1}*\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n${getDestDetails(d1)}`;
    if(p1)m+=`\n\nüí∏ *$${p1} USD*`;
    m+=`\n\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n*${n2}*\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n${getDestDetails(d2)}`;
    if(p2)m+=`\n\nüí∏ *$${p2} USD*`;
    if(pt)m+=`\n\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n*üí∏ TOTAL: $${pt} USD*`;
  }
  const conds=[];if(CONDITIONS[d1])conds.push(CONDITIONS[d1]);if(CONDITIONS[d2]&&CONDITIONS[d2]!==CONDITIONS[d1])conds.push(CONDITIONS[d2]);
  if(conds.length)m+=`\n\n${conds.join('\n\n')}`;
  const n=getNotasText();if(n)m+=`\n\n${n}`;
  m+=`\n\n${closing()}`;return m;
}

// ‚îÄ‚îÄ MAIN GENERATE ‚îÄ‚îÄ
function generarMensaje(){
  const d=v('destino');if(!d)return;
  const gens={orlando:genOrlando,universal:genUniversal,california:genCalifornia,hollywood:genHollywood,paris:genParis,'crucero-disney':genCruceroDisney,'crucero-otros':genCruceroOtros,nickelodeon:genNickelodeon,xcaret:genXcaret};
  let msg;
  if(isCombo()){msg=genCombinado(d,v('destino-2'),gens);generateCardCombo(d,v('destino-2'))}
  else if(isGroupMode()){msg=genGroupMessage(d,gens[d]);generateCard(d)}
  else{msg=gens[d]();generateCard(d)}
  $('#wa-preview').innerHTML=textToWAHtml(msg);
  $('#preview-section').style.display='';switchTab('texto');
  $('#preview-section').scrollIntoView({behavior:'smooth',block:'start'});
}
function formatUSD(n){return n.toLocaleString('en-US',{minimumFractionDigits:0,maximumFractionDigits:2})}
function genGroupMessage(dest,baseFn){
  let msg=baseFn();
  const gd=getGroupData();
  const grpSummary=`\n*Cotizaci√≥n grupal:* ${gd.length} habitaciones`;
  msg=msg.replace(/\n\*Adultos:\*[^\n]*(\n\*Menores:\*[^\n]*)?/,grpSummary);
  let totalGrp=0,blocks='';
  gd.forEach((r,i)=>{
    const p=parseFloat((r.price||'0').replace(/,/g,''))||0;totalGrp+=p;
    blocks+=`\n\nüè∑ *Reservaci√≥n ${i+1}*\nüë§ ${r.name}\n${r.adults} Adulto${r.adults!==1?'s':''}${r.minors>0?', '+r.minors+' Menor'+(r.minors!==1?'es':''):''}`;
    blocks+=`\n*üí∏ $${r.price} USD*`;
    if(r.notes)blocks+=`\n_${r.notes}_`;
  });
  blocks+=`\n\nüí∞ *TOTAL GRUPO: $${totalGrp.toLocaleString('en-US')} USD* (${gd.length} habitaciones)`;
  const pricePatterns=[/\n\n\*üí∏\$[^\n]+USD\*/,/\n\nüí∏ \*\$[^\n]+USD\*/,/\n\nüí∏\*\$[^\n]+USD\*/];
  let replaced=false;
  for(const p of pricePatterns){if(p.test(msg)){msg=msg.replace(p,blocks);replaced=true;break}}
  if(!replaced){const cl=closing();msg=msg.replace('\n\n'+cl,blocks+'\n\n'+cl)}
  return msg;
}

// ‚îÄ‚îÄ CARD GENERATION ‚îÄ‚îÄ
function generateCard(dest){
  const nombre=v('nombre')||'Cliente',adultos=v('adultos'),minors=getMinorsCardText(),checkin=v('checkin'),checkout=v('checkout'),precio=v('precio');
  const names={orlando:'üè∞ Disney World ¬∑ Orlando',universal:'üé¢ Universal Studios ¬∑ Orlando',california:'üé° Disneyland ¬∑ California',hollywood:'üé¨ Universal Studios ¬∑ Hollywood',paris:'üóº Disneyland ¬∑ Paris','crucero-disney':'üö¢ Crucero Disney','crucero-otros':'üõ≥ Crucero',nickelodeon:'üßΩ Nickelodeon Resort',xcaret:'üå¥ Xcaret'};
  let details='';
  if(dest==='orlando'){const h=v('orl-hotel');if(h)details+=`<div style="display:flex;align-items:center;gap:8px"><span>üè®</span><span class="card-editable-dark" contenteditable="true">${h}</span></div>`;details+=`<div style="display:flex;align-items:center;gap:8px"><span>üéü</span><span>${v('orl-modalidad')} ¬∑ ${v('orl-dias')} d√≠as</span></div>`;if(v('orl-comidas'))details+=`<div style="display:flex;align-items:center;gap:8px"><span>üçΩ</span><span>Plan de comidas incluido</span></div>`;if(ck('orl-kidsfree'))details+=`<div style="display:flex;align-items:center;gap:8px;color:#22c55e;font-weight:600"><span>üéâ</span><span>Kids Eat Free 2026</span></div>`}
  else if(dest==='universal'){const h=v('uni-hotel');if(h)details+=`<div style="display:flex;align-items:center;gap:8px"><span>üè®</span><span class="card-editable-dark" contenteditable="true">${h}</span></div>`;details+=`<div style="display:flex;align-items:center;gap:8px"><span>üéü</span><span>Epic Universe + Universal + Islands</span></div>`;if(ck('uni-volcano'))details+=`<div style="display:flex;align-items:center;gap:8px"><span>üåã</span><span>Volcano Bay incluido</span></div>`}
  else if(dest==='california'){const h=v('cal-hotel');if(h)details+=`<div style="display:flex;align-items:center;gap:8px"><span>üè®</span><span class="card-editable-dark" contenteditable="true">${h}</span></div>`;details+=`<div style="display:flex;align-items:center;gap:8px"><span>üéü</span><span>${v('cal-ticket')} ¬∑ ${v('cal-dias')} d√≠as</span></div>`;const ll=v('cal-lightning');if(ll)details+=`<div style="display:flex;align-items:center;gap:8px"><span>‚ö°</span><span>Lightning Lane</span></div>`}
  else if(dest==='hollywood'){const h=v('hwd-hotel');if(h)details+=`<div style="display:flex;align-items:center;gap:8px"><span>üè®</span><span class="card-editable-dark" contenteditable="true">${h}</span></div>`;const tn={general:'General Admission',express:'Express',['express-unl']:'Express Unlimited'};details+=`<div style="display:flex;align-items:center;gap:8px"><span>üéü</span><span>${tn[v('hwd-ticket')]||v('hwd-ticket')} ¬∑ ${v('hwd-dias')} d√≠a${+v('hwd-dias')!==1?'s':''}</span></div>`;if(ck('hwd-nintendo'))details+=`<div style="display:flex;align-items:center;gap:8px"><span>üéÆ</span><span>Super Nintendo World</span></div>`;if(ck('hwd-vip'))details+=`<div style="display:flex;align-items:center;gap:8px;color:#f59e0b;font-weight:600"><span>üåü</span><span>VIP Experience</span></div>`}
  else if(dest==='paris'){const h=v('par-hotel');if(h)details+=`<div style="display:flex;align-items:center;gap:8px"><span>üè®</span><span class="card-editable-dark" contenteditable="true">${h}</span></div>`;details+=`<div style="display:flex;align-items:center;gap:8px"><span>üéü</span><span>Entradas toda la estancia</span></div><div style="display:flex;align-items:center;gap:8px"><span>üçΩ</span><span>Desayuno incluido</span></div>`}
  else if(dest==='crucero-disney'){details+=`<div style="display:flex;align-items:center;gap:8px"><span>üö¢</span><span class="card-editable-dark" contenteditable="true">${v('crd-barco')}</span></div><div style="display:flex;align-items:center;gap:8px"><span>üõè</span><span>Camarote ${v('crd-camarote').toLowerCase()}</span></div>`;if(v('crd-promo'))details+=`<div style="display:flex;align-items:center;gap:8px;color:#E8716D;font-weight:600"><span>üéâ</span><span class="card-editable-dark" contenteditable="true">${v('crd-promo')}</span></div>`}
  else if(dest==='crucero-otros'){if(v('cro-barco'))details+=`<div style="display:flex;align-items:center;gap:8px"><span>üö¢</span><span class="card-editable-dark" contenteditable="true">${v('cro-barco')}</span></div>`}
  else if(dest==='nickelodeon'){details+=`<div style="display:flex;align-items:center;gap:8px"><span>üè®</span><span>Nickelodeon Resort ¬∑ Riviera Maya</span></div><div style="display:flex;align-items:center;gap:8px"><span>‚úÖ</span><span>TODO INCLUIDO</span></div>`}
  else if(dest==='xcaret'){details+=`<div style="display:flex;align-items:center;gap:8px"><span>üè®</span><span class="card-editable-dark" contenteditable="true">${v('xca-hotel')}</span></div><div style="display:flex;align-items:center;gap:8px"><span>‚úÖ</span><span>TODO INCLUIDO</span></div>`}

  const isCr=dest.startsWith('crucero'),dateLabel=isCr?`${formatDate(checkin)} al ${formatDate(checkout)}`:`${formatDateShort(checkin)} ‚Üí ${formatDateShort(checkout)}`,hasPrice=dest!=='crucero-otros',grad=DEST_GRADIENTS[dest]||'linear-gradient(135deg,#E8716D,#D4605C)',imgUrl=(DEST_IMAGES[dest]||'').trim();
  const condMap={orlando:'‚úÖ Aparta con $200 USD ¬∑ Liquida 1 mes antes',california:'‚úÖ Aparta con $200 USD ¬∑ Liquida 1 mes antes',universal:'‚úÖ Aparta con $50 USD/persona ¬∑ Liquida 45 d√≠as antes',hollywood:'‚úÖ Precios sujetos a disponibilidad','crucero-disney':'‚úÖ Aparta con 10% ¬∑ Liquida 3 meses antes','crucero-otros':'‚úÖ Aparta con 20% ¬∑ Liquida 3 meses antes',nickelodeon:'‚úÖ Aparta con $200 USD',xcaret:'‚úÖ Aparta con $200 USD',paris:''};
  const group=isGroupMode(),groupData=group?getGroupData():null;
  const cleanNote=getHotelCleaningNote(dest);

  // Travelers section
  let travelersHtml='';
  if(group){
    travelersHtml=`<div style="display:flex;gap:12px;margin-bottom:16px;padding-bottom:14px;border-bottom:1px solid #f0f0f0;align-items:center;justify-content:center">
      <div style="font-size:18px">üë•</div><div style="font-size:12px;font-weight:700;color:#1B2A4A">Cotizaci√≥n grupal ¬∑ ${groupData.length} habitaciones</div></div>`;
  }else{
    travelersHtml=`<div style="display:flex;gap:16px;margin-bottom:16px;padding-bottom:14px;border-bottom:1px solid #f0f0f0">
      <div style="text-align:center;flex:1"><div style="font-size:22px">üë•</div><div style="font-size:12px;font-weight:600;color:#1B2A4A">${adultos} Adulto${+adultos!==1?'s':''}</div></div>
      ${getMinorsTotal()>0?`<div style="text-align:center;flex:1"><div style="font-size:22px">üë∂</div><div style="font-size:11px;font-weight:600;color:#1B2A4A">${minors}</div></div>`:''}</div>`;
  }

  // Price section
  let priceHtml='';
  if(group&&groupData){
    let totalGrp=0;
    groupData.forEach((r,i)=>{
      const p=parseFloat((r.price||'0').replace(/,/g,''))||0;totalGrp+=p;
      priceHtml+=`<div style="background:#F0F4FF;border-radius:12px;padding:12px 16px;margin-bottom:10px;border-left:4px solid #1B2A4A">
        <div style="font-size:11px;font-weight:700;color:#1B2A4A;margin-bottom:4px">üè∑ Reservaci√≥n ${i+1}</div>
        <div style="font-size:12px;color:#333;margin-bottom:2px" contenteditable="true">${r.name}</div>
        <div style="font-size:11px;color:#666">${r.adults} Adulto${r.adults!==1?'s':''}${r.minors>0?' ¬∑ '+r.minors+' Menor'+(r.minors!==1?'es':''):''}</div>
        <div style="font-size:15px;font-weight:700;color:#1B2A4A;margin-top:4px">$<span contenteditable="true" class="card-editable-dark">${r.price||'0'}</span> USD</div>
        ${r.notes?'<div style="font-size:10px;color:#888;margin-top:2px">'+r.notes+'</div>':''}
      </div>`;
    });
    priceHtml+=`<div style="background:linear-gradient(135deg,#1B2A4A,#2C4570);border-radius:14px;padding:14px;text-align:center;margin-bottom:14px">
      <div style="font-size:10px;color:rgba(255,255,255,.6);text-transform:uppercase;letter-spacing:1px;margin-bottom:3px">Total del grupo ¬∑ ${groupData.length} habitaciones</div>
      <div style="font-size:26px;font-weight:800;color:#fff">$<span class="card-editable" contenteditable="true">${totalGrp.toLocaleString('en-US',{minimumFractionDigits:0,maximumFractionDigits:2})}</span></div>
      <div style="font-size:11px;color:rgba(255,255,255,.6)">USD</div></div>`;
  }else if(hasPrice){
    priceHtml=`<div style="background:linear-gradient(135deg,#1B2A4A,#2C4570);border-radius:14px;padding:14px;text-align:center;margin-bottom:14px">
      <div style="font-size:10px;color:rgba(255,255,255,.6);text-transform:uppercase;letter-spacing:1px;margin-bottom:3px">Precio total</div>
      <div style="font-size:26px;font-weight:800;color:#fff">$<span class="card-editable" contenteditable="true">${precio}</span></div>
      <div style="font-size:11px;color:rgba(255,255,255,.6)">USD</div></div>`;
  }

  // First note: cleaning note if applicable
  const firstNote=cleanNote||'';

  $('#card-render').innerHTML=`<div style="width:100%;background:#fff;border-radius:20px;overflow:hidden;box-shadow:0 4px 30px rgba(0,0,0,.12);font-family:'Poppins',sans-serif">
<div style="position:relative;height:130px;background:${grad};overflow:hidden">${imgUrl?`<img src="${imgUrl}" style="width:100%;height:100%;object-fit:cover;opacity:.45" onerror="this.style.display='none'">`:''}
<div style="position:absolute;inset:0;display:flex;flex-direction:column;justify-content:flex-end;padding:14px 20px;background:linear-gradient(to top,rgba(0,0,0,.55),transparent)">
<div style="font-size:17px;font-weight:800;color:#fff;text-shadow:0 2px 6px rgba(0,0,0,.3)">${names[dest]||dest}</div></div></div>
<div style="background:#1B2A4A;color:#fff;padding:9px 20px;display:flex;justify-content:space-between;align-items:center">
<div><span style="font-size:13px;font-weight:700">‚ú® Mich Murrieta</span><span style="font-size:10px;opacity:.6;margin-left:8px">${AGENT_TITLES[dest]||''}</span></div><div><span style="font-size:9px;opacity:.5">michmurrietaviajes.com</span></div></div>
<div style="padding:20px">
${travelersHtml}
<div style="background:#FFF8F0;border-radius:12px;padding:10px 16px;margin-bottom:14px;text-align:center">
<div style="font-size:10px;color:#888;text-transform:uppercase;letter-spacing:.5px;margin-bottom:2px">üìÖ Fechas</div>
<div style="font-size:13px;font-weight:600;color:#1B2A4A">${dateLabel}</div>
${calcNights()>0?`<div style="font-size:11px;color:#E8716D;font-weight:600;margin-top:2px">${calcNights()} noches</div>`:''}</div>
<div style="display:flex;flex-direction:column;gap:7px;margin-bottom:14px;font-size:12px;color:#333">${details}
<div id="card-details-extras"></div>
</div>
<button type="button" onclick="addCardDetailLine()" style="font-size:11px;color:#E8716D;font-weight:600;background:none;border:none;cursor:pointer;padding:2px 0 8px;text-align:left">+ Agregar l√≠nea</button>
${priceHtml}
<div style="font-size:10px;color:#888;line-height:1.5;margin-bottom:4px">${condMap[dest]||''}</div>
<div style="font-size:10px;color:#888;margin-bottom:6px">Notas adicionales</div>
<div id="card-notes-container" style="display:flex;flex-direction:column;gap:6px;margin-bottom:8px">
<div contenteditable="true" class="card-note-line" style="font-size:11px;color:#555;min-height:16px;outline:none;border-bottom:1px dashed #eee;padding-bottom:4px"${firstNote?'':' data-placeholder="+ Agregar nota aqu√≠..."'}>${firstNote}</div>
</div>
<button type="button" onclick="addCardNote()" style="font-size:11px;color:#E8716D;font-weight:600;background:none;border:none;cursor:pointer;padding:4px 0;text-align:left">+ Agregar otra nota</button>
</div>
<div style="background:#FFF8F0;padding:12px 20px;display:flex;justify-content:space-between;align-items:center;border-top:1px solid #f0e8dc">
<div><div style="font-size:11px;color:#1B2A4A;font-weight:600">üì≤ +52 55 1766 6721</div><div style="font-size:9px;color:#888">michmurrietaviajes.com</div></div>
<div style="font-size:9px;color:#888;text-align:right">üì∏ @michmurrieta_viajes</div></div></div>`;
}

// ‚îÄ‚îÄ CARD: get details for a specific dest (reusable) ‚îÄ‚îÄ
function getCardDetailsFor(dest){
  let d='';
  if(dest==='orlando'){const h=v('orl-hotel');if(h)d+=`<div style="display:flex;align-items:center;gap:8px"><span>üè®</span><span>${h}</span></div>`;d+=`<div style="display:flex;align-items:center;gap:8px"><span>üéü</span><span>${v('orl-modalidad')} ¬∑ ${v('orl-dias')} d√≠as</span></div>`;if(v('orl-comidas'))d+=`<div style="display:flex;align-items:center;gap:8px"><span>üçΩ</span><span>Plan de comidas</span></div>`;if(ck('orl-kidsfree'))d+=`<div style="display:flex;align-items:center;gap:8px;color:#22c55e;font-weight:600"><span>üéâ</span><span>Kids Eat Free 2026</span></div>`}
  else if(dest==='universal'){const h=v('uni-hotel');if(h)d+=`<div style="display:flex;align-items:center;gap:8px"><span>üè®</span><span>${h}</span></div>`;d+=`<div style="display:flex;align-items:center;gap:8px"><span>üéü</span><span>Epic Universe + Universal + Islands</span></div>`;if(ck('uni-volcano'))d+=`<div style="display:flex;align-items:center;gap:8px"><span>üåã</span><span>Volcano Bay</span></div>`}
  else if(dest==='california'){const h=v('cal-hotel');if(h)d+=`<div style="display:flex;align-items:center;gap:8px"><span>üè®</span><span>${h}</span></div>`;d+=`<div style="display:flex;align-items:center;gap:8px"><span>üéü</span><span>${v('cal-ticket')} ¬∑ ${v('cal-dias')} d√≠as</span></div>`;if(v('cal-lightning'))d+=`<div style="display:flex;align-items:center;gap:8px"><span>‚ö°</span><span>Lightning Lane</span></div>`}
  else if(dest==='hollywood'){const h=v('hwd-hotel');if(h)d+=`<div style="display:flex;align-items:center;gap:8px"><span>üè®</span><span>${h}</span></div>`;const tn={general:'General Admission',express:'Express',['express-unl']:'Express Unlimited'};d+=`<div style="display:flex;align-items:center;gap:8px"><span>üéü</span><span>${tn[v('hwd-ticket')]||''} ¬∑ ${v('hwd-dias')} d√≠a${+v('hwd-dias')!==1?'s':''}</span></div>`;if(ck('hwd-nintendo'))d+=`<div style="display:flex;align-items:center;gap:8px"><span>üéÆ</span><span>Super Nintendo World</span></div>`;if(ck('hwd-vip'))d+=`<div style="display:flex;align-items:center;gap:8px;color:#f59e0b;font-weight:600"><span>üåü</span><span>VIP Experience</span></div>`}
  else if(dest==='crucero-disney'){d+=`<div style="display:flex;align-items:center;gap:8px"><span>üö¢</span><span>${v('crd-barco')}</span></div><div style="display:flex;align-items:center;gap:8px"><span>üõè</span><span>Camarote ${v('crd-camarote').toLowerCase()}</span></div>`;if(v('crd-promo'))d+=`<div style="display:flex;align-items:center;gap:8px;color:#E8716D;font-weight:600"><span>üéâ</span><span>${v('crd-promo')}</span></div>`}
  else if(dest==='crucero-otros'){if(v('cro-barco'))d+=`<div style="display:flex;align-items:center;gap:8px"><span>üö¢</span><span>${v('cro-barco')}</span></div>`}
  return d;
}

// ‚îÄ‚îÄ COMBINED CARD GENERATION ‚îÄ‚îÄ
function generateCardCombo(d1,d2){
  const nombre=v('nombre')||'Cliente',adultos=v('adultos'),minors=getMinorsCardText(),checkin=v('checkin'),checkout=v('checkout'),precio=v('precio');
  const n1=DEST_NAMES[d1]||d1,n2=DEST_NAMES[d2]||d2;
  const nights=calcNights();
  const dateLabel=`${formatDateShort(checkin)} ‚Üí ${formatDateShort(checkout)}`;
  const grad1=DEST_GRADIENTS[d1]||'linear-gradient(135deg,#E8716D,#D4605C)';
  const imgUrl=(DEST_IMAGES[d1]||'').trim();
  const det1=getCardDetailsFor(d1),det2=getCardDetailsFor(d2);
  const condMap={orlando:'‚úÖ Aparta con $200 USD ¬∑ Liquida 1 mes antes',california:'‚úÖ Aparta con $200 USD ¬∑ Liquida 1 mes antes',universal:'‚úÖ Aparta con $50 USD/persona ¬∑ Liquida 45 d√≠as antes',hollywood:'‚úÖ Precios sujetos a disponibilidad','crucero-disney':'‚úÖ Aparta con 10% ¬∑ Liquida 3 meses antes','crucero-otros':'‚úÖ Aparta con 20% ¬∑ Liquida 3 meses antes',nickelodeon:'‚úÖ Aparta con $200 USD',xcaret:'‚úÖ Aparta con $200 USD',paris:''};
  const group=isGroupMode(),gd=group?getGroupData():null;
  const color1=(DEST_GRADIENTS[d1]||'#E8716D').match(/#[0-9a-fA-F]{6}/)?.[0]||'#E8716D';
  const color2=(DEST_GRADIENTS[d2]||'#0066cc').match(/#[0-9a-fA-F]{6}/)?.[0]||'#0066cc';

  // Travelers section
  let travelersHtml='';
  if(group){
    travelersHtml=`<div style="display:flex;gap:12px;margin-bottom:16px;padding-bottom:14px;border-bottom:1px solid #f0f0f0;align-items:center;justify-content:center">
      <div style="font-size:18px">üë•</div><div style="font-size:12px;font-weight:700;color:#1B2A4A">Cotizaci√≥n grupal ¬∑ ${gd.length} habitaciones</div></div>`;
  }else{
    travelersHtml=`<div style="display:flex;gap:16px;margin-bottom:16px;padding-bottom:14px;border-bottom:1px solid #f0f0f0">
      <div style="text-align:center;flex:1"><div style="font-size:22px">üë•</div><div style="font-size:12px;font-weight:600;color:#1B2A4A">${adultos} Adulto${+adultos!==1?'s':''}</div></div>
      ${getMinorsTotal()>0?`<div style="text-align:center;flex:1"><div style="font-size:22px">üë∂</div><div style="font-size:11px;font-weight:600;color:#1B2A4A">${minors}</div></div>`:''}</div>`;
  }

  // Park blocks
  let park1Html='',park2Html='',totalHtml='';
  if(group){
    let sub1=0,sub2=0;
    // Park 1 block with room details
    let rooms1='';
    gd.forEach((r,i)=>{
      const p=parseFloat((r.price1||'0').replace(/,/g,''))||0;sub1+=p;
      rooms1+=`<div style="background:rgba(255,255,255,.7);border-radius:8px;padding:8px 10px;margin-top:6px">
        <div style="font-size:10px;font-weight:700;color:#1B2A4A">üè∑ Hab. ${i+1} ¬∑ <span contenteditable="true" class="card-editable-dark">${r.name}</span></div>
        <div style="font-size:10px;color:#666">${r.adults} Adulto${r.adults!==1?'s':''}${r.minors>0?' ¬∑ '+r.minors+' Menor'+(r.minors!==1?'es':''):''}</div>
        <div style="font-size:12px;font-weight:700;color:#1B2A4A;margin-top:2px">$<span contenteditable="true" class="card-editable-dark">${r.price1||'0'}</span> USD</div>
      </div>`;
    });
    if(gd.length>1)rooms1+=`<div style="font-size:11px;font-weight:700;color:${color1};margin-top:6px;text-align:right">Subtotal: $<span contenteditable="true" class="card-editable-dark">${formatUSD(sub1)}</span> USD</div>`;
    park1Html=`<div style="background:#f8f4ff;border-radius:12px;padding:12px 14px;margin-bottom:10px;border-left:3px solid ${color1}">
<div style="font-size:11px;font-weight:700;color:#1B2A4A;margin-bottom:6px">${n1}</div>
<div style="display:flex;flex-direction:column;gap:5px;font-size:11px;color:#333">${det1}</div>
${rooms1}</div>`;
    // Park 2 block with room details
    let rooms2='';
    gd.forEach((r,i)=>{
      const p=parseFloat((r.price2||'0').replace(/,/g,''))||0;sub2+=p;
      rooms2+=`<div style="background:rgba(255,255,255,.7);border-radius:8px;padding:8px 10px;margin-top:6px">
        <div style="font-size:10px;font-weight:700;color:#1B2A4A">üè∑ Hab. ${i+1} ¬∑ <span contenteditable="true" class="card-editable-dark">${r.name}</span></div>
        <div style="font-size:10px;color:#666">${r.adults} Adulto${r.adults!==1?'s':''}${r.minors>0?' ¬∑ '+r.minors+' Menor'+(r.minors!==1?'es':''):''}</div>
        <div style="font-size:12px;font-weight:700;color:#1B2A4A;margin-top:2px">$<span contenteditable="true" class="card-editable-dark">${r.price2||'0'}</span> USD</div>
      </div>`;
    });
    if(gd.length>1)rooms2+=`<div style="font-size:11px;font-weight:700;color:${color2};margin-top:6px;text-align:right">Subtotal: $<span contenteditable="true" class="card-editable-dark">${formatUSD(sub2)}</span> USD</div>`;
    park2Html=`<div style="background:#f0f8ff;border-radius:12px;padding:12px 14px;margin-bottom:14px;border-left:3px solid ${color2}">
<div style="font-size:11px;font-weight:700;color:#1B2A4A;margin-bottom:6px">${n2}</div>
<div style="display:flex;flex-direction:column;gap:5px;font-size:11px;color:#333">${det2}</div>
${rooms2}</div>`;
    const grandTotal=sub1+sub2;
    totalHtml=`<div style="background:linear-gradient(135deg,#1B2A4A,#2C4570);border-radius:14px;padding:14px;text-align:center;margin-bottom:14px">
      <div style="font-size:10px;color:rgba(255,255,255,.6);text-transform:uppercase;letter-spacing:1px;margin-bottom:3px">Total ¬∑ ${gd.length} habitaciones</div>
      <div style="font-size:26px;font-weight:800;color:#fff">$<span class="card-editable" contenteditable="true">${formatUSD(grandTotal)}</span></div>
      <div style="font-size:11px;color:rgba(255,255,255,.6)">USD</div></div>`;
  }else{
    const p1=v('precio-tramo1'),p2=v('precio-tramo2');
    park1Html=`<div style="background:#f8f4ff;border-radius:12px;padding:12px 14px;margin-bottom:10px;border-left:3px solid ${color1}">
<div style="font-size:11px;font-weight:700;color:#1B2A4A;margin-bottom:6px">${n1}</div>
<div style="display:flex;flex-direction:column;gap:5px;font-size:11px;color:#333">${det1}</div>
${p1?`<div style="font-size:12px;font-weight:700;color:#1B2A4A;margin-top:6px">üí∏ $${p1} USD</div>`:''}
</div>`;
    park2Html=`<div style="background:#f0f8ff;border-radius:12px;padding:12px 14px;margin-bottom:14px;border-left:3px solid ${color2}">
<div style="font-size:11px;font-weight:700;color:#1B2A4A;margin-bottom:6px">${n2}</div>
<div style="display:flex;flex-direction:column;gap:5px;font-size:11px;color:#333">${det2}</div>
${p2?`<div style="font-size:12px;font-weight:700;color:#1B2A4A;margin-top:6px">üí∏ $${p2} USD</div>`:''}
</div>`;
    totalHtml=precio?`<div style="background:linear-gradient(135deg,#1B2A4A,#2C4570);border-radius:14px;padding:14px;text-align:center;margin-bottom:14px">
<div style="font-size:10px;color:rgba(255,255,255,.6);text-transform:uppercase;letter-spacing:1px;margin-bottom:3px">Precio total</div>
<div style="font-size:26px;font-weight:800;color:#fff">$<span class="card-editable" contenteditable="true">${precio}</span></div>
<div style="font-size:11px;color:rgba(255,255,255,.6)">USD</div></div>`:'';
  }

  const firstNote=group?'':'';

  $('#card-render').innerHTML=`<div style="width:100%;background:#fff;border-radius:20px;overflow:hidden;box-shadow:0 4px 30px rgba(0,0,0,.12);font-family:'Poppins',sans-serif">
<div style="position:relative;height:130px;background:${grad1};overflow:hidden">${imgUrl?`<img src="${imgUrl}" style="width:100%;height:100%;object-fit:cover;opacity:.45" onerror="this.style.display='none'" crossorigin="anonymous">`:''}
<div style="position:absolute;inset:0;display:flex;flex-direction:column;justify-content:flex-end;padding:14px 20px;background:linear-gradient(to top,rgba(0,0,0,.55),transparent)">
<div style="font-size:15px;font-weight:800;color:#fff;text-shadow:0 2px 6px rgba(0,0,0,.3)">üîÄ Viaje Combinado</div>
<div style="font-size:11px;color:rgba(255,255,255,.8);margin-top:2px">${n1} + ${n2}</div></div></div>
<div style="background:#1B2A4A;color:#fff;padding:9px 20px;display:flex;justify-content:space-between;align-items:center">
<div><span style="font-size:13px;font-weight:700">‚ú® Mich Murrieta</span><span style="font-size:10px;opacity:.6;margin-left:8px">${AGENT_TITLES[d1]||''}</span></div><div><span style="font-size:9px;opacity:.5">michmurrietaviajes.com</span></div></div>
<div style="padding:20px">
${travelersHtml}
<div style="background:#FFF8F0;border-radius:12px;padding:10px 16px;margin-bottom:14px;text-align:center">
<div style="font-size:10px;color:#888;text-transform:uppercase;letter-spacing:.5px;margin-bottom:2px">üìÖ Fechas</div>
<div style="font-size:13px;font-weight:600;color:#1B2A4A">${dateLabel}</div>
${nights>0?`<div style="font-size:11px;color:#E8716D;font-weight:600;margin-top:2px">${nights} noches</div>`:''}</div>
${park1Html}
${park2Html}
${totalHtml}
<div style="font-size:10px;color:#888;line-height:1.5;margin-bottom:4px">${condMap[d1]||''}</div>
${condMap[d2]&&condMap[d2]!==condMap[d1]?`<div style="font-size:10px;color:#888;line-height:1.5;margin-bottom:4px">${condMap[d2]}</div>`:''}
<div style="font-size:10px;color:#888;margin-bottom:6px">Notas adicionales</div>
<div id="card-notes-container" style="display:flex;flex-direction:column;gap:6px;margin-bottom:8px">
<div contenteditable="true" class="card-note-line" style="font-size:11px;color:#555;min-height:16px;outline:none;border-bottom:1px dashed #eee;padding-bottom:4px" data-placeholder="+ Agregar nota aqu√≠..."></div>
</div>
<button type="button" onclick="addCardNote()" style="font-size:11px;color:#E8716D;font-weight:600;background:none;border:none;cursor:pointer;padding:4px 0;text-align:left">+ Agregar otra nota</button>
</div>
<div style="background:#FFF8F0;padding:12px 20px;display:flex;justify-content:space-between;align-items:center;border-top:1px solid #f0e8dc">
<div><div style="font-size:11px;color:#1B2A4A;font-weight:600">üì≤ +52 55 1766 6721</div><div style="font-size:9px;color:#888">michmurrietaviajes.com</div></div>
<div style="font-size:9px;color:#888;text-align:right">üì∏ @michmurrieta_viajes</div></div></div>`}

// ‚îÄ‚îÄ TABS ‚îÄ‚îÄ
function switchTab(t){$('#tab-texto').classList.toggle('active',t==='texto');$('#tab-tarjeta').classList.toggle('active',t==='tarjeta');$('#panel-texto').style.display=t==='texto'?'':'none';$('#panel-tarjeta').style.display=t==='tarjeta'?'':'none'}

// ‚îÄ‚îÄ ACTIONS ‚îÄ‚îÄ
function addCardNote(){const c=$('#card-notes-container');if(!c)return;const d=document.createElement('div');d.contentEditable='true';d.className='card-note-line';d.style.cssText='font-size:11px;color:#555;min-height:16px;outline:none;border-bottom:1px dashed #eee;padding-bottom:4px';d.setAttribute('data-placeholder','+ Agregar nota aqu√≠...');c.appendChild(d);d.focus();}
function addCardDetailLine(){const c=$('#card-details-extras');if(!c)return;const d=document.createElement('div');d.style.cssText='display:flex;align-items:center;gap:8px';d.innerHTML=`<span>‚Ä¢</span><span class="card-editable-dark" contenteditable="true" style="flex:1;min-width:0;min-height:1em" data-placeholder="Park Hopper, Lightning Lane, etc."></span>`;c.appendChild(d);d.querySelector('[contenteditable]').focus();}

// ‚îÄ‚îÄ HOTEL CLEANING NOTE ‚îÄ‚îÄ
function getHotelCleaningNote(dest){
  const selMap={orlando:'orl-hotel',california:'cal-hotel',paris:'par-hotel'};
  const selId=selMap[dest];if(!selId)return '';
  const h=v(selId);if(!h)return '';
  const info=HOTEL_CATS[h];if(!info)return '';
  const cat=info.cat;
  if(cat==='Value'||cat==='Moderate'||cat==='Est√°ndar'||cat==='Prime Value')return 'üßπ La limpieza de habitaci√≥n se realiza un d√≠a s√≠ y un d√≠a no. Para limpieza diaria, es necesario hospedarse en un hotel de categor√≠a Deluxe.';
  if(cat==='Deluxe'||cat==='Disney'||cat==='Premier'||cat==='5 Diamantes')return 'üßπ Limpieza diaria de habitaci√≥n incluida.';
  return '';
}

// ‚îÄ‚îÄ GROUP RESERVATIONS ‚îÄ‚îÄ
function isGroupMode(){return(parseInt(v('habitaciones'))||1)>1}

function updateGroupReservations(){
  const n=parseInt(v('habitaciones'))||1;
  const container=$('#group-reservations');
  const list=$('#group-res-list');
  const priceRel=$('#precio').closest('.relative');
  const combo=isCombo();
  if(n<=1){container.style.display='none';if(priceRel)priceRel.style.display='';return}
  container.style.display='';if(priceRel)priceRel.style.display='none';
  if(combo)$('#combo-pricing').style.display='none';
  const d1=v('destino'),d2=v('destino-2');
  const lbl1=combo?(DEST_NAMES[d1]||'Tramo 1').replace(/^[^\s]+\s/,''):'';
  const lbl2=combo?(DEST_NAMES[d2]||'Tramo 2').replace(/^[^\s]+\s/,''):'';
  let html='';
  for(let i=1;i<=n;i++){
    html+=`<div class="group-res-block" style="background:#FFF8F0;border-radius:14px;padding:16px;margin-bottom:12px;border:1.5px solid #FFE8CC">
      <div style="font-weight:700;color:#1B2A4A;font-size:14px;margin-bottom:10px">üè∑ Reservaci√≥n ${i}</div>
      <input id="grp-name-${i}" type="text" placeholder="Nombre(s) de viajeros" class="fi-input mb-2" value="${i===1?(v('nombre')||''):''}">
      <div class="grid grid-cols-2 gap-2 mb-2">
        <div><label class="text-[11px] text-gray-400">Adultos</label><input id="grp-adults-${i}" type="number" min="1" value="${i===1?(v('adultos')||2):2}" class="fi-input"></div>
        <div><label class="text-[11px] text-gray-400">Menores</label><input id="grp-minors-${i}" type="number" min="0" value="0" class="fi-input"></div>
      </div>
      ${combo?`<div class="grid grid-cols-2 gap-2 mb-2">
        <div><label class="text-[11px] text-gray-400">üí∞ ${lbl1}</label><input id="grp-price1-${i}" type="text" placeholder="0" class="fi-input" oninput="updateGroupComboTotal()"></div>
        <div><label class="text-[11px] text-gray-400">üí∞ ${lbl2}</label><input id="grp-price2-${i}" type="text" placeholder="0" class="fi-input" oninput="updateGroupComboTotal()"></div>
      </div>`:`<div class="mb-2"><label class="text-[11px] text-gray-400">Precio USD</label><input id="grp-price-${i}" type="text" placeholder="0" class="fi-input"></div>`}
      <input id="grp-notes-${i}" type="text" placeholder="Notas de esta reservaci√≥n (opcional)" class="fi-input">
    </div>`;
  }
  list.innerHTML=html;
}
function updateGroupComboTotal(){
  const n=parseInt(v('habitaciones'))||1;let total=0;
  for(let i=1;i<=n;i++){
    const a=parseFloat(((document.getElementById('grp-price1-'+i)||{}).value||'0').replace(/,/g,''))||0;
    const b=parseFloat(((document.getElementById('grp-price2-'+i)||{}).value||'0').replace(/,/g,''))||0;
    total+=a+b;
  }
  if(total>0)$('#precio').value=total.toLocaleString('en-US',{minimumFractionDigits:2,maximumFractionDigits:2});
}

function getGroupData(){
  const n=parseInt(v('habitaciones'))||1;const res=[];const combo=isCombo();
  for(let i=1;i<=n;i++){
    const r={
      name:(document.getElementById('grp-name-'+i)||{}).value?.trim()||'Reservaci√≥n '+i,
      adults:parseInt((document.getElementById('grp-adults-'+i)||{}).value)||2,
      minors:parseInt((document.getElementById('grp-minors-'+i)||{}).value)||0,
      notes:(document.getElementById('grp-notes-'+i)||{}).value?.trim()||''
    };
    if(combo){
      r.price1=(document.getElementById('grp-price1-'+i)||{}).value?.trim()||'0';
      r.price2=(document.getElementById('grp-price2-'+i)||{}).value?.trim()||'0';
      const p1=parseFloat(r.price1.replace(/,/g,''))||0;
      const p2=parseFloat(r.price2.replace(/,/g,''))||0;
      r.price=(p1+p2).toLocaleString('en-US',{minimumFractionDigits:0,maximumFractionDigits:2});
    }else{
      r.price=(document.getElementById('grp-price-'+i)||{}).value?.trim()||'0';
    }
    res.push(r);
  }
  return res;
}

function copiarTexto(){const raw=waHtmlToText($('#wa-preview'));navigator.clipboard.writeText(raw).then(()=>showToast('Copiado al portapapeles ‚úÖ'))}
function descargarImagen(){const card=$('#card-render');card.classList.add('capturing');showToast('Generando imagen...');html2canvas(card,{scale:2,backgroundColor:null,useCORS:true,logging:false}).then(canvas=>{card.classList.remove('capturing');const a=document.createElement('a');a.download=`Cotizacion_${(v('nombre')||'cliente').replace(/\s+/g,'_')}_${v('destino')}.png`;a.href=canvas.toDataURL('image/png');a.click();showToast('Imagen descargada ‚úÖ')}).catch(()=>{card.classList.remove('capturing')})}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// MAIN TAB SWITCHING
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function switchMainTab(tab){
  document.getElementById('tab-cotizador-content').style.display=tab==='cotizador'?'':'none';
  document.getElementById('tab-itinerario-content').style.display=tab==='itinerario'?'':'none';
  document.getElementById('mtab-cotizador').classList.toggle('active',tab==='cotizador');
  document.getElementById('mtab-itinerario').classList.toggle('active',tab==='itinerario');
  window.scrollTo({top:0,behavior:'smooth'});
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ITINERARY TEMPLATES
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const IT_IMAGES={
  'disney-world':'https://images.unsplash.com/photo-1597466599360-3b9775841aec?w=1200&h=600&fit=crop&q=80',
  'disneyland-cal':'https://images.unsplash.com/photo-1587162146766-e06b1189b907?w=1200&h=600&fit=crop&q=80',
  'crucero-disney':'https://images.unsplash.com/photo-1548574505-5e239809ee19?w=1200&h=600&fit=crop&q=80',
  'universal':'https://images.unsplash.com/photo-1581084324659-bc65fa92df5c?w=1200&h=600&fit=crop&q=80'
};
const IT_GRADIENTS={
  'disney-world':'linear-gradient(135deg,#1a1a6e,#4b2583,#c33f91)',
  'disneyland-cal':'linear-gradient(135deg,#ff6b35,#ff9a56,#ffd700)',
  'crucero-disney':'linear-gradient(135deg,#001a33,#003d66,#0099cc)',
  'universal':'linear-gradient(135deg,#003366,#0066cc,#00ccff)'
};
const DAY_COLORS=['#E8716D','#7C3AED','#0D9488','#2563EB','#D97706','#059669','#E11D48','#6366F1','#14B8A6','#F59E0B','#8B5CF6','#EC4899'];

const IT_TEMPLATES={
'disney-world-5':{
  title:'Aventura M√°gica en Disney World ‚ú®',
  hotel:"Disney's Art of Animation Resort",
  cover:IT_IMAGES['disney-world'],
  gradient:IT_GRADIENTS['disney-world'],
  docs:[
    {icon:'üì±',title:'Descargar My Disney Experience',desc:'App oficial para reservaciones, filas y mapa'},
    {icon:'üé´',title:'Vincular entradas a la app',desc:'Tener los boletos listos en la app antes de llegar'},
    {icon:'üìã',title:'Check-in online del hotel',desc:'Disponible 60 d√≠as antes'},
    {icon:'üçΩÔ∏è',title:'Reservaciones de restaurantes',desc:'Se abren 60 d√≠as antes ‚Äî reservar con anticipaci√≥n'},
    {icon:'‚ö°',title:'Lightning Lane',desc:'Se reserva desde la app el mismo d√≠a'}
  ],
  days:[
    {title:'Llegada a Orlando',icon:'‚úàÔ∏è',type:'travel',
     acts:[
       {t:'',d:'‚úàÔ∏è Llegada al Aeropuerto Internacional de Orlando (MCO)',i:''},
       {t:'',d:'üöê Traslado al hotel (Uber/Lyft o servicio contratado)',i:''},
       {t:'',d:'üè® Check-in en el hotel ‚Äî recoger MagicBands si aplica',i:''},
       {t:'',d:'üõçÔ∏è Explorar Disney Springs ‚Äî tiendas, restaurantes y ambiente Disney',i:''},
       {t:'',d:'üçΩÔ∏è Cena en Disney Springs (T-REX Cafe, The Boathouse o similar)',i:''}
     ],
     tips:['Descarga la app My Disney Experience y vincula tus entradas ANTES de llegar','Si llegas temprano, aprovecha para comprar souvenirs en Disney Springs sin prisa','Pide tu MagicBand+ personalizado con anticipaci√≥n en la app','Acu√©state temprano ‚Äî ma√±ana arranca la magia temprano']},
    {title:'Magic Kingdom üè∞',icon:'üè∞',type:'park',
     acts:[
       {t:'7:00 AM',d:'‚è∞ Despertar y prepararse ‚Äî desayuno r√°pido',i:''},
       {t:'7:30 AM',d:'üöå Tomar transporte al parque (bus, monorriel o ferry)',i:''},
       {t:'8:00 AM',d:'üéüÔ∏è Entrada anticipada (30 min antes para hu√©spedes Disney)',i:''},
       {t:'8:00 AM',d:'üé¢ Directo a Tiana\'s Bayou Adventure y Seven Dwarfs Mine Train',i:''},
       {t:'9:30 AM',d:'üöÄ TRON Lightcycle Run (fila virtual o Lightning Lane)',i:''},
       {t:'10:30 AM',d:'üé† Peter Pan\'s Flight + It\'s a Small World + Haunted Mansion',i:''},
       {t:'12:30 PM',d:'üçΩÔ∏è Almuerzo (reservaci√≥n en Be Our Guest o Columbia Harbour House)',i:''},
       {t:'2:00 PM',d:'üè¥‚Äç‚ò†Ô∏è Pirates of the Caribbean + Jungle Cruise + Thunder Mountain',i:''},
       {t:'3:30 PM',d:'üé™ Festival of Fantasy Parade (buscar lugar 20 min antes)',i:''},
       {t:'4:30 PM',d:'üè∞ Foto en el Castillo de Cenicienta + explorar tiendas Main Street',i:''},
       {t:'6:00 PM',d:'üçï Cena (Cosmic Ray\'s o reservaci√≥n en restaurante)',i:''},
       {t:'7:00 PM',d:'üé¢ Re-rides de atracciones favoritas con menos fila',i:''},
       {t:'9:00 PM',d:'üéÜ Happily Ever After ‚Äî Show de fuegos artificiales',i:''}
     ],
     tips:['Llega 30 min antes de apertura ‚Äî la primera hora es la menos concurrida','TRON tiene Virtual Queue ‚Äî reserva a las 7:00 AM exactas en la app','El mejor lugar para fuegos artificiales es al inicio de Main Street frente al castillo','Si tienes ni√±os peque√±os, haz Rider Switch en las monta√±as rusas','Usa Mobile Order en la app para pedir comida r√°pida sin esperar fila']},
    {title:'EPCOT üåé',icon:'üåé',type:'park',
     acts:[
       {t:'8:00 AM',d:'üéüÔ∏è Entrada anticipada ‚Äî directo a Guardians of the Galaxy: Cosmic Rewind',i:''},
       {t:'9:00 AM',d:'üßä Frozen Ever After (ir temprano, siempre tiene fila)',i:''},
       {t:'10:00 AM',d:'üöÄ Test Track + Mission: SPACE + Journey of Water',i:''},
       {t:'11:30 AM',d:'üåé Inicio del recorrido por World Showcase ‚Äî M√©xico y Noruega',i:''},
       {t:'12:30 PM',d:'üçΩÔ∏è Almuerzo en World Showcase (San Angel Inn en M√©xico o Le Cellier en Canad√°)',i:''},
       {t:'2:00 PM',d:'üóæ Continuar World Showcase ‚Äî Jap√≥n, Marruecos, Francia, UK',i:''},
       {t:'3:30 PM',d:'üç¶ Snacks del mundo ‚Äî croissant en Francia, gelato en Italia',i:''},
       {t:'5:00 PM',d:'üé≠ Remy\'s Ratatouille Adventure en el pabell√≥n de Francia',i:''},
       {t:'6:30 PM',d:'üçΩÔ∏è Cena en World Showcase',i:''},
       {t:'9:00 PM',d:'üéÜ Luminous: The Symphony of Us ‚Äî Show nocturno en la laguna',i:''}
     ],
     tips:['Guardians of the Galaxy tiene Virtual Queue ‚Äî reserva a las 7:00 AM','World Showcase abre a las 11:00 AM ‚Äî aprovecha la ma√±ana en Future World','Los snacks de los pabellones son una experiencia imperdible ‚Äî prueba de todo','EPCOT es enorme ‚Äî usa zapatos c√≥modos, vas a caminar mucho','Si hay festival (Food & Wine, Flower & Garden), prueba los platillos especiales']},
    {title:'Hollywood Studios üé¨',icon:'üé¨',type:'park',
     acts:[
       {t:'8:00 AM',d:'üéüÔ∏è Entrada anticipada ‚Äî directo a Star Wars: Rise of the Resistance',i:''},
       {t:'9:15 AM',d:'üß∏ Slinky Dog Dash en Toy Story Land',i:''},
       {t:'10:00 AM',d:'üóº Tower of Terror + Rock \'n\' Roller Coaster',i:''},
       {t:'11:00 AM',d:'ü§† Toy Story Mania + Alien Swirling Saucers',i:''},
       {t:'12:00 PM',d:'üçΩÔ∏è Almuerzo (Woody\'s Lunch Box o Backlot Express)',i:''},
       {t:'1:00 PM',d:'üöÄ Millennium Falcon: Smugglers Run en Galaxy\'s Edge',i:''},
       {t:'2:00 PM',d:'üî´ Explorar Star Wars: Galaxy\'s Edge ‚Äî cantina Oga\'s, tiendas',i:''},
       {t:'3:30 PM',d:'üé≠ Indiana Jones Stunt Spectacular o shows en vivo',i:''},
       {t:'5:00 PM',d:'üì∏ Fotos en Hollywood Boulevard + tiendas',i:''},
       {t:'6:30 PM',d:'üçΩÔ∏è Cena (50\'s Prime Time Caf√© o reservaci√≥n)',i:''},
       {t:'8:00 PM',d:'üéÜ Fantasmic! ‚Äî Show nocturno (llegar 45 min antes para buen lugar)',i:''}
     ],
     tips:['Rise of the Resistance es LA atracci√≥n ‚Äî ve PRIMERO al abrir','En Galaxy\'s Edge puedes construir tu propia espada l√°ser ($249 USD) ‚Äî experiencia √∫nica','Slinky Dog Dash tiene filas largas TODO el d√≠a ‚Äî hazlo temprano','Para Fantasmic! llega al menos 45 min antes para buen asiento','Si llueve, Tower of Terror y las atracciones techadas son tu mejor opci√≥n']},
    {title:'Animal Kingdom ü¶Å',icon:'ü¶Å',type:'park',
     acts:[
       {t:'7:30 AM',d:'üéüÔ∏è Entrada anticipada ‚Äî directo a Flight of Passage en Pandora',i:''},
       {t:'8:30 AM',d:'üåä Na\'vi River Journey en Pandora',i:''},
       {t:'9:30 AM',d:'ü¶Å Kilimanjaro Safaris (animales m√°s activos por la ma√±ana)',i:''},
       {t:'10:30 AM',d:'üé¢ Expedition Everest',i:''},
       {t:'11:30 AM',d:'ü¶ï Dinosaur + Kali River Rapids',i:''},
       {t:'12:30 PM',d:'üçΩÔ∏è Almuerzo (Flame Tree Barbecue o Satu\'li Canteen en Pandora)',i:''},
       {t:'2:00 PM',d:'üå≥ Explorar los senderos ‚Äî Maharajah Jungle Trek, Gorilla Falls',i:''},
       {t:'3:00 PM',d:'üé≠ Finding Nemo: The Big Blue...and Beyond! (show)',i:''},
       {t:'4:00 PM',d:'üåü Regreso al hotel ‚Äî tarde de piscina y descanso',i:''},
       {t:'6:00 PM',d:'üçΩÔ∏è Cena fuera de parques o en Disney Springs',i:''}
     ],
     tips:['Flight of Passage es la mejor atracci√≥n de TODOS los parques ‚Äî vale cualquier espera','El safari es MUCHO mejor por la ma√±ana ‚Äî los animales est√°n activos y visibles','Animal Kingdom cierra m√°s temprano que los dem√°s parques ‚Äî planea tu tarde libre','Pandora de noche es espectacular ‚Äî si el parque cierra tarde, qu√©date','Kali River Rapids te moja MUCHO ‚Äî lleva poncho o cambio de ropa']},
    {title:'D√≠a libre ¬∑ Disney Springs üõçÔ∏è',icon:'üå¥',type:'free',
     acts:[
       {t:'9:00 AM',d:'üò¥ Despertar sin prisa ‚Äî desayuno relajado',i:''},
       {t:'10:00 AM',d:'üèä Ma√±ana de piscina en el hotel ‚Äî disfrutar las instalaciones',i:''},
       {t:'12:00 PM',d:'üçΩÔ∏è Almuerzo en el hotel o en Disney Springs',i:''},
       {t:'2:00 PM',d:'üõçÔ∏è Disney Springs ‚Äî tiendas, World of Disney, LEGO Store',i:''},
       {t:'4:00 PM',d:'üé≥ Actividades opcionales: boliche Splitsville o AMC Cines',i:''},
       {t:'6:00 PM',d:'üçΩÔ∏è Cena especial ‚Äî The Boathouse, Morimoto Asia o Wine Bar George',i:''},
       {t:'8:00 PM',d:'üéÜ Paseo nocturno por Disney Springs ‚Äî ambiente y m√∫sica en vivo',i:''}
     ],
     tips:['Es importante tener un d√≠a de descanso ‚Äî los pies y el cuerpo lo agradecer√°n','Disney Springs no requiere entrada ‚Äî es gratis','Estacionamiento gratuito en Disney Springs','Las tiendas de Pin Trading y Bibbidi Bobbidi Boutique son experiencias en s√≠','Si quieres un d√≠a extra de parque, puedes ir a revisitar tu favorito']},
    {title:'Check-out y regreso ‚úàÔ∏è',icon:'‚úàÔ∏è',type:'travel',
     acts:[
       {t:'7:00 AM',d:'üß≥ Empacar y preparar maletas',i:''},
       {t:'8:00 AM',d:'üç≥ √öltimo desayuno en el hotel',i:''},
       {t:'9:00 AM',d:'üè® Check-out del hotel (dejar maletas en Bell Services si el vuelo es tarde)',i:''},
       {t:'10:00 AM',d:'üõçÔ∏è √öltimas compras o visita r√°pida a un parque si hay tiempo',i:''},
       {t:'',d:'üöê Traslado al aeropuerto MCO',i:''},
       {t:'',d:'‚úàÔ∏è Vuelo de regreso a casa ‚Äî ¬°llenos de magia! üè†‚ú®',i:''}
     ],
     tips:['Bell Services puede guardar tus maletas gratis si el vuelo es en la tarde','Llega al aeropuerto al menos 2.5 horas antes para vuelos internacionales','Las tiendas del aeropuerto MCO tienen souvenirs Disney de √∫ltimo minuto','Si compraste mucho, considera pagar maleta extra vs enviar por paqueter√≠a']}
  ]
},

'disney-world-7':{
  title:'Semana M√°gica Completa en Disney World ‚ú®',
  hotel:"Disney's Caribbean Beach Resort",
  cover:IT_IMAGES['disney-world'],
  gradient:IT_GRADIENTS['disney-world'],
  docs:[
    {icon:'üì±',title:'Descargar My Disney Experience',desc:'App oficial ‚Äî indispensable'},
    {icon:'üé´',title:'Vincular entradas a la app',desc:'Tener boletos listos antes de llegar'},
    {icon:'üìã',title:'Check-in online del hotel',desc:'Disponible 60 d√≠as antes'},
    {icon:'üçΩÔ∏è',title:'Reservaciones de restaurantes',desc:'Reservar 60 d√≠as antes'},
    {icon:'‚ö°',title:'Lightning Lane',desc:'Se reserva el mismo d√≠a desde la app'},
    {icon:'üíß',title:'Info parques de agua',desc:'Typhoon Lagoon o Blizzard Beach'}
  ],
  days:[
    {title:'Llegada a Orlando',icon:'‚úàÔ∏è',type:'travel',
     acts:[{t:'',d:'‚úàÔ∏è Llegada al aeropuerto MCO',i:''},{t:'',d:'üöê Traslado al hotel',i:''},{t:'',d:'üè® Check-in y descanso',i:''},{t:'',d:'üõçÔ∏è Disney Springs ‚Äî cena y paseo nocturno',i:''}],
     tips:['Descarga My Disney Experience antes de llegar','Pide tus MagicBands personalizados con anticipaci√≥n']},
    {title:'Magic Kingdom üè∞',icon:'üè∞',type:'park',
     acts:[{t:'7:30 AM',d:'üöå Transporte al parque',i:''},{t:'8:00 AM',d:'üéüÔ∏è Entrada anticipada ‚Äî Tiana\'s Bayou Adventure + Seven Dwarfs Mine Train',i:''},{t:'9:30 AM',d:'üöÄ TRON Lightcycle Run',i:''},{t:'10:30 AM',d:'üé† Fantasyland: Peter Pan, Small World, Haunted Mansion',i:''},{t:'12:30 PM',d:'üçΩÔ∏è Almuerzo',i:''},{t:'2:00 PM',d:'üè¥‚Äç‚ò†Ô∏è Adventureland + Frontierland: Pirates, Jungle Cruise, Thunder Mountain',i:''},{t:'3:30 PM',d:'üé™ Festival of Fantasy Parade',i:''},{t:'6:00 PM',d:'üçï Cena',i:''},{t:'9:00 PM',d:'üéÜ Happily Ever After',i:''}],
     tips:['TRON Virtual Queue a las 7:00 AM','Primer hora del parque = menos filas','Festival of Fantasy es a las 3:00 PM ‚Äî busca lugar 20 min antes']},
    {title:'EPCOT üåé',icon:'üåé',type:'park',
     acts:[{t:'8:00 AM',d:'üéüÔ∏è Entrada anticipada ‚Äî Guardians of the Galaxy: Cosmic Rewind',i:''},{t:'9:00 AM',d:'üßä Frozen Ever After',i:''},{t:'10:00 AM',d:'üöÄ Test Track + Mission: SPACE',i:''},{t:'11:00 AM',d:'üåé World Showcase ‚Äî recorrido por los pa√≠ses',i:''},{t:'12:30 PM',d:'üçΩÔ∏è Almuerzo en World Showcase',i:''},{t:'2:00 PM',d:'üç¶ Snacks del mundo + m√°s pabellones',i:''},{t:'5:00 PM',d:'üé≠ Remy\'s Ratatouille Adventure',i:''},{t:'7:00 PM',d:'üçΩÔ∏è Cena',i:''},{t:'9:00 PM',d:'üéÜ Luminous: The Symphony of Us',i:''}],
     tips:['Guardians Virtual Queue a las 7:00 AM','World Showcase abre a las 11 AM','Prueba snacks de cada pa√≠s ‚Äî es la mejor experiencia']},
    {title:'Hollywood Studios üé¨',icon:'üé¨',type:'park',
     acts:[{t:'8:00 AM',d:'üéüÔ∏è Entrada anticipada ‚Äî Rise of the Resistance',i:''},{t:'9:15 AM',d:'üß∏ Slinky Dog Dash',i:''},{t:'10:00 AM',d:'üóº Tower of Terror + Rock\'n\'Roller Coaster',i:''},{t:'11:30 AM',d:'ü§† Toy Story Mania',i:''},{t:'12:30 PM',d:'üçΩÔ∏è Almuerzo',i:''},{t:'1:30 PM',d:'üöÄ Galaxy\'s Edge: Millennium Falcon + Oga\'s Cantina',i:''},{t:'4:00 PM',d:'üé≠ Shows en vivo',i:''},{t:'6:30 PM',d:'üçΩÔ∏è Cena',i:''},{t:'8:00 PM',d:'üéÜ Fantasmic!',i:''}],
     tips:['Rise of the Resistance es imprescindible ‚Äî ve al abrir','Galaxy\'s Edge = construir tu sable l√°ser es experiencia √öNICA','Para Fantasmic! llega 45 min antes']},
    {title:'Animal Kingdom ü¶Å',icon:'ü¶Å',type:'park',
     acts:[{t:'7:30 AM',d:'üéüÔ∏è Entrada anticipada ‚Äî Flight of Passage',i:''},{t:'8:30 AM',d:'üåä Na\'vi River Journey',i:''},{t:'9:30 AM',d:'ü¶Å Kilimanjaro Safaris',i:''},{t:'10:30 AM',d:'üé¢ Expedition Everest',i:''},{t:'12:00 PM',d:'üçΩÔ∏è Almuerzo en Satu\'li Canteen',i:''},{t:'1:30 PM',d:'ü¶ï Dinosaur + Kali River Rapids',i:''},{t:'3:00 PM',d:'üé≠ Finding Nemo show',i:''},{t:'4:30 PM',d:'üèä Regreso al hotel ‚Äî piscina y descanso',i:''}],
     tips:['Flight of Passage = mejor atracci√≥n de todo Disney World','Safari por la ma√±ana = animales m√°s activos','Animal Kingdom cierra temprano ‚Äî aprovecha la tarde para descansar']},
    {title:'Parque de agua ¬∑ Typhoon Lagoon üåä',icon:'üåä',type:'park',
     acts:[{t:'9:00 AM',d:'üò¥ Despertar sin prisa',i:''},{t:'10:00 AM',d:'üåä Llegada a Typhoon Lagoon',i:''},{t:'10:30 AM',d:'üèÑ Ola gigante + toboganes',i:''},{t:'12:00 PM',d:'üçΩÔ∏è Almuerzo en el parque',i:''},{t:'1:00 PM',d:'üõü Lazy river + snorkel con tiburones (opcional)',i:''},{t:'3:00 PM',d:'üèä Regreso al hotel ‚Äî descanso',i:''},{t:'6:00 PM',d:'üçΩÔ∏è Cena especial fuera de parques',i:''}],
     tips:['Lleva bloqueador solar waterproof','Los lockers cuestan ~$13-16 USD','El snorkel con tiburones es con tiburones REALES ‚Äî experiencia incre√≠ble']},
    {title:'Magic Kingdom (regreso favoritos) üè∞',icon:'üè∞',type:'park',
     acts:[{t:'8:00 AM',d:'üéüÔ∏è Entrada anticipada ‚Äî re-rides de favoritos',i:''},{t:'10:00 AM',d:'üé† Atracciones que faltaron o quieras repetir',i:''},{t:'12:00 PM',d:'üçΩÔ∏è Almuerzo especial (Be Our Guest o Crystal Palace con personajes)',i:''},{t:'2:00 PM',d:'üì∏ Fotos con personajes en los meet & greets',i:''},{t:'4:00 PM',d:'üõçÔ∏è Compras de √∫ltimo momento en Main Street',i:''},{t:'6:00 PM',d:'üçΩÔ∏è √öltima cena m√°gica',i:''},{t:'9:00 PM',d:'üéÜ Happily Ever After ‚Äî despedida perfecta',i:''}],
     tips:['Este d√≠a es para disfrutar sin prisa ‚Äî ya conoces el parque','Es tu √∫ltima oportunidad para fotos y souvenirs','Disfruta los detalles que no viste la primera vez']},
    {title:'Disney Springs y √∫ltimo d√≠a üõçÔ∏è',icon:'üõçÔ∏è',type:'free',
     acts:[{t:'9:00 AM',d:'üò¥ Despertar relajado',i:''},{t:'10:00 AM',d:'üèä Piscina del hotel',i:''},{t:'12:00 PM',d:'üõçÔ∏è Disney Springs ‚Äî √∫ltimas compras',i:''},{t:'3:00 PM',d:'üß≥ Preparar maletas',i:''},{t:'6:00 PM',d:'üçΩÔ∏è Cena de despedida',i:''}],
     tips:['World of Disney en Springs es la tienda M√ÅS grande','Empaca recuerdos con cuidado ‚Äî hay cosas fr√°giles']},
    {title:'Check-out y regreso ‚úàÔ∏è',icon:'‚úàÔ∏è',type:'travel',
     acts:[{t:'7:00 AM',d:'üß≥ Empacar',i:''},{t:'8:00 AM',d:'üç≥ √öltimo desayuno',i:''},{t:'9:00 AM',d:'üè® Check-out',i:''},{t:'',d:'üöê Traslado al aeropuerto',i:''},{t:'',d:'‚úàÔ∏è Vuelo de regreso üè†‚ú®',i:''}],
     tips:['Bell Services guarda maletas gratis','Llega 2.5 hrs antes al aeropuerto para vuelos internacionales']}
  ]
},

'disneyland-cal':{
  title:'Escapada M√°gica a Disneyland California üé°',
  hotel:'Disneyland Hotel',
  cover:IT_IMAGES['disneyland-cal'],
  gradient:IT_GRADIENTS['disneyland-cal'],
  docs:[
    {icon:'üì±',title:'Descargar Disneyland App',desc:'App oficial para filas, mapa y Mobile Order'},
    {icon:'üé´',title:'Vincular entradas a la app',desc:'Tener boletos listos'},
    {icon:'‚ö°',title:'Lightning Lane',desc:'Opciones Multi Pass, Single Pass o Premier Pass'},
    {icon:'üÖøÔ∏è',title:'Estacionamiento / Transporte',desc:'Info del hotel al parque'}
  ],
  days:[
    {title:'Llegada a Anaheim',icon:'‚úàÔ∏è',type:'travel',
     acts:[{t:'',d:'‚úàÔ∏è Llegada al aeropuerto LAX o SNA',i:''},{t:'',d:'üöê Traslado al hotel en Anaheim (~30 min desde SNA)',i:''},{t:'',d:'üè® Check-in en el hotel',i:''},{t:'',d:'üõçÔ∏è Explorar Downtown Disney ‚Äî tiendas y restaurantes',i:''},{t:'',d:'üçΩÔ∏è Cena en Downtown Disney (Earl of Sandwich, Tortilla Jo\'s)',i:''}],
     tips:['El aeropuerto John Wayne (SNA) es m√°s cercano que LAX','El hotel Disneyland tiene entrada peatonal directa a los parques','Downtown Disney es gratuito ‚Äî ideal para tu primera noche']},
    {title:'Disneyland Park üè∞',icon:'üè∞',type:'park',
     acts:[{t:'7:30 AM',d:'üéüÔ∏è Entrada anticipada para hu√©spedes de hoteles Disney',i:''},{t:'7:30 AM',d:'üé¢ Directo a Rise of the Resistance en Galaxy\'s Edge',i:''},{t:'9:00 AM',d:'‚õ∞Ô∏è Matterhorn Bobsleds + Space Mountain',i:''},{t:'10:30 AM',d:'üé† Fantasyland: Indiana Jones, Pirates, Haunted Mansion',i:''},{t:'12:00 PM',d:'üçΩÔ∏è Almuerzo (Blue Bayou para experiencia √∫nica o Docking Bay 7)',i:''},{t:'1:30 PM',d:'üöÄ Galaxy\'s Edge: Millennium Falcon + explorar',i:''},{t:'3:00 PM',d:'üè∞ Sleeping Beauty Castle + Main Street',i:''},{t:'5:00 PM',d:'üé¢ Big Thunder Mountain + Splash Mountain',i:''},{t:'7:00 PM',d:'üçΩÔ∏è Cena',i:''},{t:'9:00 PM',d:'üéÜ Wondrous Journeys o show nocturno',i:''}],
     tips:['Rise of the Resistance PRIMERO ‚Äî es la m√°s popular','Blue Bayou es el restaurante DENTRO de Pirates of the Caribbean ‚Äî experiencia m√°gica','El castillo de Disneyland es el ORIGINAL ‚Äî Walt Disney camin√≥ por aqu√≠','Disneyland es m√°s compacto que WDW ‚Äî puedes hacer m√°s en menos tiempo']},
    {title:'Disney California Adventure üé°',icon:'üé°',type:'park',
     acts:[{t:'8:00 AM',d:'üéüÔ∏è Entrada al parque',i:''},{t:'8:00 AM',d:'üï∏Ô∏è Directo a WEB SLINGERS: A Spider-Man Adventure',i:''},{t:'9:00 AM',d:'üé¢ Radiator Springs Racers en Cars Land (fila o Lightning Lane)',i:''},{t:'10:00 AM',d:'ü¶∏ Avengers Campus ‚Äî encuentros con superh√©roes',i:''},{t:'11:00 AM',d:'üé¢ Incredicoaster + Guardians of the Galaxy: Mission Breakout',i:''},{t:'12:30 PM',d:'üçΩÔ∏è Almuerzo (Lamplight Lounge o Pym Test Kitchen)',i:''},{t:'2:00 PM',d:'üé≠ Frozen: Live at the Hyperion',i:''},{t:'3:30 PM',d:'üèñÔ∏è Pixar Pier + juegos',i:''},{t:'6:00 PM',d:'üçΩÔ∏è Cena',i:''},{t:'8:00 PM',d:'üåä World of Color ‚Äî show de agua y luces',i:''}],
     tips:['Radiator Springs Racers es LA atracci√≥n ‚Äî ve temprano','Cars Land de noche es ESPECTACULAR ‚Äî las luces de ne√≥n son m√°gicas','World of Color es imperdible ‚Äî busca lugar 30 min antes','Pym Test Kitchen tiene comida con porciones gigantes ‚Äî divertid√≠simo']},
    {title:'Park Hopper + Downtown Disney üéâ',icon:'üéâ',type:'park',
     acts:[{t:'8:00 AM',d:'üè∞ Disneyland Park ‚Äî atracciones favoritas para repetir',i:''},{t:'10:00 AM',d:'üé° Saltar a California Adventure ‚Äî lo que falt√≥ ayer',i:''},{t:'12:00 PM',d:'üçΩÔ∏è Almuerzo',i:''},{t:'2:00 PM',d:'üì∏ Fotos con personajes y re-rides',i:''},{t:'4:00 PM',d:'üõçÔ∏è Downtown Disney ‚Äî compras y souvenirs',i:''},{t:'6:00 PM',d:'üçΩÔ∏è Cena especial de despedida',i:''},{t:'8:00 PM',d:'üéÜ Show nocturno de despedida',i:''}],
     tips:['Este es tu d√≠a para lo que te falt√≥ y repetir favoritos','Park Hopper te permite saltar entre ambos parques','Las tiendas de Downtown Disney tienen cosas exclusivas']},
    {title:'Check-out y regreso ‚úàÔ∏è',icon:'‚úàÔ∏è',type:'travel',
     acts:[{t:'8:00 AM',d:'üß≥ Empacar y desayuno',i:''},{t:'9:00 AM',d:'üè® Check-out del hotel',i:''},{t:'',d:'üöê Traslado al aeropuerto',i:''},{t:'',d:'‚úàÔ∏è Vuelo de regreso üè†‚ú®',i:''}],
     tips:['Si tu vuelo es en la tarde, puedes dar una √∫ltima vuelta por Downtown Disney','El aeropuerto SNA es peque√±o y r√°pido ‚Äî no necesitas llegar tan temprano como LAX']}
  ]
},

'crucero-disney-4':{
  title:'Crucero Disney ¬∑ Bahamas ‚öì',
  hotel:'Puerto Ca√±averal, Florida',
  cover:IT_IMAGES['crucero-disney'],
  gradient:IT_GRADIENTS['crucero-disney'],
  docs:[
    {icon:'üì±',title:'Descargar Disney Cruise Line App',desc:'Para actividades, horarios y reservaciones a bordo'},
    {icon:'üõÇ',title:'Documentos de viaje',desc:'Pasaporte vigente obligatorio para todos los viajeros'},
    {icon:'üìã',title:'Check-in online',desc:'Disponible 30 d√≠as antes ‚Äî obligatorio'},
    {icon:'üëó',title:'C√≥digo de vestimenta',desc:'Noche de gala: vestido/traje ¬∑ Noche pirata: opcional disfraz'},
    {icon:'üí≥',title:'Cr√©dito a bordo',desc:'Vincular tarjeta de cr√©dito para compras a bordo'}
  ],
  days:[
    {title:'Llegada y embarque üö¢',icon:'üö¢',type:'cruise',
     acts:[{t:'',d:'‚úàÔ∏è Llegada a Orlando (si aplica)',i:''},{t:'',d:'üöê Traslado a Puerto Ca√±averal (~1 hora desde MCO)',i:''},{t:'12:00 PM',d:'üö¢ Inicio de embarque (check-in y foto de bienvenida)',i:''},{t:'1:00 PM',d:'üçΩÔ∏è Almuerzo buffet en Cabanas ‚Äî est√° incluido',i:''},{t:'2:00 PM',d:'üó∫Ô∏è Explorar el barco ‚Äî piscinas, restaurantes, spa',i:''},{t:'3:00 PM',d:'üë∂ Registrar ni√±os en los clubs (Oceaneer Club)',i:''},{t:'4:00 PM',d:'üéâ Sail Away Party en la cubierta ‚Äî ¬°zarpa el barco!',i:''},{t:'5:45 PM',d:'üçΩÔ∏è Primera cena en restaurante rotativo (vestimenta casual elegante)',i:''},{t:'8:30 PM',d:'üé≠ Show en el Walt Disney Theatre',i:''},{t:'10:00 PM',d:'üåô Explorar zonas de adultos ‚Äî bar, discoteca, cubierta',i:''}],
     tips:['Llega al puerto entre 11 AM - 1 PM para embarque relajado','El almuerzo del d√≠a de embarque es buffet ‚Äî come bien porque la cena es m√°s tarde','La Sail Away Party es m√°gica ‚Äî no te la pierdas','Lleva traje de ba√±o en tu equipaje de mano ‚Äî las piscinas abren desde el embarque','Registra a los ni√±os en Oceaneer Club el primer d√≠a ‚Äî es INCRE√çBLE']},
    {title:'D√≠a en el mar üåä',icon:'üåä',type:'cruise',
     acts:[{t:'7:30 AM',d:'üç≥ Desayuno en restaurante o buffet',i:''},{t:'9:00 AM',d:'üèä Piscinas y toboganes (AquaDuck/AquaMouse seg√∫n barco)',i:''},{t:'10:30 AM',d:'üë∏ Encuentro con princesas y personajes',i:''},{t:'12:00 PM',d:'üçΩÔ∏è Almuerzo',i:''},{t:'1:00 PM',d:'üé® Actividades: trivia, manualidades, concursos en piscina',i:''},{t:'3:00 PM',d:'üßñ Spa o tiempo libre en cubierta',i:''},{t:'4:00 PM',d:'üçπ Snack en cubierta + helado gratis',i:''},{t:'5:45 PM',d:'üçΩÔ∏è Cena en restaurante rotativo',i:''},{t:'8:00 PM',d:'üé≠ Show nocturno en el teatro',i:''},{t:'9:30 PM',d:'üè¥‚Äç‚ò†Ô∏è Fiesta pirata en cubierta con fuegos artificiales',i:''}],
     tips:['La fiesta pirata con fuegos artificiales es √öNICA ‚Äî solo Disney lo hace en el mar','El helado y servicio a la habitaci√≥n son GRATIS 24/7','Reserva Palo o Remy (restaurantes de adultos) con anticipaci√≥n ‚Äî son la mejor cena','Los clubs de ni√±os est√°n incluidos y los ni√±os NO van a querer salir','Reserva tratamientos de spa el d√≠a de navegaci√≥n ‚Äî se llenan r√°pido']},
    {title:'Castaway Cay üèùÔ∏è',icon:'üèùÔ∏è',type:'cruise',
     acts:[{t:'8:00 AM',d:'üç≥ Desayuno temprano',i:''},{t:'9:00 AM',d:'üèùÔ∏è Desembarque en Castaway Cay ‚Äî isla privada de Disney',i:''},{t:'9:30 AM',d:'üèñÔ∏è Elegir camastros en la playa familiar o de adultos',i:''},{t:'10:00 AM',d:'üö¥ Actividades: snorkel, kayak, bicicletas, tobog√°n acu√°tico',i:''},{t:'12:00 PM',d:'üçî Almuerzo BBQ en la isla ‚Äî ¬°INCLUIDO y delicioso!',i:''},{t:'1:00 PM',d:'üèä M√°s playa + actividades acu√°ticas',i:''},{t:'3:00 PM',d:'üõçÔ∏è Compras en las tienditas de la isla',i:''},{t:'4:00 PM',d:'üö¢ Regreso al barco',i:''},{t:'5:45 PM',d:'üçΩÔ∏è Cena de gala (noche elegante)',i:''},{t:'8:30 PM',d:'üé≠ Show final en el teatro',i:''}],
     tips:['Castaway Cay es EXCLUSIVA de Disney ‚Äî solo se puede llegar en crucero Disney','La playa de adultos (Serenity Bay) es espectacular ‚Äî paz total','El almuerzo BBQ en la isla est√° incluido y es delicioso','Lleva zapatos de agua ‚Äî la arena puede ser dura en algunas zonas','Reserva la caba√±a privada si quieres la experiencia VIP','Esta noche es de gala ‚Äî lleva vestido/traje para la cena']},
    {title:'Desembarque üõ≥Ô∏è',icon:'üõ≥Ô∏è',type:'cruise',
     acts:[{t:'7:00 AM',d:'üç≥ √öltimo desayuno a bordo',i:''},{t:'8:00 AM',d:'üß≥ Desembarque seg√∫n grupo asignado',i:''},{t:'9:00 AM',d:'üõÇ Pasar por aduanas e inmigraci√≥n',i:''},{t:'',d:'üöê Traslado al aeropuerto o siguiente destino',i:''},{t:'',d:'‚úàÔ∏è Vuelo de regreso üè†‚ú®',i:''}],
     tips:['Deja tus maletas grandes afuera del camarote la noche anterior','Desayuna temprano para evitar las multitudes','Ten a la mano pasaporte y documentos de desembarque','Si tu vuelo es tarde, puedes visitar Kennedy Space Center camino al aeropuerto']}
  ]
},

'crucero-disney-7':{
  title:'Crucero Disney ¬∑ 7 Noches Caribe ‚öì',
  hotel:'Puerto Ca√±averal, Florida',
  cover:IT_IMAGES['crucero-disney'],
  gradient:IT_GRADIENTS['crucero-disney'],
  docs:[
    {icon:'üì±',title:'Descargar Disney Cruise Line App',desc:'Actividades y horarios'},
    {icon:'üõÇ',title:'Documentos de viaje',desc:'Pasaporte vigente obligatorio'},
    {icon:'üìã',title:'Check-in online',desc:'30 d√≠as antes ‚Äî obligatorio'},
    {icon:'üëó',title:'C√≥digo de vestimenta',desc:'2 noches de gala + noche pirata'},
    {icon:'üèñÔ∏è',title:'Excursiones en puertos',desc:'Reservar con anticipaci√≥n en la app'}
  ],
  days:[
    {title:'Embarque üö¢',icon:'üö¢',type:'cruise',
     acts:[{t:'12:00 PM',d:'üö¢ Embarque en Puerto Ca√±averal',i:''},{t:'1:00 PM',d:'üçΩÔ∏è Almuerzo buffet',i:''},{t:'2:00 PM',d:'üó∫Ô∏è Explorar el barco',i:''},{t:'4:00 PM',d:'üéâ Sail Away Party',i:''},{t:'5:45 PM',d:'üçΩÔ∏è Primera cena',i:''},{t:'8:30 PM',d:'üé≠ Show en el teatro',i:''}],
     tips:['Llega al puerto entre 11 AM - 1 PM','Traje de ba√±o en equipaje de mano ‚Äî piscinas abren desde embarque']},
    {title:'D√≠a en el mar üåä',icon:'üåä',type:'cruise',
     acts:[{t:'8:00 AM',d:'üç≥ Desayuno',i:''},{t:'9:00 AM',d:'üèä Piscinas y toboganes',i:''},{t:'10:30 AM',d:'üë∏ Meet & greet con personajes',i:''},{t:'12:00 PM',d:'üçΩÔ∏è Almuerzo',i:''},{t:'2:00 PM',d:'üé® Actividades y trivia',i:''},{t:'4:00 PM',d:'üçπ Snacks y helado en cubierta',i:''},{t:'5:45 PM',d:'üçΩÔ∏è Cena ‚Äî noche de gala',i:''},{t:'8:30 PM',d:'üé≠ Show de Broadway',i:''}],
     tips:['Reserva Palo/Remy con anticipaci√≥n','Los clubs de ni√±os son INCRE√çBLES','Primera noche de gala ‚Äî traje/vestido elegante']},
    {title:'Puerto 1 ‚Äî Cozumel, M√©xico üá≤üáΩ',icon:'üèñÔ∏è',type:'cruise',
     acts:[{t:'7:00 AM',d:'üç≥ Desayuno temprano',i:''},{t:'8:00 AM',d:'üö¢ Llegada a Cozumel',i:''},{t:'9:00 AM',d:'üèñÔ∏è Excursi√≥n: snorkel en arrecife, playa o paseo en la isla',i:''},{t:'12:00 PM',d:'üçΩÔ∏è Almuerzo en la isla o regreso al barco',i:''},{t:'2:00 PM',d:'üõçÔ∏è Compras en el muelle',i:''},{t:'4:00 PM',d:'üö¢ Regreso al barco (verificar hora l√≠mite)',i:''},{t:'5:45 PM',d:'üçΩÔ∏è Cena',i:''},{t:'8:30 PM',d:'üé≠ Show nocturno',i:''}],
     tips:['Reserva excursiones con anticipaci√≥n ‚Äî las de Disney son las m√°s seguras','El barco NO te espera si llegas tarde ‚Äî respeta los horarios','El snorkel en Cozumel es espectacular ‚Äî agua cristalina']},
    {title:'Puerto 2 ‚Äî Grand Cayman üá∞üáæ',icon:'üèñÔ∏è',type:'cruise',
     acts:[{t:'7:00 AM',d:'üç≥ Desayuno',i:''},{t:'8:30 AM',d:'üö§ Tender boat a la isla (no hay muelle directo)',i:''},{t:'9:30 AM',d:'üèñÔ∏è 7 Mile Beach o excursi√≥n con mantarrayas en Stingray City',i:''},{t:'12:00 PM',d:'üçΩÔ∏è Almuerzo',i:''},{t:'2:00 PM',d:'üõçÔ∏è George Town ‚Äî tiendas duty-free',i:''},{t:'4:00 PM',d:'üö§ Tender de regreso al barco',i:''},{t:'5:45 PM',d:'üçΩÔ∏è Cena',i:''},{t:'9:30 PM',d:'üè¥‚Äç‚ò†Ô∏è Fiesta pirata + fuegos artificiales',i:''}],
     tips:['Stingray City es experiencia √öNICA ‚Äî acariciar mantarrayas','El tender boat puede tener fila ‚Äî ve temprano','Noche pirata ‚Äî v√≠stanse de pirata si quieren']},
    {title:'Puerto 3 ‚Äî Falmouth, Jamaica üáØüá≤',icon:'üèñÔ∏è',type:'cruise',
     acts:[{t:'7:00 AM',d:'üç≥ Desayuno',i:''},{t:'8:30 AM',d:'üö¢ Llegada a Falmouth',i:''},{t:'9:30 AM',d:'üèñÔ∏è Excursi√≥n: Dunn\'s River Falls, playa o tour de la isla',i:''},{t:'12:00 PM',d:'üçΩÔ∏è Almuerzo',i:''},{t:'3:00 PM',d:'üõçÔ∏è Compras en el puerto',i:''},{t:'5:00 PM',d:'üö¢ Regreso al barco',i:''},{t:'5:45 PM',d:'üçΩÔ∏è Cena ‚Äî segunda noche de gala',i:''},{t:'8:30 PM',d:'üé≠ Show final en el teatro',i:''}],
     tips:['Dunn\'s River Falls es ic√≥nico pero mojado ‚Äî lleva cambio de ropa','Segunda noche de gala ‚Äî tu mejor outfit']},
    {title:'D√≠a en el mar üåä',icon:'üåä',type:'cruise',
     acts:[{t:'9:00 AM',d:'üò¥ Despertar sin prisa ‚Äî desayuno relajado',i:''},{t:'10:00 AM',d:'üèä √öltimo d√≠a de piscina y toboganes',i:''},{t:'12:00 PM',d:'üçΩÔ∏è Almuerzo',i:''},{t:'2:00 PM',d:'üì∏ √öltimas fotos con personajes',i:''},{t:'4:00 PM',d:'üßñ Spa o cubierta',i:''},{t:'5:45 PM',d:'üçΩÔ∏è √öltima cena a bordo ‚Äî disfruten',i:''},{t:'8:30 PM',d:'üé≠ Show de despedida',i:''},{t:'10:00 PM',d:'üß≥ Dejar maletas afuera del camarote para desembarque',i:''}],
     tips:['√öltimo d√≠a ‚Äî disfruta cada momento','Deja maletas empacadas afuera de tu puerta esta noche','Guarda un cambio de ropa para ma√±ana en tu carry-on']},
    {title:'Castaway Cay üèùÔ∏è',icon:'üèùÔ∏è',type:'cruise',
     acts:[{t:'8:00 AM',d:'üç≥ Desayuno',i:''},{t:'9:00 AM',d:'üèùÔ∏è Desembarque en Castaway Cay',i:''},{t:'10:00 AM',d:'üèñÔ∏è Playa + snorkel + actividades',i:''},{t:'12:00 PM',d:'üçî BBQ en la isla',i:''},{t:'2:00 PM',d:'üèä M√°s playa',i:''},{t:'4:00 PM',d:'üö¢ Regreso al barco',i:''},{t:'5:45 PM',d:'üçΩÔ∏è Cena de despedida',i:''},{t:'8:30 PM',d:'üéÜ √öltimo show',i:''}],
     tips:['Castaway Cay es lo mejor del crucero ‚Äî disfr√∫talo al m√°ximo','Playa de adultos Serenity Bay = para√≠so']},
    {title:'Desembarque ‚öì',icon:'‚öì',type:'cruise',
     acts:[{t:'7:00 AM',d:'üç≥ √öltimo desayuno',i:''},{t:'8:00 AM',d:'üß≥ Desembarque',i:''},{t:'',d:'üöê Traslado al aeropuerto',i:''},{t:'',d:'‚úàÔ∏è Vuelo de regreso üè†‚ú®',i:''}],
     tips:['Desayuna temprano para evitar multitudes','Ten pasaporte y documentos a la mano']}
  ]
},

'universal-3':{
  title:'Aventura en Universal Orlando üé¢',
  hotel:"Universal's Cabana Bay Beach Resort",
  cover:IT_IMAGES['universal'],
  gradient:IT_GRADIENTS['universal'],
  docs:[
    {icon:'üì±',title:'Descargar Universal Orlando App',desc:'Tiempos de espera, mapa y Virtual Queue'},
    {icon:'üé´',title:'Vincular entradas',desc:'Tener boletos listos en la app'},
    {icon:'‚ö°',title:'Express Pass',desc:'Incluido para hu√©spedes de hoteles Premier/Preferred'},
    {icon:'üåã',title:'Info Volcano Bay',desc:'Si incluye parque de agua'}
  ],
  days:[
    {title:'Llegada a Orlando',icon:'‚úàÔ∏è',type:'travel',
     acts:[{t:'',d:'‚úàÔ∏è Llegada al aeropuerto MCO',i:''},{t:'',d:'üöê Traslado al hotel Universal',i:''},{t:'',d:'üè® Check-in',i:''},{t:'',d:'üõçÔ∏è CityWalk ‚Äî restaurantes y entretenimiento',i:''},{t:'',d:'üçΩÔ∏è Cena en CityWalk (Toothsome Chocolate, Bigfire)',i:''}],
     tips:['Descarga la Universal app antes de llegar','CityWalk no requiere entrada ‚Äî es gratis','Si te hospedas en hotel Preferred, tienes Express Pass INCLUIDO ‚Äî game changer']},
    {title:'Universal Studios Florida üé¨',icon:'üé¨',type:'park',
     acts:[{t:'8:00 AM',d:'üéüÔ∏è Early Park Admission (1 hora antes)',i:''},{t:'8:00 AM',d:'üé¢ Directo a Hagrid\'s Magical Creatures (si aplica) o Revenge of the Mummy',i:''},{t:'9:00 AM',d:'üßô Diagon Alley ‚Äî Harry Potter and the Escape from Gringotts',i:''},{t:'10:30 AM',d:'ü¶à JAWS tribute + MEN IN BLACK: Alien Attack',i:''},{t:'11:30 AM',d:'üé¢ Hollywood Rip Ride Rockit',i:''},{t:'12:30 PM',d:'üçΩÔ∏è Almuerzo (Leaky Cauldron en Diagon Alley)',i:''},{t:'2:00 PM',d:'üöÇ Hogwarts Express a Islands of Adventure',i:''},{t:'2:30 PM',d:'üè∞ Hogsmeade ‚Äî Forbidden Journey + Flight of the Hippogriff',i:''},{t:'4:00 PM',d:'üç∫ Cerveza de mantequilla en Hogsmeade',i:''},{t:'5:00 PM',d:'üöÇ Regreso en Hogwarts Express',i:''},{t:'6:00 PM',d:'üçΩÔ∏è Cena',i:''},{t:'8:00 PM',d:'‚ú® Paseo nocturno por Diagon Alley iluminado',i:''}],
     tips:['Hogwarts Express requiere boleto Park-to-Park ‚Äî es una EXPERIENCIA','Diagon Alley de noche es m√°gico ‚Äî las luces son incre√≠bles','En Ollivanders hacen una demostraci√≥n de selecci√≥n de varita ‚Äî ve temprano','Si tienes Express Pass, √∫salo en las atracciones con m√°s de 30 min de espera']},
    {title:'Islands of Adventure üèùÔ∏è',icon:'üèùÔ∏è',type:'park',
     acts:[{t:'8:00 AM',d:'üéüÔ∏è Early Park Admission',i:''},{t:'8:00 AM',d:'üé¢ Directo a VelociCoaster (la mejor monta√±a rusa de Orlando)',i:''},{t:'9:00 AM',d:'üé¢ Hagrid\'s Magical Creatures Motorbike Adventure',i:''},{t:'10:00 AM',d:'ü¶ñ Jurassic World: The Ride',i:''},{t:'11:00 AM',d:'üï∑Ô∏è Amazing Adventures of Spider-Man',i:''},{t:'12:00 PM',d:'üçΩÔ∏è Almuerzo (Three Broomsticks en Hogsmeade o Mythos)',i:''},{t:'1:30 PM',d:'üêâ Hagrid\'s (repetir si la fila lo permite)',i:''},{t:'2:30 PM',d:'üíß Popeye\'s Rapids + Dudley Do-Right',i:''},{t:'4:00 PM',d:'üèä Regreso al hotel ‚Äî piscina',i:''},{t:'6:00 PM',d:'üçΩÔ∏è Cena en CityWalk',i:''}],
     tips:['VelociCoaster es IMPERDIBLE ‚Äî la mejor monta√±a rusa de todo Orlando','Hagrid\'s tiene filas de 2+ horas ‚Äî ve al abrir','Mythos fue nombrado mejor restaurante de parques tem√°ticos del mundo','Popeye\'s te moja COMPLETAMENTE ‚Äî lleva poncho']},
    {title:'Epic Universe üåü',icon:'üåü',type:'park',
     acts:[{t:'8:00 AM',d:'üéüÔ∏è Entrada al nuevo parque Epic Universe',i:''},{t:'8:00 AM',d:'üé¢ Explorar los mundos: Super Nintendo World, How to Train Your Dragon, Dark Universe',i:''},{t:'10:00 AM',d:'üçÑ Super Nintendo World ‚Äî Mario Kart ride + actividades interactivas',i:''},{t:'12:00 PM',d:'üçΩÔ∏è Almuerzo tem√°tico',i:''},{t:'1:30 PM',d:'üêâ How to Train Your Dragon ‚Äî monta√±a rusa + explorar',i:''},{t:'3:00 PM',d:'üßõ Dark Universe ‚Äî atracciones de monstruos cl√°sicos',i:''},{t:'4:30 PM',d:'üåå Celestial Park ‚Äî √°rea central del parque',i:''},{t:'6:00 PM',d:'üçΩÔ∏è Cena en Epic Universe',i:''},{t:'8:00 PM',d:'‚ú® Shows nocturnos de cierre',i:''}],
     tips:['Epic Universe es el parque M√ÅS NUEVO de Universal ‚Äî abierto desde 2025','Super Nintendo World es la atracci√≥n estrella ‚Äî lleva la Power-Up Band','El parque es ENORME ‚Äî planifica tu ruta','Llega temprano ‚Äî la primera hora tiene menos gente']},
    {title:'Check-out y regreso ‚úàÔ∏è',icon:'‚úàÔ∏è',type:'travel',
     acts:[{t:'8:00 AM',d:'üß≥ Empacar y desayuno',i:''},{t:'9:00 AM',d:'üè® Check-out',i:''},{t:'',d:'üöê Traslado al aeropuerto',i:''},{t:'',d:'‚úàÔ∏è Vuelo de regreso üè†‚ú®',i:''}],
     tips:['CityWalk tiene tiendas de souvenirs de √∫ltimo momento','Llega 2.5 hrs antes al aeropuerto para vuelos internacionales']}
  ]
},

'disney-uni-combo':{
  title:'Disney World + Universal ¬∑ Orlando Completo üè∞üé¢',
  hotel:"Disney's Pop Century Resort / Universal's Cabana Bay",
  cover:IT_IMAGES['disney-world'],
  gradient:'linear-gradient(135deg,#1a1a6e,#003366,#00ccff)',
  docs:[
    {icon:'üì±',title:'My Disney Experience + Universal App',desc:'Descargar ambas apps'},
    {icon:'üé´',title:'Entradas Disney + Universal',desc:'Vincular en ambas apps'},
    {icon:'üìã',title:'Check-in online hoteles',desc:'Ambos hoteles'},
    {icon:'üçΩÔ∏è',title:'Reservaciones de restaurantes',desc:'Disney: 60 d√≠as antes'},
    {icon:'üöê',title:'Traslado entre resorts',desc:'Uber/Lyft entre propiedades Disney y Universal (~20 min)'}
  ],
  days:[
    {title:'Llegada a Orlando',icon:'‚úàÔ∏è',type:'travel',
     acts:[{t:'',d:'‚úàÔ∏è Llegada a MCO',i:''},{t:'',d:'üöê Traslado al hotel Disney',i:''},{t:'',d:'üè® Check-in',i:''},{t:'',d:'üõçÔ∏è Disney Springs',i:''}],
     tips:['Los primeros 5 d√≠as son Disney, luego Universal ‚Äî as√≠ no cambias de hotel a medio viaje']},
    {title:'Magic Kingdom üè∞',icon:'üè∞',type:'park',
     acts:[{t:'8:00 AM',d:'üéüÔ∏è Entrada anticipada',i:''},{t:'8:00 AM',d:'üé¢ Tiana\'s + Seven Dwarfs Mine Train + TRON',i:''},{t:'10:30 AM',d:'üé† Fantasyland + Adventureland',i:''},{t:'12:30 PM',d:'üçΩÔ∏è Almuerzo',i:''},{t:'2:00 PM',d:'üè¥‚Äç‚ò†Ô∏è Frontierland + Liberty Square',i:''},{t:'3:30 PM',d:'üé™ Parade',i:''},{t:'6:00 PM',d:'üçΩÔ∏è Cena',i:''},{t:'9:00 PM',d:'üéÜ Happily Ever After',i:''}],
     tips:['TRON Virtual Queue a las 7 AM','Primera hora = menos filas']},
    {title:'EPCOT üåé',icon:'üåé',type:'park',
     acts:[{t:'8:00 AM',d:'üéüÔ∏è Guardians of the Galaxy',i:''},{t:'9:00 AM',d:'üßä Frozen Ever After + Test Track',i:''},{t:'11:00 AM',d:'üåé World Showcase',i:''},{t:'12:30 PM',d:'üçΩÔ∏è Almuerzo',i:''},{t:'2:00 PM',d:'üç¶ Snacks del mundo',i:''},{t:'5:00 PM',d:'üé≠ Remy\'s Ratatouille',i:''},{t:'7:00 PM',d:'üçΩÔ∏è Cena',i:''},{t:'9:00 PM',d:'üéÜ Luminous',i:''}],
     tips:['Guardians VQ a las 7 AM','Prueba snacks de cada pa√≠s']},
    {title:'Hollywood Studios üé¨',icon:'üé¨',type:'park',
     acts:[{t:'8:00 AM',d:'üéüÔ∏è Rise of the Resistance',i:''},{t:'9:15 AM',d:'üß∏ Slinky Dog Dash + Tower of Terror',i:''},{t:'11:00 AM',d:'üöÄ Galaxy\'s Edge',i:''},{t:'12:30 PM',d:'üçΩÔ∏è Almuerzo',i:''},{t:'2:00 PM',d:'üé≠ Shows',i:''},{t:'6:30 PM',d:'üçΩÔ∏è Cena',i:''},{t:'8:00 PM',d:'üéÜ Fantasmic!',i:''}],
     tips:['Rise PRIMERO','Fantasmic! llega 45 min antes']},
    {title:'Animal Kingdom ü¶Å',icon:'ü¶Å',type:'park',
     acts:[{t:'7:30 AM',d:'üéüÔ∏è Flight of Passage',i:''},{t:'9:00 AM',d:'ü¶Å Safari + Everest',i:''},{t:'12:00 PM',d:'üçΩÔ∏è Almuerzo',i:''},{t:'2:00 PM',d:'üé≠ Shows + senderos',i:''},{t:'4:00 PM',d:'üèä Hotel ‚Äî piscina',i:''}],
     tips:['Safari temprano = animales activos','AK cierra temprano ‚Äî aprovecha la tarde']},
    {title:'Traslado + CityWalk üöê',icon:'üöê',type:'travel',
     acts:[{t:'9:00 AM',d:'üè® Check-out del hotel Disney',i:''},{t:'10:00 AM',d:'üöê Traslado a hotel Universal (~20 min)',i:''},{t:'11:00 AM',d:'üè® Check-in hotel Universal',i:''},{t:'12:00 PM',d:'üçΩÔ∏è Almuerzo en CityWalk',i:''},{t:'2:00 PM',d:'üèä Piscina del hotel',i:''},{t:'6:00 PM',d:'üçΩÔ∏è Cena en CityWalk',i:''}],
     tips:['Uber entre Disney y Universal cuesta ~$15-20 USD','D√≠a de transici√≥n ‚Äî relax y prepararse para Universal']},
    {title:'Universal Studios Florida üé¨',icon:'üé¨',type:'park',
     acts:[{t:'8:00 AM',d:'üéüÔ∏è Early Entry',i:''},{t:'8:00 AM',d:'üßô Diagon Alley + Gringotts',i:''},{t:'10:00 AM',d:'üé¢ Hollywood Rip Ride + MIB + Mummy',i:''},{t:'12:30 PM',d:'üçΩÔ∏è Almuerzo en Leaky Cauldron',i:''},{t:'2:00 PM',d:'üöÇ Hogwarts Express a IoA',i:''},{t:'2:30 PM',d:'üè∞ Hogsmeade + Forbidden Journey',i:''},{t:'5:00 PM',d:'üöÇ Regreso',i:''},{t:'6:00 PM',d:'üçΩÔ∏è Cena',i:''}],
     tips:['Hogwarts Express = experiencia obligatoria','Diagon Alley de noche es m√°gico']},
    {title:'Islands of Adventure üèùÔ∏è',icon:'üèùÔ∏è',type:'park',
     acts:[{t:'8:00 AM',d:'üé¢ VelociCoaster + Hagrid\'s',i:''},{t:'10:00 AM',d:'ü¶ñ Jurassic World + Spider-Man',i:''},{t:'12:00 PM',d:'üçΩÔ∏è Almuerzo',i:''},{t:'2:00 PM',d:'üíß Water rides + re-rides',i:''},{t:'4:00 PM',d:'üèä Hotel ‚Äî piscina',i:''},{t:'6:00 PM',d:'üçΩÔ∏è Cena en CityWalk',i:''}],
     tips:['VelociCoaster = mejor monta√±a rusa de Orlando','Hagrid\'s temprano ‚Äî filas de 2+ hrs']},
    {title:'Epic Universe üåü',icon:'üåü',type:'park',
     acts:[{t:'8:00 AM',d:'üé¢ Super Nintendo World + Dark Universe',i:''},{t:'10:00 AM',d:'üêâ How to Train Your Dragon world',i:''},{t:'12:00 PM',d:'üçΩÔ∏è Almuerzo',i:''},{t:'2:00 PM',d:'üçÑ Re-rides y explorar',i:''},{t:'5:00 PM',d:'üõçÔ∏è Compras de √∫ltimo momento',i:''},{t:'7:00 PM',d:'üçΩÔ∏è √öltima cena en Orlando',i:''}],
     tips:['Epic Universe es ENORME ‚Äî planifica tu ruta','Power-Up Band para Super Nintendo World']},
    {title:'Check-out y regreso ‚úàÔ∏è',icon:'‚úàÔ∏è',type:'travel',
     acts:[{t:'8:00 AM',d:'üß≥ Empacar',i:''},{t:'9:00 AM',d:'üè® Check-out',i:''},{t:'',d:'üöê Aeropuerto',i:''},{t:'',d:'‚úàÔ∏è Regreso üè†‚ú®',i:''}],
     tips:['10 d√≠as m√°gicos completados ‚Äî ¬°√©pico!']}
  ]
},

// ‚îÄ‚îÄ Disney World 3 d√≠as express ‚îÄ‚îÄ
'disney-world-3':{
  title:'Disney World Express ‚ö°‚ú®',
  hotel:"Disney's All-Star Movies Resort",
  cover:IT_IMAGES['disney-world'],
  gradient:IT_GRADIENTS['disney-world'],
  docs:[
    {icon:'üì±',title:'Descargar My Disney Experience',desc:'App oficial para reservaciones, filas y mapa'},
    {icon:'üé´',title:'Vincular entradas a la app',desc:'Tener los boletos listos antes de llegar'},
    {icon:'‚ö°',title:'Comprar Genie+ / Lightning Lane',desc:'Imprescindible para 3 d√≠as ‚Äî aprovecha cada minuto'},
    {icon:'üçΩÔ∏è',title:'Reservaciones de restaurantes',desc:'Se abren 60 d√≠as antes'}
  ],
  days:[
    {title:'Llegada a Orlando',icon:'‚úàÔ∏è',type:'travel',
     acts:[{t:'',d:'‚úàÔ∏è Llegada al Aeropuerto (MCO)',i:''},{t:'',d:'üöê Traslado al hotel',i:''},{t:'',d:'üè® Check-in',i:''},{t:'',d:'üõçÔ∏è Disney Springs ‚Äî compras y cena',i:''},{t:'7:00 PM',d:'üçΩÔ∏è Cena en Disney Springs',i:''}],
     tips:['Descarga My Disney Experience y vincula todo antes de llegar','Compra Genie+ desde la app ‚Äî es esencial en un viaje corto']},
    {title:'Magic Kingdom üè∞',icon:'üè∞',type:'park',
     acts:[{t:'7:00 AM',d:'‚è∞ Despertar temprano',i:''},{t:'7:30 AM',d:'üöå Transporte al parque',i:''},{t:'8:00 AM',d:'üéüÔ∏è Early Entry ‚Äî directo a TRON y Seven Dwarfs',i:''},{t:'10:00 AM',d:'üè¥‚Äç‚ò†Ô∏è Pirates + Jungle Cruise + Haunted Mansion',i:''},{t:'12:00 PM',d:'üçΩÔ∏è Almuerzo r√°pido en Cosmic Ray\'s',i:''},{t:'1:00 PM',d:'üé¢ Thunder Mountain + Splash Mountain',i:''},{t:'3:00 PM',d:'üé™ Festival of Fantasy Parade',i:''},{t:'4:00 PM',d:'üè∞ Fotos en el Castillo + It\'s a Small World',i:''},{t:'6:00 PM',d:'üçΩÔ∏è Cena en el parque',i:''},{t:'8:00 PM',d:'üéÜ Happily Ever After ‚Äî fuegos artificiales',i:''}],
     tips:['Early Entry es tu arma secreta ‚Äî llega 30 min antes de apertura','Usa Lightning Lane para las atracciones top']},
    {title:'EPCOT üåç',icon:'üåç',type:'park',
     acts:[{t:'8:00 AM',d:'üéüÔ∏è Early Entry ‚Äî Guardians of the Galaxy: Cosmic Rewind',i:''},{t:'9:30 AM',d:'üöÄ Test Track + Mission: SPACE',i:''},{t:'11:00 AM',d:'üç∫ World Showcase ‚Äî tour gastron√≥mico',i:''},{t:'1:00 PM',d:'üçΩÔ∏è Almuerzo en M√©xico o Jap√≥n',i:''},{t:'3:00 PM',d:'‚ùÑÔ∏è Frozen Ever After (Noruega)',i:''},{t:'5:00 PM',d:'üç∑ Seguir explorando pabellones',i:''},{t:'7:00 PM',d:'üçΩÔ∏è Cena en World Showcase',i:''},{t:'9:00 PM',d:'üéÜ Luminous ‚Äî show nocturno',i:''}],
     tips:['El Virtual Queue de Guardians se abre a las 7 AM ‚Äî prep√°rate','World Showcase es incre√≠ble para adultos ‚Äî prueba todo']},
    {title:'Hollywood Studios ‚≠ê',icon:'‚≠ê',type:'park',
     acts:[{t:'7:30 AM',d:'üöå Transporte al parque',i:''},{t:'8:00 AM',d:'üéüÔ∏è Early Entry ‚Äî Rise of the Resistance',i:''},{t:'9:30 AM',d:'üöÄ Millennium Falcon: Smugglers Run',i:''},{t:'10:30 AM',d:'üß∏ Toy Story Land ‚Äî Slinky Dog Dash',i:''},{t:'12:00 PM',d:'üçΩÔ∏è Almuerzo en Backlot Express',i:''},{t:'1:30 PM',d:'üóº Tower of Terror + Rock \'n\' Roller Coaster',i:''},{t:'3:00 PM',d:'üé¨ Shows y entretenimiento',i:''},{t:'5:00 PM',d:'üé¨ Fantasmic! (si hay funci√≥n)',i:''},{t:'7:00 PM',d:'üçΩÔ∏è Cena',i:''}],
     tips:['Rise of the Resistance es imperdible ‚Äî hazla primero','Galaxy\'s Edge vale la pena explorar con calma']},
    {title:'D√≠a libre y regreso ‚úàÔ∏è',icon:'‚úàÔ∏è',type:'travel',
     acts:[{t:'8:00 AM',d:'üß≥ Empacar con calma',i:''},{t:'9:00 AM',d:'üè® Check-out',i:''},{t:'10:00 AM',d:'üõçÔ∏è √öltimas compras en Disney Springs o Outlets',i:''},{t:'',d:'üöê Traslado al aeropuerto',i:''},{t:'',d:'‚úàÔ∏è Vuelo de regreso üè†‚ú®',i:''}],
     tips:['Organiza souvenirs la noche anterior para no correr','5 d√≠as m√°gicos completados!']}
  ]
},

// ‚îÄ‚îÄ Disney World Solo Adultos ‚îÄ‚îÄ
'disney-adults':{
  title:'Disney World ¬∑ Escapada Solo Adultos ü•Ç',
  hotel:"Disney's Grand Floridian Resort & Spa",
  cover:IT_IMAGES['disney-world'],
  gradient:'linear-gradient(135deg,#1a1a2e,#16213e,#0f3460)',
  docs:[
    {icon:'üì±',title:'Descargar My Disney Experience',desc:'Reservaciones, filas y mapa'},
    {icon:'üç∑',title:'Reservar restaurantes fine dining',desc:'Victoria & Albert\'s, California Grill, Le Cellier'},
    {icon:'üíÜ',title:'Reservar spa',desc:'Senses Spa en Grand Floridian'},
    {icon:'‚ö°',title:'Lightning Lane Multi Pass',desc:'Para maximizar tu tiempo en parques'}
  ],
  days:[
    {title:'Llegada VIP',icon:'‚úàÔ∏è',type:'travel',
     acts:[{t:'',d:'‚úàÔ∏è Llegada a Orlando (MCO)',i:''},{t:'',d:'üöê Traslado privado al Grand Floridian',i:''},{t:'',d:'üè® Check-in ‚Äî Club Level si disponible',i:''},{t:'5:00 PM',d:'üíÜ Spa o relajarse en la piscina',i:''},{t:'7:30 PM',d:'üç∑ Cena en Narcoossee\'s con vista a fuegos artificiales',i:''}],
     tips:['El Grand Floridian tiene monorriel directo a Magic Kingdom','Club Level incluye lounge con snacks y bebidas todo el d√≠a']},
    {title:'EPCOT Gourmet üç∑',icon:'üåç',type:'park',
     acts:[{t:'8:00 AM',d:'üéüÔ∏è Early Entry ‚Äî Guardians of the Galaxy',i:''},{t:'9:30 AM',d:'üöÄ Test Track',i:''},{t:'10:30 AM',d:'üé® Figment + Spaceship Earth',i:''},{t:'11:30 AM',d:'üç∑ Tour gastron√≥mico World Showcase (empezar por M√©xico)',i:''},{t:'1:00 PM',d:'üçΩÔ∏è Almuerzo en Le Cellier (Canad√°) o Takumi-Tei (Jap√≥n)',i:''},{t:'3:00 PM',d:'‚ùÑÔ∏è Frozen + Remy\'s Ratatouille',i:''},{t:'5:00 PM',d:'üç∏ Drinks around the world ‚Äî cada pabell√≥n tiene su coctel',i:''},{t:'7:30 PM',d:'üçΩÔ∏è Cena en Monsieur Paul (Francia)',i:''},{t:'9:00 PM',d:'üéÜ Luminous',i:''}],
     tips:['EPCOT es EL parque para adultos ‚Äî disfrut√° cada pabell√≥n','Los cocteles de cada pa√≠s son √∫nicos ‚Äî prueba el de Jap√≥n y Francia']},
    {title:'Magic Kingdom sin prisas üè∞',icon:'üè∞',type:'park',
     acts:[{t:'8:00 AM',d:'üéüÔ∏è Early Entry ‚Äî TRON',i:''},{t:'9:30 AM',d:'üè¥‚Äç‚ò†Ô∏è Cl√°sicos: Pirates, Haunted Mansion, Jungle Cruise',i:''},{t:'11:30 AM',d:'üçΩÔ∏è Brunch en Be Our Guest',i:''},{t:'1:00 PM',d:'üé¢ Seven Dwarfs + Thunder Mountain',i:''},{t:'3:00 PM',d:'‚òï Pausa ‚Äî caf√© y relax en el hotel v√≠a monorriel',i:''},{t:'6:00 PM',d:'üè∞ Regreso al parque para la noche',i:''},{t:'7:00 PM',d:'üçΩÔ∏è Cena en Liberty Tree Tavern',i:''},{t:'9:00 PM',d:'üéÜ Happily Ever After desde el hub',i:''}],
     tips:['La ventaja de ir sin ni√±os: puedes tomar pausas y regresar','El monorriel te lleva del Grand Floridian a Magic Kingdom en 5 min']},
    {title:'Hollywood Studios + Spa üé¨',icon:'‚≠ê',type:'park',
     acts:[{t:'8:00 AM',d:'üéüÔ∏è Early Entry ‚Äî Rise of the Resistance',i:''},{t:'9:30 AM',d:'üöÄ Smugglers Run + explorar Galaxy\'s Edge',i:''},{t:'11:00 AM',d:'üç∏ Oga\'s Cantina ‚Äî bar tem√°tico Star Wars',i:''},{t:'12:00 PM',d:'üóº Tower of Terror',i:''},{t:'1:00 PM',d:'üçΩÔ∏è Almuerzo en 50\'s Prime Time Cafe',i:''},{t:'2:30 PM',d:'üè® Regreso al hotel',i:''},{t:'3:30 PM',d:'üíÜ Spa treatment en Senses Spa',i:''},{t:'6:00 PM',d:'üç∏ Cocteles en Enchanted Rose lounge',i:''},{t:'8:00 PM',d:'üçΩÔ∏è Cena en Victoria & Albert\'s (vestimenta formal)',i:''}],
     tips:['Victoria & Albert\'s es la MEJOR experiencia gastron√≥mica en Disney','Oga\'s Cantina: reservaci√≥n obligatoria, cocteles incre√≠bles']},
    {title:'Animal Kingdom + Pool Day ü¶Å',icon:'ü¶Å',type:'park',
     acts:[{t:'7:30 AM',d:'üéüÔ∏è Early Entry ‚Äî Flight of Passage',i:''},{t:'9:00 AM',d:'ü¶Å Safari Kilimanjaro',i:''},{t:'10:30 AM',d:'üé¢ Expedition Everest',i:''},{t:'11:30 AM',d:'üçΩÔ∏è Almuerzo en Yak & Yeti',i:''},{t:'1:00 PM',d:'üå≥ Trails + Tree of Life',i:''},{t:'2:30 PM',d:'üèä Regreso al hotel ‚Äî pool day en Grand Floridian',i:''},{t:'5:00 PM',d:'üç∏ Cocteles junto a la piscina',i:''},{t:'7:30 PM',d:'üçΩÔ∏è Cena en California Grill (vista de fuegos a lo lejos)',i:''}],
     tips:['Flight of Passage es la mejor atracci√≥n de todo Disney World','California Grill tiene vista panor√°mica a Magic Kingdom']},
    {title:'Disney Springs + D√≠a libre',icon:'üõçÔ∏è',type:'free',
     acts:[{t:'9:00 AM',d:'‚òï Desayuno tard√≠o en el hotel',i:''},{t:'10:30 AM',d:'üíÜ √öltimo spa o piscina',i:''},{t:'12:00 PM',d:'üõçÔ∏è Disney Springs ‚Äî tiendas exclusivas',i:''},{t:'1:30 PM',d:'üçΩÔ∏è Almuerzo en The Boathouse',i:''},{t:'3:00 PM',d:'üç´ Gideon\'s Bakehouse (llega temprano, siempre hay fila)',i:''},{t:'5:00 PM',d:'üé® Explorar galer√≠as y tiendas de dise√±ador',i:''},{t:'7:30 PM',d:'üçΩÔ∏è Cena de despedida en STK Orlando',i:''}],
     tips:['Gideon\'s Bakehouse: cookies incre√≠bles, siempre hay fila 30-45 min','STK es perfecto para una noche de adultos elegante']},
    {title:'Check-out y regreso ‚úàÔ∏è',icon:'‚úàÔ∏è',type:'travel',
     acts:[{t:'8:00 AM',d:'‚òï √öltimo desayuno en el hotel',i:''},{t:'9:30 AM',d:'üè® Check-out',i:''},{t:'',d:'üöê Traslado al aeropuerto',i:''},{t:'',d:'‚úàÔ∏è Regreso üè†‚ú®',i:''}],
     tips:['Una escapada de lujo Disney completada ‚Äî sin ni√±os, puro disfrute ü•Ç']}
  ]
},

// ‚îÄ‚îÄ California Combo (Disneyland + Universal Hollywood) ‚îÄ‚îÄ
'california-combo':{
  title:'California Dreaming ¬∑ Disneyland + Universal üå¥',
  hotel:'Disneyland Hotel',
  cover:IT_IMAGES['disneyland-cal'],
  gradient:IT_GRADIENTS['disneyland-cal'],
  docs:[
    {icon:'üì±',title:'Descargar Disneyland App',desc:'Para Genie+, filas y mapa'},
    {icon:'üì±',title:'Descargar Universal App',desc:'Para Express Pass y filas'},
    {icon:'üé´',title:'Vincular entradas',desc:'Tener boletos listos en ambas apps'},
    {icon:'üöó',title:'Rentar auto',desc:'Necesario para moverse entre Anaheim y Hollywood'}
  ],
  days:[
    {title:'Llegada a Los √Ångeles',icon:'‚úàÔ∏è',type:'travel',
     acts:[{t:'',d:'‚úàÔ∏è Llegada a LAX',i:''},{t:'',d:'üöó Recoger auto rentado',i:''},{t:'',d:'üè® Check-in en Disneyland Hotel, Anaheim',i:''},{t:'',d:'üö∂ Caminar por Downtown Disney District',i:''},{t:'7:00 PM',d:'üçΩÔ∏è Cena en Downtown Disney',i:''}],
     tips:['LAX a Anaheim: ~45 min sin tr√°fico, 1.5 hrs con tr√°fico','Evita horas pico (7-9 AM y 4-7 PM) para conducir en LA']},
    {title:'Disneyland Park üè∞',icon:'üè∞',type:'park',
     acts:[{t:'7:30 AM',d:'üéüÔ∏è Early Entry ‚Äî directo a Rise of the Resistance',i:''},{t:'9:00 AM',d:'üé¢ Matterhorn + Space Mountain + Indiana Jones',i:''},{t:'11:00 AM',d:'üè∞ Sleeping Beauty Castle + fantasyland',i:''},{t:'12:30 PM',d:'üçΩÔ∏è Almuerzo en Blue Bayou (dentro de Pirates)',i:''},{t:'2:00 PM',d:'üè¥‚Äç‚ò†Ô∏è Pirates + Haunted Mansion + Big Thunder Mountain',i:''},{t:'4:00 PM',d:'üé° Toontown + It\'s a Small World',i:''},{t:'6:00 PM',d:'üçΩÔ∏è Cena en el parque',i:''},{t:'8:00 PM',d:'üéÜ Wondrous Journeys ‚Äî show nocturno',i:''}],
     tips:['Blue Bayou es THE restaurante de Disneyland ‚Äî reserva con anticipaci√≥n','El parque original de Walt tiene una magia especial']},
    {title:'Disney California Adventure üé°',icon:'üé°',type:'park',
     acts:[{t:'8:00 AM',d:'üéüÔ∏è Early Entry ‚Äî Radiator Springs Racers',i:''},{t:'9:30 AM',d:'üé¢ Incredicoaster + Guardians: Mission Breakout',i:''},{t:'11:00 AM',d:'üåä Grizzly River Run',i:''},{t:'12:00 PM',d:'üçΩÔ∏è Almuerzo en Flo\'s V8 Cafe (Cars Land)',i:''},{t:'1:30 PM',d:'üï∏Ô∏è WEB SLINGERS: A Spider-Man Adventure',i:''},{t:'3:00 PM',d:'üé≠ Shows y entretenimiento',i:''},{t:'5:00 PM',d:'üç∫ Craft beer trail en Pacific Wharf',i:''},{t:'7:00 PM',d:'üçΩÔ∏è Cena en Carthay Circle Restaurant',i:''},{t:'9:00 PM',d:'üí° World of Color ‚Äî show nocturno',i:''}],
     tips:['Cars Land de noche es ESPECTACULAR ‚Äî qu√©date para las fotos','Radiator Springs Racers es la mejor atracci√≥n del parque']},
    {title:'Disneyland Park d√≠a 2 üè∞',icon:'üè∞',type:'park',
     acts:[{t:'8:00 AM',d:'üéüÔ∏è Early Entry ‚Äî lo que falt√≥ ayer',i:''},{t:'9:00 AM',d:'üåü Star Wars: Galaxy\'s Edge completo',i:''},{t:'10:30 AM',d:'üöÄ Smugglers Run + Rise of the Resistance (si no ayer)',i:''},{t:'11:30 AM',d:'üçπ Oga\'s Cantina',i:''},{t:'12:30 PM',d:'üçΩÔ∏è Almuerzo',i:''},{t:'2:00 PM',d:'üé¢ Re-rides favoritas',i:''},{t:'4:00 PM',d:'‚òï Pausa y snacks',i:''},{t:'6:00 PM',d:'üçΩÔ∏è Cena de despedida de Disney',i:''},{t:'8:00 PM',d:'üéÜ √öltimo show nocturno',i:''}],
     tips:['Galaxy\'s Edge merece tiempo ‚Äî construir tu lightsaber es una experiencia √∫nica','Oga\'s Cantina: reservaci√≥n obligatoria']},
    {title:'Drive a Hollywood + Universal üé¨',icon:'üé¨',type:'travel',
     acts:[{t:'8:00 AM',d:'üè® Check-out de Anaheim',i:''},{t:'9:00 AM',d:'üöó Drive a Hollywood (~1 hr)',i:''},{t:'10:00 AM',d:'üè® Check-in en hotel Universal area',i:''},{t:'11:00 AM',d:'üåü Hollywood Walk of Fame + TCL Chinese Theatre',i:''},{t:'1:00 PM',d:'üçΩÔ∏è Almuerzo en Hollywood Blvd',i:''},{t:'2:00 PM',d:'üé• Griffith Observatory (vista panor√°mica de LA)',i:''},{t:'5:00 PM',d:'üõçÔ∏è Universal CityWalk ‚Äî compras y cena',i:''},{t:'7:00 PM',d:'üçΩÔ∏è Cena en CityWalk',i:''}],
     tips:['Griffith Observatory es GRATIS y las vistas son incre√≠bles','El tr√°fico en LA es real ‚Äî planifica rutas con Google Maps']},
    {title:'Universal Studios Hollywood üé¢',icon:'üé¢',type:'park',
     acts:[{t:'8:00 AM',d:'üéüÔ∏è Apertura ‚Äî directo a Super Nintendo World',i:''},{t:'10:00 AM',d:'üé¨ Studio Tour (obligatorio)',i:''},{t:'11:30 AM',d:'ü¶ï Jurassic World ride',i:''},{t:'12:30 PM',d:'üçΩÔ∏è Almuerzo',i:''},{t:'1:30 PM',d:'üßô Harry Potter ‚Äî Hogwarts ride + Hogsmeade',i:''},{t:'3:00 PM',d:'üé¢ Rides restantes + shows',i:''},{t:'5:00 PM',d:'üç∫ Butterbeer en Hogsmeade',i:''},{t:'6:30 PM',d:'üçΩÔ∏è Cena en CityWalk',i:''}],
     tips:['El Studio Tour es √öNICO ‚Äî no existe en Orlando','Super Nintendo World de Hollywood tiene Power-Up Band incluido']},
    {title:'Santa Monica + Regreso ‚úàÔ∏è',icon:'‚úàÔ∏è',type:'travel',
     acts:[{t:'8:00 AM',d:'üè® Check-out',i:''},{t:'9:00 AM',d:'üèñÔ∏è Santa Monica Pier + Venice Beach',i:''},{t:'11:00 AM',d:'üçΩÔ∏è Brunch frente al mar',i:''},{t:'1:00 PM',d:'üöó Devolver auto y aeropuerto',i:''},{t:'',d:'‚úàÔ∏è Vuelo de regreso üè†‚ú®',i:''}],
     tips:['Santa Monica Pier es ic√≥nico ‚Äî t√≥mate la foto','California dreaming completado! üå¥']}
  ]
},

// ‚îÄ‚îÄ Crucero Disney 3 noches ‚îÄ‚îÄ
'crucero-disney-3':{
  title:'Crucero Disney ¬∑ 3 Noches Bahamas Express üö¢',
  hotel:'Disney Wish / Disney Dream',
  cover:IT_IMAGES['crucero-disney'],
  gradient:IT_GRADIENTS['crucero-disney'],
  docs:[
    {icon:'üì±',title:'Descargar Disney Cruise Line App',desc:'Navigator digital, horarios y reservaciones'},
    {icon:'üõÇ',title:'Pasaportes vigentes',desc:'Verificar vigencia m√≠nima 6 meses'},
    {icon:'üè•',title:'Check-in online',desc:'Se abre con anticipaci√≥n ‚Äî completar antes de llegar'},
    {icon:'üß≥',title:'Etiquetas de equipaje',desc:'Imprimir y pegar en maletas antes de llegar al puerto'}
  ],
  days:[
    {title:'Embarque en Port Canaveral üö¢',icon:'üö¢',type:'cruise',
     acts:[{t:'11:00 AM',d:'üöê Llegada al puerto',i:''},{t:'12:00 PM',d:'üö¢ Embarque y exploraci√≥n del barco',i:''},{t:'1:00 PM',d:'üçΩÔ∏è Buffet de bienvenida en Cabanas',i:''},{t:'2:00 PM',d:'üèä Explorar cubierta, piscinas y AquaDuck/AquaMouse',i:''},{t:'4:00 PM',d:'‚õµ Sail Away Party en cubierta',i:''},{t:'5:30 PM',d:'üé≠ Show en Walt Disney Theatre',i:''},{t:'7:00 PM',d:'üçΩÔ∏è Cena rotativa (primer restaurante)',i:''},{t:'9:00 PM',d:'üéâ Explorar entretenimiento nocturno',i:''}],
     tips:['Llega al puerto temprano para aprovechar el primer d√≠a','Reserva Palo/Remy desde la app para cena premium','La Sail Away Party es imperdible ‚Äî lleguen a cubierta 15 min antes']},
    {title:'D√≠a en el mar üåä',icon:'üåä',type:'cruise',
     acts:[{t:'7:30 AM',d:'‚òï Desayuno en Cabanas o Room Service',i:''},{t:'9:00 AM',d:'üèä D√≠a de alberca y toboganes',i:''},{t:'10:30 AM',d:'üé® Actividades a bordo / clubs de ni√±os',i:''},{t:'12:00 PM',d:'üçΩÔ∏è Almuerzo en cubierta',i:''},{t:'2:00 PM',d:'üé¨ Cine en el Buena Vista Theatre',i:''},{t:'3:30 PM',d:'üßñ Spa Rainforest Room (pase de d√≠a)',i:''},{t:'5:00 PM',d:'üì∏ Sesi√≥n de fotos con personajes',i:''},{t:'6:30 PM',d:'üçΩÔ∏è Cena rotativa (segundo restaurante)',i:''},{t:'8:30 PM',d:'üé≠ Show principal + Pirate Night',i:''}],
     tips:['Pirate Night es tradici√≥n Disney ‚Äî disfr√°zate y sube a la fiesta en cubierta','El pase de Rainforest Room vale mucho la pena']},
    {title:'Castaway Cay üèùÔ∏è',icon:'üèùÔ∏è',type:'cruise',
     acts:[{t:'8:00 AM',d:'üèùÔ∏è Desembarco en Castaway Cay (isla privada Disney)',i:''},{t:'9:00 AM',d:'üèñÔ∏è Playa familiar o Serenity Bay (solo adultos)',i:''},{t:'10:30 AM',d:'ü§ø Snorkel + actividades acu√°ticas',i:''},{t:'12:00 PM',d:'üçΩÔ∏è BBQ buffet en la isla (INCLUIDO)',i:''},{t:'2:00 PM',d:'üö¥ Bicicletas, caminata o relajarse',i:''},{t:'4:00 PM',d:'üö¢ Regreso al barco',i:''},{t:'6:00 PM',d:'üçΩÔ∏è √öltima cena rotativa',i:''},{t:'8:00 PM',d:'üé≠ Show de despedida + last night party',i:''}],
     tips:['Castaway Cay es EXCLUSIVA de Disney Cruise Line ‚Äî aprov√©chala','Serenity Bay (playa solo adultos) es un para√≠so','La comida en la isla est√° incluida ‚Äî no te limites']},
    {title:'Desembarque y regreso üè†',icon:'‚úàÔ∏è',type:'travel',
     acts:[{t:'7:00 AM',d:'‚òï √öltimo desayuno a bordo',i:''},{t:'8:00 AM',d:'üö¢ Desembarque en Port Canaveral',i:''},{t:'',d:'üöê Traslado al aeropuerto de Orlando',i:''},{t:'',d:'‚úàÔ∏è Vuelo de regreso üè†‚ú®',i:''}],
     tips:['3 noches m√°gicas en el mar completadas!','Port Canaveral est√° a ~45 min del aeropuerto de Orlando']}
  ]
},

// ‚îÄ‚îÄ Crucero Disney + Disney World combo ‚îÄ‚îÄ
'crucero-parks':{
  title:'Crucero Disney + Disney World Combo üö¢üè∞',
  hotel:'Disney Wish + Disney\'s Contemporary Resort',
  cover:IT_IMAGES['crucero-disney'],
  gradient:'linear-gradient(135deg,#001a33,#4b2583,#c33f91)',
  docs:[
    {icon:'üì±',title:'Descargar Disney Cruise Line App',desc:'Para el crucero'},
    {icon:'üì±',title:'Descargar My Disney Experience',desc:'Para los parques'},
    {icon:'üõÇ',title:'Pasaportes vigentes',desc:'M√≠nimo 6 meses de vigencia'},
    {icon:'üé´',title:'Vincular entradas de parques',desc:'Tener boletos listos en la app'},
    {icon:'üçΩÔ∏è',title:'Reservar restaurantes parques',desc:'Se abren 60 d√≠as antes'},
    {icon:'‚ö°',title:'Lightning Lane',desc:'Comprar para los d√≠as de parques'}
  ],
  days:[
    {title:'Llegada a Orlando',icon:'‚úàÔ∏è',type:'travel',
     acts:[{t:'',d:'‚úàÔ∏è Llegada a Orlando (MCO)',i:''},{t:'',d:'üè® Check-in en hotel de transici√≥n',i:''},{t:'',d:'üõçÔ∏è Disney Springs',i:''},{t:'7:00 PM',d:'üçΩÔ∏è Cena',i:''}],
     tips:['Prepara todo para el crucero ma√±ana ‚Äî maletas con etiquetas listas']},
    {title:'Embarque en Port Canaveral üö¢',icon:'üö¢',type:'cruise',
     acts:[{t:'9:00 AM',d:'üöê Traslado al puerto (~1 hr)',i:''},{t:'11:00 AM',d:'üö¢ Embarque',i:''},{t:'1:00 PM',d:'üçΩÔ∏è Buffet de bienvenida',i:''},{t:'2:00 PM',d:'üèä Explorar el barco',i:''},{t:'4:00 PM',d:'‚õµ Sail Away Party',i:''},{t:'5:30 PM',d:'üé≠ Show',i:''},{t:'7:00 PM',d:'üçΩÔ∏è Cena rotativa',i:''}],
     tips:['Familiar√≠zate con el barco hoy ‚Äî hay MUCHO que explorar']},
    {title:'D√≠a en el mar üåä',icon:'üåä',type:'cruise',
     acts:[{t:'8:00 AM',d:'‚òï Desayuno',i:''},{t:'9:30 AM',d:'üèä Piscina y toboganes',i:''},{t:'12:00 PM',d:'üçΩÔ∏è Almuerzo',i:''},{t:'2:00 PM',d:'üé¨ Cine + actividades',i:''},{t:'5:00 PM',d:'üì∏ Fotos con personajes',i:''},{t:'7:00 PM',d:'üçΩÔ∏è Cena rotativa',i:''},{t:'9:00 PM',d:'üé≠ Show nocturno',i:''}],
     tips:['Rel√°jate ‚Äî ma√±ana es Castaway Cay!']},
    {title:'Castaway Cay üèùÔ∏è',icon:'üèùÔ∏è',type:'cruise',
     acts:[{t:'8:00 AM',d:'üèùÔ∏è Desembarco en la isla',i:''},{t:'9:00 AM',d:'üèñÔ∏è Playa + actividades acu√°ticas',i:''},{t:'12:00 PM',d:'üçΩÔ∏è BBQ en la isla',i:''},{t:'3:00 PM',d:'üö¥ Explorar la isla',i:''},{t:'4:30 PM',d:'üö¢ Regreso al barco',i:''},{t:'7:00 PM',d:'üçΩÔ∏è √öltima cena',i:''},{t:'9:00 PM',d:'üéâ Fiesta de despedida',i:''}],
     tips:['Aprovecha cada minuto en Castaway Cay']},
    {title:'Desembarque + Hotel Disney üè∞',icon:'üè®',type:'travel',
     acts:[{t:'8:00 AM',d:'üö¢ Desembarque',i:''},{t:'9:30 AM',d:'üöê Traslado a Walt Disney World',i:''},{t:'11:00 AM',d:'üè® Check-in en Contemporary Resort',i:''},{t:'12:00 PM',d:'üçΩÔ∏è Almuerzo en el hotel',i:''},{t:'2:00 PM',d:'üèä Piscina y descanso',i:''},{t:'5:00 PM',d:'üö∂ Caminar a Magic Kingdom (est√° al lado!)',i:''},{t:'6:00 PM',d:'üçΩÔ∏è Cena en el parque',i:''},{t:'9:00 PM',d:'üéÜ Happily Ever After',i:''}],
     tips:['Contemporary Resort tiene acceso a pie a Magic Kingdom','Descansa hoy ‚Äî los pr√≥ximos d√≠as son intensos en parques']},
    {title:'Magic Kingdom üè∞',icon:'üè∞',type:'park',
     acts:[{t:'7:30 AM',d:'üö∂ Caminar al parque desde el hotel',i:''},{t:'8:00 AM',d:'üéüÔ∏è Early Entry ‚Äî TRON + Seven Dwarfs',i:''},{t:'10:00 AM',d:'üè¥‚Äç‚ò†Ô∏è Pirates + Haunted Mansion + Jungle Cruise',i:''},{t:'12:00 PM',d:'üçΩÔ∏è Almuerzo en Be Our Guest',i:''},{t:'2:00 PM',d:'üé¢ Thunder Mountain + Tiana\'s Bayou',i:''},{t:'3:30 PM',d:'üé™ Parade',i:''},{t:'5:00 PM',d:'‚òï Pausa en el hotel',i:''},{t:'7:00 PM',d:'üçΩÔ∏è Cena',i:''},{t:'9:00 PM',d:'üéÜ Fuegos artificiales',i:''}],
     tips:['La ventaja del Contemporary: pausa de medio d√≠a en el hotel']},
    {title:'EPCOT üåç',icon:'üåç',type:'park',
     acts:[{t:'8:00 AM',d:'üéüÔ∏è Early Entry ‚Äî Guardians of the Galaxy',i:''},{t:'9:30 AM',d:'üöÄ Test Track + Spaceship Earth',i:''},{t:'11:00 AM',d:'üç∑ World Showcase tour gastron√≥mico',i:''},{t:'1:00 PM',d:'üçΩÔ∏è Almuerzo en World Showcase',i:''},{t:'3:00 PM',d:'‚ùÑÔ∏è Frozen + Remy\'s Ratatouille',i:''},{t:'5:00 PM',d:'üç∏ Drinks around the world',i:''},{t:'7:30 PM',d:'üçΩÔ∏è Cena especial',i:''},{t:'9:00 PM',d:'üéÜ Luminous',i:''}],
     tips:['Despu√©s del crucero, EPCOT se siente como extensi√≥n del viaje']},
    {title:'Hollywood Studios ‚≠ê',icon:'‚≠ê',type:'park',
     acts:[{t:'8:00 AM',d:'üéüÔ∏è Early Entry ‚Äî Rise of the Resistance',i:''},{t:'9:30 AM',d:'üöÄ Galaxy\'s Edge completo',i:''},{t:'11:00 AM',d:'üçπ Oga\'s Cantina',i:''},{t:'12:00 PM',d:'üçΩÔ∏è Almuerzo',i:''},{t:'1:30 PM',d:'üß∏ Toy Story Land ‚Äî Slinky Dog Dash',i:''},{t:'3:00 PM',d:'üóº Tower of Terror',i:''},{t:'5:00 PM',d:'üé¨ Shows',i:''},{t:'7:00 PM',d:'üçΩÔ∏è Cena',i:''},{t:'8:30 PM',d:'üé¨ Fantasmic!',i:''}],
     tips:['Rise of the Resistance: la atracci√≥n m√°s √©pica de Disney']},
    {title:'Animal Kingdom ü¶Å',icon:'ü¶Å',type:'park',
     acts:[{t:'7:30 AM',d:'üéüÔ∏è Early Entry ‚Äî Flight of Passage',i:''},{t:'9:00 AM',d:'ü¶Å Safari Kilimanjaro',i:''},{t:'10:30 AM',d:'üé¢ Expedition Everest',i:''},{t:'12:00 PM',d:'üçΩÔ∏è Almuerzo en Flame Tree BBQ',i:''},{t:'1:30 PM',d:'üå≥ Trails y explorar',i:''},{t:'3:00 PM',d:'üèä Regreso al hotel ‚Äî piscina',i:''},{t:'6:00 PM',d:'üçΩÔ∏è Cena de despedida en California Grill',i:''}],
     tips:['Animal Kingdom se hace en medio d√≠a ‚Äî aprovecha la tarde para descansar']},
    {title:'D√≠a libre + Disney Springs',icon:'üõçÔ∏è',type:'free',
     acts:[{t:'9:00 AM',d:'‚òï Desayuno tard√≠o',i:''},{t:'10:30 AM',d:'üèä √öltima ma√±ana en la piscina',i:''},{t:'12:00 PM',d:'üõçÔ∏è Disney Springs ‚Äî compras finales',i:''},{t:'2:00 PM',d:'üçΩÔ∏è Almuerzo en Disney Springs',i:''},{t:'4:00 PM',d:'üõçÔ∏è Outlets Premium (opcional)',i:''},{t:'7:00 PM',d:'üçΩÔ∏è √öltima cena',i:''}],
     tips:['Relax day after 12 amazing days!']},
    {title:'Regreso a casa ‚úàÔ∏è',icon:'‚úàÔ∏è',type:'travel',
     acts:[{t:'8:00 AM',d:'üß≥ Empacar',i:''},{t:'9:30 AM',d:'üè® Check-out',i:''},{t:'',d:'üöê Aeropuerto',i:''},{t:'',d:'‚úàÔ∏è Vuelo de regreso üè†‚ú®',i:''}],
     tips:['12 noches √©picas: mar + parques ‚Äî el combo definitivo!']}
  ]
},

// ‚îÄ‚îÄ Nickelodeon Resort Riviera Maya ‚îÄ‚îÄ
'nickelodeon':{
  title:'Nickelodeon Resort ¬∑ Riviera Maya üü†',
  hotel:'Nickelodeon Hotels & Resorts Riviera Maya',
  cover:'https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=1200&h=600&fit=crop&q=80',
  gradient:'linear-gradient(135deg,#FF6600,#FF9900,#FFCC00)',
  docs:[
    {icon:'üõÇ',title:'Pasaportes o INE',desc:'Verificar vigencia'},
    {icon:'üè•',title:'Seguro de viaje',desc:'Recomendado para cualquier viaje'},
    {icon:'üìã',title:'Reservaci√≥n del hotel',desc:'Todo incluido ‚Äî confirmaci√≥n impresa o digital'},
    {icon:'üöê',title:'Traslado aeropuerto',desc:'Reservar con anticipaci√≥n'}
  ],
  days:[
    {title:'Llegada a Canc√∫n',icon:'‚úàÔ∏è',type:'travel',
     acts:[{t:'',d:'‚úàÔ∏è Llegada al Aeropuerto de Canc√∫n (CUN)',i:''},{t:'',d:'üöê Traslado al hotel (~30 min)',i:''},{t:'',d:'üè® Check-in + pulsera all-inclusive',i:''},{t:'',d:'üèä Explorar el hotel y piscinas',i:''},{t:'',d:'üü† Conocer el Aqua Nick (parque acu√°tico)',i:''},{t:'7:00 PM',d:'üçΩÔ∏è Cena buffet Nickerie',i:''}],
     tips:['El resort es TODO INCLUIDO ‚Äî comida, bebidas, actividades','Aqua Nick tiene toboganes incre√≠bles ‚Äî lleven protector solar reef-safe']},
    {title:'D√≠a de Aqua Nick + playa üèä',icon:'üèä',type:'free',
     acts:[{t:'8:00 AM',d:'üç≥ Desayuno',i:''},{t:'9:00 AM',d:'üü† Aqua Nick ‚Äî toboganes y zona de juegos',i:''},{t:'11:00 AM',d:'üèñÔ∏è Playa del resort',i:''},{t:'1:00 PM',d:'üçΩÔ∏è Almuerzo en restaurante del hotel',i:''},{t:'3:00 PM',d:'üé® Actividades de personajes (Bob Esponja, Dora)',i:''},{t:'4:30 PM',d:'üèä Piscina infinita',i:''},{t:'6:00 PM',d:'üü† Slime Time ‚Äî ceremonia del slime!',i:''},{t:'7:30 PM',d:'üçΩÔ∏è Cena tem√°tica',i:''}],
     tips:['La ceremonia del SLIME es imperdible para los ni√±os','Todas las actividades con personajes est√°n incluidas']},
    {title:'Excursi√≥n: Xcaret o cenote',icon:'üåø',type:'free',
     acts:[{t:'7:00 AM',d:'üç≥ Desayuno temprano',i:''},{t:'8:30 AM',d:'üöê Salida a Xcaret/cenote cercano',i:''},{t:'10:00 AM',d:'ü§ø Snorkel en cenote o r√≠o subterr√°neo',i:''},{t:'12:00 PM',d:'üçΩÔ∏è Almuerzo',i:''},{t:'2:00 PM',d:'üåø Explorar parque/cenote',i:''},{t:'5:00 PM',d:'üöê Regreso al hotel',i:''},{t:'7:00 PM',d:'üçΩÔ∏è Cena en el resort',i:''},{t:'8:30 PM',d:'üé¨ Cine al aire libre o show nocturno',i:''}],
     tips:['Los cenotes de la Riviera Maya son una experiencia √öNICA','Lleva zapatos acu√°ticos y protector solar biodegradable']},
    {title:'D√≠a de relax en el resort üèñÔ∏è',icon:'üèñÔ∏è',type:'free',
     acts:[{t:'9:00 AM',d:'üç≥ Desayuno tard√≠o',i:''},{t:'10:00 AM',d:'üíÜ Spa (con costo extra)',i:''},{t:'11:00 AM',d:'üèä Piscina + toboganes',i:''},{t:'1:00 PM',d:'üçΩÔ∏è Almuerzo en la playa',i:''},{t:'3:00 PM',d:'üé® Actividades con personajes Nickelodeon',i:''},{t:'4:30 PM',d:'üü† Aqua Nick round 2',i:''},{t:'6:00 PM',d:'üì∏ Sesi√≥n de fotos con Bob Esponja',i:''},{t:'7:30 PM',d:'üçΩÔ∏è Cena de despedida ‚Äî restaurante gourmet',i:''}],
     tips:['El spa es el √∫nico servicio con costo extra','Aprovecha los √∫ltimos momentos en el para√≠so']},
    {title:'Playa de Tulum + regreso ‚úàÔ∏è',icon:'‚úàÔ∏è',type:'travel',
     acts:[{t:'7:00 AM',d:'üç≥ √öltimo desayuno',i:''},{t:'9:00 AM',d:'üè® Check-out',i:''},{t:'9:30 AM',d:'üèñÔ∏è Parada en playa de Tulum (opcional)',i:''},{t:'11:00 AM',d:'üì∏ Ruinas de Tulum vista r√°pida',i:''},{t:'12:30 PM',d:'üöê Traslado al aeropuerto',i:''},{t:'',d:'‚úàÔ∏è Vuelo de regreso üè†‚ú®',i:''}],
     tips:['Si el vuelo es tarde, vale la pena visitar Tulum','5 noches de diversi√≥n Nickelodeon completadas! üü†']}
  ]
},

// ‚îÄ‚îÄ Xcaret Todo Incluido ‚îÄ‚îÄ
'xcaret':{
  title:'Xcaret ¬∑ Aventura Todo Incluido üåø',
  hotel:'Hotel Xcaret M√©xico',
  cover:'https://images.unsplash.com/photo-1552074284-5e88ef1aef18?w=1200&h=600&fit=crop&q=80',
  gradient:'linear-gradient(135deg,#1a472a,#2d5a27,#4caf50)',
  docs:[
    {icon:'üõÇ',title:'Pasaportes o INE',desc:'Verificar vigencia'},
    {icon:'üìã',title:'Reservaci√≥n All-Fun Inclusive',desc:'Incluye parques Xcaret, Xel-H√°, Xplor'},
    {icon:'üè•',title:'Seguro de viaje',desc:'Recomendado'},
    {icon:'üöê',title:'Traslado aeropuerto',desc:'Incluido con el hotel'}
  ],
  days:[
    {title:'Llegada al para√≠so',icon:'‚úàÔ∏è',type:'travel',
     acts:[{t:'',d:'‚úàÔ∏è Llegada a Canc√∫n (CUN)',i:''},{t:'',d:'üöê Traslado al Hotel Xcaret M√©xico (~1 hr)',i:''},{t:'',d:'üè® Check-in All-Fun Inclusive',i:''},{t:'',d:'üèä Explorar el hotel ‚Äî r√≠os, piscinas, cenotes',i:''},{t:'7:00 PM',d:'üçΩÔ∏è Cena en alguno de los 10+ restaurantes',i:''}],
     tips:['All-Fun Inclusive = hotel + TODOS los parques del grupo Xcaret','El hotel tiene r√≠os internos y cenotes propios ‚Äî explora con calma']},
    {title:'Parque Xcaret üåø',icon:'üåø',type:'free',
     acts:[{t:'8:00 AM',d:'üç≥ Desayuno en el hotel',i:''},{t:'9:00 AM',d:'üåø Entrada a Parque Xcaret (incluido)',i:''},{t:'9:30 AM',d:'ü§ø R√≠os subterr√°neos ‚Äî snorkel',i:''},{t:'11:00 AM',d:'ü¶ã Mariposario + aviario',i:''},{t:'12:30 PM',d:'üçΩÔ∏è Almuerzo en el parque (incluido)',i:''},{t:'2:00 PM',d:'üê¢ Tortugario + acuario de arrecife',i:''},{t:'4:00 PM',d:'üèä Playa y caleta para snorkel',i:''},{t:'6:30 PM',d:'üé≠ Show Xcaret M√©xico Espectacular (imperdible)',i:''},{t:'9:00 PM',d:'üçΩÔ∏è Cena en el hotel',i:''}],
     tips:['El show nocturno de Xcaret es DE LO MEJOR de M√©xico ‚Äî no falten','Los r√≠os subterr√°neos son la actividad m√°s popular ‚Äî hazlo temprano']},
    {title:'Xel-H√° o Xplor üåä',icon:'üåä',type:'free',
     acts:[{t:'7:00 AM',d:'üç≥ Desayuno temprano',i:''},{t:'8:30 AM',d:'üöê Traslado a Xel-H√° (incluido)',i:''},{t:'9:30 AM',d:'ü§ø Snorkel en la caleta (todo el d√≠a)',i:''},{t:'11:00 AM',d:'üéø Toboganes y tirolesas',i:''},{t:'12:30 PM',d:'üçΩÔ∏è Buffet todo incluido con barra abierta',i:''},{t:'2:00 PM',d:'üåä R√≠o + cliff jumping',i:''},{t:'4:00 PM',d:'üö≤ Bicicletas y cenotes',i:''},{t:'5:00 PM',d:'üöê Regreso al hotel',i:''},{t:'7:30 PM',d:'üçΩÔ∏è Cena en el hotel',i:''}],
     tips:['Xel-H√° = todo incluido (comida y bebidas ilimitadas en el parque)','Alternativa: Xplor para aventura extrema (tirolesas y veh√≠culos anfibios)']},
    {title:'D√≠a de hotel + cenotes üíé',icon:'üíé',type:'free',
     acts:[{t:'9:00 AM',d:'üç≥ Desayuno tard√≠o',i:''},{t:'10:00 AM',d:'üíé Explorar cenotes del hotel',i:''},{t:'11:00 AM',d:'üèä R√≠os del hotel + piscina infinita',i:''},{t:'1:00 PM',d:'üçΩÔ∏è Almuerzo en restaurante gourmet',i:''},{t:'3:00 PM',d:'üíÜ Spa Muluk (con costo adicional)',i:''},{t:'5:00 PM',d:'üèñÔ∏è Playa del hotel',i:''},{t:'7:00 PM',d:'üçΩÔ∏è Cena de despedida ‚Äî degustaci√≥n mexicana',i:''}],
     tips:['El hotel en s√≠ es una experiencia ‚Äî los cenotes y r√≠os son m√°gicos','Prueba un restaurante diferente cada noche']},
    {title:'Tulum + regreso ‚úàÔ∏è',icon:'‚úàÔ∏è',type:'travel',
     acts:[{t:'7:00 AM',d:'üç≥ √öltimo desayuno',i:''},{t:'9:00 AM',d:'üè® Check-out',i:''},{t:'10:00 AM',d:'üèõÔ∏è Ruinas de Tulum (parada express)',i:''},{t:'11:30 AM',d:'üì∏ Fotos en la playa de Tulum',i:''},{t:'1:00 PM',d:'üöê Traslado al aeropuerto',i:''},{t:'',d:'‚úàÔ∏è Vuelo de regreso üè†‚ú®',i:''}],
     tips:['Xcaret es un para√≠so mexicano ‚Äî 5 noches de naturaleza y cultura üåø']}
  ]
},

// ‚îÄ‚îÄ Disneyland Paris ‚îÄ‚îÄ
'paris':{
  title:'Disneyland Paris ¬∑ La Magie ‚ú®üóº',
  hotel:'Disneyland Hotel (en el parque)',
  cover:'https://images.unsplash.com/photo-1502602898657-3e91760cbb34?w=1200&h=600&fit=crop&q=80',
  gradient:'linear-gradient(135deg,#1a1a6e,#4169E1,#FFD700)',
  docs:[
    {icon:'üì±',title:'Descargar Disneyland Paris App',desc:'Para filas, mapa y reservaciones'},
    {icon:'üõÇ',title:'Pasaportes vigentes',desc:'M√≠nimo 6 meses de vigencia'},
    {icon:'‚úàÔ∏è',title:'Visa Schengen (si aplica)',desc:'Verificar requisitos seg√∫n nacionalidad'},
    {icon:'üöÑ',title:'Boletos de tren',desc:'Si llegas por Eurostar o TGV'},
    {icon:'üçΩÔ∏è',title:'Reservar restaurantes',desc:'Se reservan en la app'}
  ],
  days:[
    {title:'Llegada a Par√≠s',icon:'‚úàÔ∏è',type:'travel',
     acts:[{t:'',d:'‚úàÔ∏è Llegada a Par√≠s (CDG o Orly)',i:''},{t:'',d:'üöÑ Tren RER A o TGV a Marne-la-Vall√©e (~35-45 min)',i:''},{t:'',d:'üè® Check-in en Disneyland Hotel (entrada al parque incluida)',i:''},{t:'',d:'üè∞ Explorar Disney Village ‚Äî tiendas y restaurantes',i:''},{t:'7:00 PM',d:'üçΩÔ∏è Cena en Disney Village',i:''}],
     tips:['El Disneyland Hotel est√° DENTRO del parque ‚Äî la ubicaci√≥n es imbatible','RER A desde CDG cambia en Ch√¢telet-Les Halles','Descansa ‚Äî ma√±ana hay que madrugar para la magia']},
    {title:'Disneyland Park üè∞',icon:'üè∞',type:'park',
     acts:[{t:'8:00 AM',d:'üéüÔ∏è Extra Magic Time (hu√©spedes Disney)',i:''},{t:'8:00 AM',d:'üé¢ Big Thunder Mountain + Peter Pan (sin fila)',i:''},{t:'10:00 AM',d:'üè∞ Castillo de la Bella Durmiente (es recorrible!)',i:''},{t:'10:30 AM',d:'üé¢ Hyperspace Mountain + Buzz Lightyear',i:''},{t:'12:00 PM',d:'üçΩÔ∏è Almuerzo en Auberge de Cendrillon (princesas)',i:''},{t:'2:00 PM',d:'üè¥‚Äç‚ò†Ô∏è Pirates of the Caribbean + Phantom Manor',i:''},{t:'3:30 PM',d:'üé™ Disney Stars on Parade',i:''},{t:'5:00 PM',d:'üé° Rides faltantes + explorar',i:''},{t:'7:00 PM',d:'üçΩÔ∏è Cena en Walt\'s ‚Äî An American Restaurant',i:''},{t:'9:30 PM',d:'üéÜ Disney Illuminations ‚Äî show del castillo',i:''}],
     tips:['El castillo de Paris se puede RECORRER POR DENTRO ‚Äî incluyendo el drag√≥n en el s√≥tano','Extra Magic Time para hu√©spedes Disney: 1 hora antes de apertura general','El Phantom Manor es diferente al Haunted Mansion ‚Äî vale la pena']},
    {title:'Walt Disney Studios Park üé¨',icon:'üé¨',type:'park',
     acts:[{t:'8:00 AM',d:'üéüÔ∏è Extra Magic Time',i:''},{t:'8:00 AM',d:'üé¢ Avengers Assemble: Flight Force',i:''},{t:'9:30 AM',d:'üï∏Ô∏è Spider-Man W.E.B. Adventure',i:''},{t:'10:30 AM',d:'üßä Frozen: A Musical Invitation',i:''},{t:'11:30 AM',d:'üé¢ Crush\'s Coaster + Ratatouille',i:''},{t:'1:00 PM',d:'üçΩÔ∏è Almuerzo en Bistrot Chez R√©my',i:''},{t:'2:30 PM',d:'üóº Tower of Terror',i:''},{t:'4:00 PM',d:'üé≠ Shows y entertainment',i:''},{t:'5:30 PM',d:'‚òï Pausa + regresar a Disneyland Park',i:''},{t:'7:00 PM',d:'üçΩÔ∏è Cena en Disneyland Park',i:''},{t:'9:30 PM',d:'üéÜ Disney Illuminations (desde otra perspectiva)',i:''}],
     tips:['Crush\'s Coaster SIEMPRE tiene fila ‚Äî hazlo temprano o con Premier Access','Bistrot Chez R√©my te encoge al tama√±o de Remy ‚Äî experiencia √∫nica','Studios Park es m√°s peque√±o ‚Äî comb√≠nalo con tiempo en Disneyland Park']},
    {title:'Par√≠s ciudad üóº',icon:'üóº',type:'free',
     acts:[{t:'8:00 AM',d:'üöÑ RER A al centro de Par√≠s (~40 min)',i:''},{t:'9:30 AM',d:'üóº Torre Eiffel (reserva con anticipaci√≥n!)',i:''},{t:'11:00 AM',d:'üö∂ Caminar por Champs-√âlys√©es hasta Arc de Triomphe',i:''},{t:'12:30 PM',d:'üçΩÔ∏è Almuerzo en bistr√≥ parisino',i:''},{t:'2:00 PM',d:'üñºÔ∏è Louvre o Mus√©e d\'Orsay',i:''},{t:'4:00 PM',d:'üèõÔ∏è Pasear por Montmartre + Sacr√©-C≈ìur',i:''},{t:'6:00 PM',d:'ü•ê Caf√© + patisserie',i:''},{t:'7:30 PM',d:'üçΩÔ∏è Cena en el barrio Le Marais',i:''},{t:'9:00 PM',d:'üóº Torre Eiffel iluminada (cada hora)',i:''},{t:'10:30 PM',d:'üöÑ Regreso al hotel',i:''}],
     tips:['Reserva la Torre Eiffel ONLINE con semanas de anticipaci√≥n','El metro de Par√≠s es eficiente ‚Äî compra carnet de 10 billetes','Si solo puedes ver un museo: Louvre para arte, Orsay para impresionistas']},
    {title:'Disneyland Park encore + regreso',icon:'üè∞',type:'park',
     acts:[{t:'8:00 AM',d:'üéüÔ∏è Extra Magic Time ‚Äî rides favoritos',i:''},{t:'10:00 AM',d:'üé¢ Todo lo que falt√≥',i:''},{t:'12:00 PM',d:'üçΩÔ∏è √öltimo almuerzo Disney',i:''},{t:'2:00 PM',d:'üõçÔ∏è Compras de souvenirs en Main Street',i:''},{t:'4:00 PM',d:'üè® Check-out y preparar equipaje',i:''},{t:'5:00 PM',d:'üì∏ √öltimas fotos en el castillo',i:''}],
     tips:['Main Street tiene las mejores tiendas ‚Äî no dejes todo para el √∫ltimo d√≠a']},
    {title:'Regreso a casa ‚úàÔ∏è',icon:'‚úàÔ∏è',type:'travel',
     acts:[{t:'8:00 AM',d:'‚òï √öltimo desayuno',i:''},{t:'9:00 AM',d:'üöÑ Tren al aeropuerto CDG',i:''},{t:'',d:'‚úàÔ∏è Vuelo de regreso üè†‚ú®',i:''}],
     tips:['Disneyland Paris completado ‚Äî la magie! üóº‚ú®']}
  ]
},

'blank':{
  title:'Mi Itinerario de Viaje',
  hotel:'',
  cover:'https://images.unsplash.com/photo-1488646953014-85cb44e25828?w=1200&h=600&fit=crop&q=80',
  gradient:'linear-gradient(135deg,#E8716D,#D4605C)',
  docs:[],
  days:[
    {title:'D√≠a 1',icon:'üìç',type:'travel',acts:[{t:'',d:'Actividad...',i:''}],tips:[]},
    {title:'D√≠a 2',icon:'üìç',type:'park',acts:[{t:'',d:'Actividad...',i:''}],tips:[]},
    {title:'D√≠a 3',icon:'üìç',type:'free',acts:[{t:'',d:'Actividad...',i:''}],tips:[]}
  ]
}
};

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ITINERARY FORM MANAGEMENT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let itDayCount=0,itDocCount=0;
let currentItData=null;

function loadTemplate(){
  const tpl=v('it-template');
  if(!tpl){document.getElementById('it-form').style.display='none';return}
  document.getElementById('it-form').style.display='';
  document.getElementById('it-preview-section').style.display='none';
  const t=IT_TEMPLATES[tpl];
  if(!t)return;
  document.getElementById('it-title').value=t.title;
  document.getElementById('it-hotel').value=t.hotel;
  document.getElementById('it-cover').value=t.cover;
  itDayCount=0;itDocCount=0;
  document.getElementById('it-days-container').innerHTML='';
  document.getElementById('it-docs-container').innerHTML='';
  t.docs.forEach(d=>addItDoc(d.icon,d.title,d.desc));
  t.days.forEach(d=>addItDay(d));
  document.getElementById('it-form').scrollIntoView({behavior:'smooth',block:'start'});
}

function addItDoc(icon,title,desc){
  itDocCount++;
  const n=itDocCount;
  const c=document.getElementById('it-docs-container');
  const div=document.createElement('div');
  div.className='it-doc-row';
  div.id='itdoc-'+n;
  div.innerHTML=`<input type="text" value="${icon||''}" placeholder="üìÑ" class="fi-input it-mini-input" style="width:44px;text-align:center;flex-shrink:0" id="itdoc-${n}-i"><input type="text" value="${title||''}" placeholder="T√≠tulo del documento" class="fi-input it-mini-input" style="flex:1" id="itdoc-${n}-t"><input type="text" value="${desc||''}" placeholder="Descripci√≥n" class="fi-input it-mini-input" style="flex:1" id="itdoc-${n}-d"><button type="button" onclick="document.getElementById('itdoc-${n}').remove()" class="it-remove-btn">√ó</button>`;
  c.appendChild(div);
}

function addItDay(data){
  itDayCount++;
  const n=itDayCount;
  const c=document.getElementById('it-days-container');
  const div=document.createElement('div');
  div.className='it-day-card';
  div.id='itday-'+n;
  const typeClass=data?.type==='park'?'park':data?.type==='cruise'?'cruise':data?.type==='travel'?'travel':data?.type==='free'?'free':'';
  div.innerHTML=`<div class="it-day-header" onclick="this.parentElement.classList.toggle('open')"><div class="it-day-num ${typeClass}"><span style="font-size:10px">D√çA</span><br>${n}</div><div style="flex:1;min-width:0"><input type="text" value="${data?.title||'Nuevo d√≠a'}" placeholder="T√≠tulo del d√≠a" class="fi-input it-mini-input" style="font-weight:600" id="itday-${n}-title" onclick="event.stopPropagation()"><div style="display:flex;gap:6px;margin-top:4px"><input type="text" value="${data?.icon||'üìç'}" placeholder="üè∞" class="fi-input it-mini-input" style="width:40px;text-align:center;padding:4px" id="itday-${n}-icon" onclick="event.stopPropagation()"><select class="fi-select it-mini-input" style="flex:1;padding:4px 24px 4px 8px" id="itday-${n}-type" onclick="event.stopPropagation()"><option value="travel" ${data?.type==='travel'?'selected':''}>‚úàÔ∏è Viaje</option><option value="park" ${data?.type==='park'?'selected':''}>üè∞ Parque</option><option value="cruise" ${data?.type==='cruise'?'selected':''}>üö¢ Crucero</option><option value="free" ${data?.type==='free'?'selected':''}>üå¥ D√≠a libre</option><option value="activity" ${data?.type==='activity'?'selected':''}>üéâ Actividad</option></select></div></div><span class="it-chevron" style="font-size:16px;padding:8px">‚ñæ</span></div><div class="it-day-body"><div style="margin-bottom:12px"><label class="fi-label" style="font-size:11px">Actividades</label><div id="itday-${n}-acts"></div><button type="button" onclick="addItActivity(${n})" class="btn-link" style="font-size:11px"><span class="text-lg leading-none">+</span> Agregar actividad</button></div><div style="margin-bottom:8px"><label class="fi-label" style="font-size:11px">üí° Tips</label><div id="itday-${n}-tips"></div><button type="button" onclick="addItTip(${n})" class="btn-link" style="font-size:11px"><span class="text-lg leading-none">+</span> Agregar tip</button></div><div style="text-align:right;padding-top:8px;border-top:1px solid #f0ebe5"><button type="button" onclick="document.getElementById('itday-${n}').remove()" class="btn-link" style="color:#999;font-size:11px">üóë Eliminar este d√≠a</button></div></div>`;
  c.appendChild(div);
  const actsC=document.getElementById('itday-'+n+'-acts');
  const tipsC=document.getElementById('itday-'+n+'-tips');
  if(data?.acts){data.acts.forEach(a=>addItActivity(n,a.t,a.d))}
  if(data?.tips){data.tips.forEach(t=>addItTip(n,t))}
}

let actCount=0;
function addItActivity(dayN,time,desc){
  actCount++;
  const id='ita-'+actCount;
  const c=document.getElementById('itday-'+dayN+'-acts');
  const div=document.createElement('div');
  div.className='it-act-row';
  div.id=id;
  div.innerHTML=`<input type="text" value="${time||''}" placeholder="9:00 AM" class="fi-input it-mini-input" style="width:70px;flex-shrink:0;text-align:center" id="${id}-t"><input type="text" value="${(desc||'').replace(/"/g,'&quot;')}" placeholder="Descripci√≥n de la actividad" class="fi-input it-mini-input" style="flex:1" id="${id}-d"><button type="button" onclick="document.getElementById('${id}').remove()" class="it-remove-btn">√ó</button>`;
  c.appendChild(div);
}

let tipCount=0;
function addItTip(dayN,text){
  tipCount++;
  const id='itt-'+tipCount;
  const c=document.getElementById('itday-'+dayN+'-tips');
  const div=document.createElement('div');
  div.className='it-tip-row';
  div.id=id;
  div.innerHTML=`<span style="font-size:14px;flex-shrink:0;padding-top:4px">üí°</span><input type="text" value="${(text||'').replace(/"/g,'&quot;')}" placeholder="Tip para el cliente..." class="fi-input it-mini-input" style="flex:1" id="${id}-v"><button type="button" onclick="document.getElementById('${id}').remove()" class="it-remove-btn">√ó</button>`;
  c.appendChild(div);
}

function updateItDates(){
  const start=document.getElementById('it-start').value;
  if(!start)return;
  const days=document.querySelectorAll('#it-days-container .it-day-card');
  const startDate=new Date(start+'T12:00:00');
  const total=days.length;
  if(total>0){
    const endDate=new Date(startDate);
    endDate.setDate(endDate.getDate()+total-1);
    const y=endDate.getFullYear(),m=String(endDate.getMonth()+1).padStart(2,'0'),d=String(endDate.getDate()).padStart(2,'0');
    document.getElementById('it-end').value=`${y}-${m}-${d}`;
  }
}

function showItForm(){
  document.getElementById('it-preview-section').style.display='none';
  document.getElementById('it-form').style.display='';
  document.getElementById('it-form').scrollIntoView({behavior:'smooth'});
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ITINERARY PREVIEW GENERATION
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function collectItData(){
  const data={};
  data.title=v('it-title')||'Mi Itinerario';
  data.client=v('it-client')||'';
  data.start=v('it-start');
  data.end=v('it-end');
  data.adults=v('it-adults')||'2';
  data.kids=v('it-kids')||'';
  data.hotel=v('it-hotel')||'';
  data.cover=v('it-cover')||'https://images.unsplash.com/photo-1488646953014-85cb44e25828?w=1200&h=600&fit=crop&q=80';
  const tplKey=v('it-template');
  data.gradient=(IT_TEMPLATES[tplKey]?.gradient)||'linear-gradient(135deg,#E8716D,#D4605C)';
  data.docs=[];
  document.querySelectorAll('#it-docs-container .it-doc-row').forEach(row=>{
    const id=row.id;
    const icon=document.getElementById(id+'-i')?.value||'üìÑ';
    const title=document.getElementById(id+'-t')?.value||'';
    const desc=document.getElementById(id+'-d')?.value||'';
    if(title)data.docs.push({icon,title,desc});
  });
  data.days=[];
  document.querySelectorAll('#it-days-container .it-day-card').forEach((card,idx)=>{
    const dayId=card.id;
    const n=dayId.replace('itday-','');
    const title=document.getElementById(dayId+'-title')?.value||'D√≠a '+(idx+1);
    const icon=document.getElementById(dayId+'-icon')?.value||'üìç';
    const type=document.getElementById(dayId+'-type')?.value||'travel';
    const acts=[];
    card.querySelectorAll('#'+dayId+'-acts .it-act-row').forEach(ar=>{
      const aid=ar.id;
      const t=document.getElementById(aid+'-t')?.value||'';
      const d=document.getElementById(aid+'-d')?.value||'';
      if(d)acts.push({t,d});
    });
    const tips=[];
    card.querySelectorAll('#'+dayId+'-tips .it-tip-row').forEach(tr=>{
      const tid=tr.id;
      const val=document.getElementById(tid+'-v')?.value||'';
      if(val)tips.push(val);
    });
    data.days.push({title,icon,type,acts,tips});
  });
  return data;
}

function getDayDate(startStr,dayIndex){
  if(!startStr)return'';
  const d=new Date(startStr+'T12:00:00');
  d.setDate(d.getDate()+dayIndex);
  const dias=['Domingo','Lunes','Martes','Mi√©rcoles','Jueves','Viernes','S√°bado'];
  const meses=['Ene','Feb','Mar','Abr','May','Jun','Jul','Ago','Sep','Oct','Nov','Dic'];
  return`${dias[d.getDay()]} ${d.getDate()} ${meses[d.getMonth()]}`;
}

function generateItPreview(){
  const data=collectItData();
  currentItData=data;
  const container=document.getElementById('it-preview-render');
  const clientSubtitle=data.client?`<p style="font-size:13px;color:rgba(255,255,255,0.9);font-weight:500;margin-top:2px">Para: ${data.client}</p>`:'';
  const startFormatted=data.start?formatDateShort(data.start):'';
  const endFormatted=data.end?formatDateShort(data.end):'';
  const dateRange=startFormatted&&endFormatted?`${startFormatted} ‚Üí ${endFormatted}`:'';

  let docsHtml='';
  if(data.docs.length>0){
    docsHtml=`<div class="itp-section"><div class="itp-stitle">üìé Informaci√≥n y Documentos</div>`;
    const docColors=['#E8716D','#7C3AED','#0D9488','#2563EB','#D97706','#059669','#E11D48','#6366F1'];
    data.docs.forEach((doc,i)=>{
      const bg=docColors[i%docColors.length]+'20';
      docsHtml+=`<div class="itp-doc"><div class="itp-doc-icon" style="background:${bg}">${doc.icon}</div><div><div class="itp-doc-text">${doc.title}</div>${doc.desc?`<div class="itp-doc-desc">${doc.desc}</div>`:''}</div></div>`;
    });
    docsHtml+=`</div>`;
  }

  let daysHtml='';
  data.days.forEach((day,idx)=>{
    const color=DAY_COLORS[idx%DAY_COLORS.length];
    const dateStr=getDayDate(data.start,idx);
    let timelineHtml='';
    day.acts.forEach((act,ai)=>{
      timelineHtml+=`<div class="itp-act"><div class="itp-act-time">${act.t||''}</div><div class="itp-act-line"><div class="itp-act-dot" style="background:${color}"></div><div class="itp-act-bar"></div></div><div class="itp-act-desc">${act.d}</div></div>`;
    });
    let tipsHtml='';
    if(day.tips.length>0){
      tipsHtml=`<div class="itp-tips"><h4>üí° Tips del d√≠a</h4><ul style="list-style:none;padding:0;margin:0">`;
      day.tips.forEach(tip=>{tipsHtml+=`<li>${tip}</li>`});
      tipsHtml+=`</ul></div>`;
    }
    daysHtml+=`<div class="itp-day" data-idx="${idx}"><div class="itp-day-head" onclick="toggleItDay(this)"><div class="itp-day-badge" style="background:${color}"><span class="db-label">D√≠a</span><span class="db-num">${idx+1}</span></div><div class="itp-day-info"><div class="itp-day-date">${dateStr}</div><div class="itp-day-name">${day.icon} ${day.title}</div></div><span class="itp-day-chev">‚ñæ</span></div><div class="itp-day-body"><div class="itp-timeline">${timelineHtml}</div>${tipsHtml}</div></div>`;
  });

  container.innerHTML=`<div class="itp" id="itp-card"><div class="itp-hero" style="background-image:url('${data.cover}')"><div class="itp-hero-ov"><h1>${data.title}</h1>${clientSubtitle}<p>${dateRange}</p></div></div><div class="itp-agent"><div class="itp-agent-avatar">‚ú®</div><div class="itp-agent-info"><h3>Mich Murrieta</h3><p>Tu agente de viajes</p><div class="itp-contact">üì∏ @michmurrieta_viajes</div></div></div><div class="itp-travelers"><div>üë• ${data.adults} Adulto${+data.adults!==1?'s':''}</div>${data.kids?`<div>üë∂ ${data.kids}</div>`:''}<div>üè® ${data.hotel}</div></div>${docsHtml}<div class="itp-section" style="padding-bottom:0"><div class="itp-stitle">üìÖ Tu itinerario d√≠a por d√≠a</div></div>${daysHtml}<div class="itp-footer"><div>‚ú® Mich Murrieta ¬∑ Tu agente de viajes</div><div>üì≤ +52 55 1766 6721</div><div class="sub">michmurrietaviajes.com ¬∑ üì∏ @michmurrieta_viajes</div></div></div>`;

  document.getElementById('it-form').style.display='none';
  document.getElementById('it-preview-section').style.display='';
  document.getElementById('it-preview-section').scrollIntoView({behavior:'smooth',block:'start'});
  setTimeout(()=>{const first=document.querySelector('#itp-card .itp-day');if(first)first.classList.add('open')},300);
}

function toggleItDay(header){
  const day=header.closest('.itp-day');
  day.classList.toggle('open');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// PDF EXPORT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function downloadItPDF(){
  showToast('Generando PDF...');
  const card=document.getElementById('itp-card');
  card.classList.add('pdf-mode');
  document.querySelectorAll('#itp-card .itp-day').forEach(d=>d.classList.add('open'));
  const opt={
    margin:[0,0,0,0],
    filename:`Itinerario_${(v('it-client')||'Cliente').replace(/\s+/g,'_')}.pdf`,
    image:{type:'jpeg',quality:0.98},
    html2canvas:{scale:2,useCORS:true,logging:false,scrollY:0},
    jsPDF:{unit:'mm',format:[120,297],orientation:'portrait'},
    pagebreak:{mode:['avoid-all','css','legacy']}
  };
  html2pdf().set(opt).from(card).save().then(()=>{
    card.classList.remove('pdf-mode');
    document.querySelectorAll('#itp-card .itp-day').forEach(d=>d.classList.remove('open'));
    const first=document.querySelector('#itp-card .itp-day');if(first)first.classList.add('open');
    showToast('PDF descargado ‚úÖ');
  }).catch(()=>{
    card.classList.remove('pdf-mode');
    document.querySelectorAll('#itp-card .itp-day').forEach(d=>d.classList.remove('open'));
    const first=document.querySelector('#itp-card .itp-day');if(first)first.classList.add('open');
    showToast('Error al generar PDF');
  });
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SAVED ITINERARIES ‚Äî localStorage + JSON export/import
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const LS_KEY='mich_saved_itineraries';

function getSavedList(){
  try{return JSON.parse(localStorage.getItem(LS_KEY))||[]}catch(e){return[]}
}
function setSavedList(list){
  localStorage.setItem(LS_KEY,JSON.stringify(list));
}

function renderSavedList(){
  const list=getSavedList();
  const container=document.getElementById('saved-list');
  const empty=document.getElementById('saved-empty');
  if(!list.length){container.innerHTML='';empty.style.display='';return}
  empty.style.display='none';
  container.innerHTML=list.map((item,i)=>{
    const date=item.savedAt?new Date(item.savedAt).toLocaleDateString('es-MX',{day:'numeric',month:'short',year:'numeric',hour:'2-digit',minute:'2-digit'}):'';
    const daysCount=item.data&&item.data.days?item.data.days.length:0;
    return `<div class="saved-item">
      <div class="saved-item-info">
        <div class="saved-item-title">${item.name||'Sin nombre'}</div>
        <div class="saved-item-meta">${daysCount} d√≠as ¬∑ ${item.data&&item.data.hotel?item.data.hotel:'Sin hotel'} ¬∑ ${date}</div>
      </div>
      <div class="saved-item-actions">
        <button class="saved-item-btn" title="Cargar" onclick="loadSavedIt(${i})">üìÇ</button>
        <button class="saved-item-btn" title="Duplicar" onclick="duplicateSavedIt(${i})">üìã</button>
        <button class="saved-item-btn" title="Exportar JSON" onclick="exportSavedIt(${i})">üì§</button>
        <button class="saved-item-btn danger" title="Eliminar" onclick="deleteSavedIt(${i})">üóëÔ∏è</button>
      </div>
    </div>`;
  }).join('');
}

function saveCurrentIt(){
  const data=collectItData();
  if(!data.title&&!data.client){showToast('Llena al menos el t√≠tulo o cliente');return}
  const name=data.title||(data.client?'Itinerario de '+data.client:'Itinerario sin nombre');
  const list=getSavedList();
  const existing=list.findIndex(x=>x.name===name);
  if(existing>=0){
    list[existing]={name,data,savedAt:Date.now()};
    showToast('Itinerario actualizado ‚úÖ');
  }else{
    list.unshift({name,data,savedAt:Date.now()});
    showToast('Itinerario guardado ‚úÖ');
  }
  setSavedList(list);
  renderSavedList();
}

function loadSavedIt(index){
  const list=getSavedList();
  const item=list[index];
  if(!item||!item.data)return;
  const d=item.data;
  document.getElementById('it-form').style.display='';
  document.getElementById('it-preview-section').style.display='none';
  document.getElementById('it-template').value='';
  document.getElementById('it-title').value=d.title||'';
  document.getElementById('it-client').value=d.client||'';
  document.getElementById('it-start').value=d.startDate||'';
  document.getElementById('it-end').value=d.endDate||'';
  document.getElementById('it-adults').value=d.adults||2;
  document.getElementById('it-kids').value=d.kids||'';
  document.getElementById('it-hotel').value=d.hotel||'';
  document.getElementById('it-cover').value=d.cover||'';
  itDayCount=0;itDocCount=0;
  document.getElementById('it-days-container').innerHTML='';
  document.getElementById('it-docs-container').innerHTML='';
  if(d.docs)d.docs.forEach(doc=>addItDoc(doc.icon,doc.title,doc.desc));
  if(d.days)d.days.forEach(day=>{
    addItDay({title:day.title,icon:day.icon||'üìç',type:day.type||'free',acts:day.acts||[],tips:day.tips||[]});
  });
  document.getElementById('it-form').scrollIntoView({behavior:'smooth',block:'start'});
  showToast('Itinerario cargado ‚úÖ');
}

function duplicateSavedIt(index){
  const list=getSavedList();
  const item=list[index];
  if(!item)return;
  const copy=JSON.parse(JSON.stringify(item));
  copy.name=copy.name+' (copia)';
  if(copy.data)copy.data.title=(copy.data.title||'')+' (copia)';
  copy.savedAt=Date.now();
  list.splice(index+1,0,copy);
  setSavedList(list);
  renderSavedList();
  showToast('Itinerario duplicado ‚úÖ');
}

function deleteSavedIt(index){
  if(!confirm('¬øEliminar este itinerario guardado?'))return;
  const list=getSavedList();
  list.splice(index,1);
  setSavedList(list);
  renderSavedList();
  showToast('Itinerario eliminado');
}

function exportSavedIt(index){
  const list=getSavedList();
  const item=list[index];
  if(!item)return;
  const blob=new Blob([JSON.stringify(item,null,2)],{type:'application/json'});
  const a=document.createElement('a');
  a.href=URL.createObjectURL(blob);
  a.download=`Itinerario_${(item.name||'export').replace(/\s+/g,'_')}.json`;
  a.click();
  URL.revokeObjectURL(a.href);
  showToast('JSON exportado ‚úÖ');
}

function exportAllJSON(){
  const list=getSavedList();
  if(!list.length){showToast('No hay itinerarios para exportar');return}
  const blob=new Blob([JSON.stringify(list,null,2)],{type:'application/json'});
  const a=document.createElement('a');
  a.href=URL.createObjectURL(blob);
  a.download='Mich_Itinerarios_Backup_'+new Date().toISOString().slice(0,10)+'.json';
  a.click();
  URL.revokeObjectURL(a.href);
  showToast('Backup exportado ‚úÖ');
}

function importItJSON(){
  document.getElementById('import-file').click();
}

function handleImport(event){
  const file=event.target.files[0];
  if(!file)return;
  const reader=new FileReader();
  reader.onload=function(e){
    try{
      const parsed=JSON.parse(e.target.result);
      const list=getSavedList();
      if(Array.isArray(parsed)){
        parsed.forEach(item=>{
          if(item.name&&item.data){
            item.savedAt=item.savedAt||Date.now();
            list.push(item);
          }
        });
        showToast(parsed.length+' itinerarios importados ‚úÖ');
      }else if(parsed.name&&parsed.data){
        parsed.savedAt=parsed.savedAt||Date.now();
        list.unshift(parsed);
        showToast('Itinerario importado ‚úÖ');
      }else{
        showToast('Formato JSON no v√°lido');return;
      }
      setSavedList(list);
      renderSavedList();
    }catch(err){showToast('Error al leer JSON')}
  };
  reader.readAsText(file);
  event.target.value='';
}

// Initialize saved list on load
document.addEventListener('DOMContentLoaded',async ()=>{await loadCotizacionData();renderSavedList();});
</script>
</body>
</html>
